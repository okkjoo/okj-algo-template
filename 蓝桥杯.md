> 
>
> å‡†å¤‡ä¸‰å››æœˆä»½è“æ¡¥æ¯çš„ç¬”è®°

# è¯´åœ¨å‰é¢çš„å¥—è·¯

æ—¶é—´é™åˆ¶ï¼šC++ è¯„æµ‹æœºä¸€ç§’çº¦è¿è¡Œä¸€äº¿æ¬¡ã€‚è‹¥ç®—æ³•çš„çš„æ—¶é—´å¤æ‚åº¦è¶…è¿‡10^8,åˆ™å¯èƒ½ä¼šè¶…æ—¶

- **ç”±æ•°æ®èŒƒå›´åæ¨ç®—æ³•å¤æ‚åº¦ä»¥åŠç®—æ³•å†…å®¹**

![image-20211210112521113](https://gitee.com/okkjoo/image-bed/raw/master/imgs/image-20211210112521113.png)

- è‹¥è¾“å…¥è¾“å‡º èŒƒå›´ å°äº 105 æ¨èç”¨ `cin / cout` å¦åˆ™ç”¨ `scanf / printf` è¾“å…¥æ—¶é—´ä¼šå¿«ä¸€å€å·¦å³

# é¢˜ç›®

## DFS

### 116. é£è¡Œå‘˜å…„å¼Ÿ|DFS|ä½è¿ç®—|æš´åŠ›æšä¸¾

- çŸ©é˜µ
- å˜ä¸€ä¸ªä½ç½®å°±æ˜¯å˜ä¸€ä¸ªåå­—
- å…ˆçº§æ•´ä½“ä»ä¸Šåˆ°ä¸‹ï¼ŒåŒè¡Œä»å·¦åˆ°å³æ‰“å¼€â€”â€”å…ˆçœ‹ç¬¬ä¸€è¡Œ...

=>

- æš´åŠ›æšä¸¾â€”â€”ä½è¿ç®— ï¼ˆè¿™ä¸ªçœ‹èµ·æ¥æ›´èªæ˜ç‚¹ğŸ¶ï¼‰
  - ä¹Ÿå¯ä»¥DFS+ç›´æ¥æ“ä½œå­—ç¬¦æ•°ç»„

- ç”¨ä¸€ä¸ªåå…­ä½çš„äºŒè¿›åˆ¶æ•°æ¨¡æ‹Ÿæ£‹ç›˜çŠ¶æ€ï¼š0~2^16-1
  - è§£é¢˜æ€è·¯ï¼šè¿™é“é¢˜ç›®è§£é¢˜æ€è·¯å¤§è‡´æ˜¯ï¼Œé¦–å…ˆæˆ‘ä»¬å¯ä»¥æ„é€ ä¸€ä¸ª16ä½çš„äºŒè¿›åˆ¶æ•°ï¼Œç„¶åå‘¢ï¼ŒäºŒè¿›åˆ¶æ•°çš„æ¯ä¸€ä½ä»£è¡¨4*4çŸ©é˜µä¸­çš„ä¸€ä½ï¼Œä¾‹å¦‚1ä»£è¡¨(1,1),2ä»£è¡¨(1,2),3ä»£è¡¨(1,3),4ä»£è¡¨(1,4),5ä»£è¡¨(2,1)ã€‚æ—¢ç„¶è¿™æ ·çš„è¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦æšä¸¾è¿™ä¸ª16ä½çš„äºŒè¿›åˆ¶æ•°ï¼Œå°±å¯ä»¥ç¡®å®šæˆ‘ä»¬çš„æ–¹æ¡ˆï¼Œå› ä¸ºé¢˜ç›®åªéœ€è¦æœ€ä¼˜è§£æ–¹æ¡ˆï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦å¤§çº¦æ˜¯O(16 * 2^16)
- get è·å¾—ä½æ•°
- change é€šè¿‡**å¼‚æˆ–**æ“ä½œè¿›è¡Œåè½¬å¼€å…³æ“ä½œ
  - 01äº’ç›¸åè½¬ == ä¸1å¼‚æˆ–

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int,int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

/*  DFS+ç›´æ¥æ“ä½œå­—ç¬¦æ•°ç»„
typedef pair<int,int> PII;
PII ans[20],cur[20];
char c[6][6];
int sum;
void turn(int x,int y)
{       for(int i=0;i<4;i++)
        {
            if(c[i][y]=='+') c[i][y]='-';
            else  c[i][y]='+';
        }
        for(int i=0;i<4;i++)
        {
            if(c[x][i]=='+') c[x][i]='-';
            else  c[x][i]='+';
        }
         if(c[x][y]=='+') c[x][y]='-';
            else  c[x][y]='+';
}
bool check(char c[][6])
{   for(int i=0;i<4;i++)
    for(int j=0;j<4;j++)
        if(c[i][j]=='+')
           return false; 

     return true; 

}
void dfs(int x,int y,int res){
        if(x==4)
        {
            if(check(c)&&res<sum)
            {   memcpy(ans,cur,sizeof(ans));
                sum=res;
            }
            return;
        }
        int dx=x,dy=y+1;
        if(dy==4){
            dx++,dy=0;
        }
        turn(x,y);
        cur[res+1]={x,y};
        dfs(dx,dy,res+1);
        turn(x,y);
        dfs(dx,dy,res);


}
int main()
{   for(int i=0;i<4;i++)  cin>>c[i];
    sum=0x3f3f3f3f;
    dfs(0,0,0);
    cout<<sum<<endl;
    for(int i=1;i<=sum;i++)
    {
        cout<<ans[i].first+1<<" "<<ans[i].second+1<<endl;
    }


    return 0;
}
 */


int change[4][4];
int get(int x, int y){//è·å–ä½æ•°
	return x*4 + y;
}
int main(){
	int state = 0;//æ£‹ç›˜çŠ¶æ€
	for(int i =0 ; i<4; i++){
		string line;
		cin>>line;
		for(int j = 0;j<4;j++){
			if(line[j] == '+')
				state += 1 << get(i,j);			
		}
	} 

	//é¢„å¤„ç†
	for(int i = 0; i < 4; i++)
	for(int j =0; j<4; j++){
		for(int k=0; k < 4; k++){
			change[i][j] += 1<<get(i, k);
			change[i][j] += 1<<get(k, j);
		}
		change[i][j] -= 1<<get(i, j);//è¡Œåˆ—æ“ä½œåå¤šæ“ä½œäº†ä¸€æ¬¡ï¼Œè¦å‡å»
	}
	vector<PII> res;
	for(int k = 0;k< 1<<16; k++){//æš´åŠ›éå†
		int now = state;//å­˜ä¸€ä¸‹å½“å‰å±€é¢
		vector<PII> path;
		for(int i =0; i<16; i++){//å¦‚æœkçš„æŸä¸€ä½æ˜¯1ï¼Œå°±è¡¨ç¤ºéœ€è¦æ“ä½œ
			if(k >>i & 1){
				//å¯¹ç¼–å·æ˜¯içš„æ ¼å­è¿›è¡Œæ“ä½œ
				int x = i/4, y = i%4;//æ‰¾åˆ°ä»–çš„è¡Œåˆ—ä½ç½®
				now ^= change[x][y];
				path.push_back({x, y});
			}
			if(!now && (res.empty()|| res.size() >path.size())){
			//å…¨0è¯´æ˜åˆæ³• && ï¼ˆåŸå…ˆresä¸ºç©º || æ–°çš„æ–¹æ³•æ­¥éª¤æ›´å°‘ï¼‰
				res = path;
			}
		}
	}
	cout<<res.size()<<endl;
	for(auto p:res)cout<< p.first+1<<" "<<p.second+1<<endl;
}
```

## äºŒåˆ†

### [AcWing789.æ•°çš„èŒƒå›´](https://www.acwing.com/problem/content/791/)|äºŒåˆ†

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int,int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

int n, q, x;
int a[100005];
int main(){
	scanf("%d%d",&n,&q);
	for(int i =0 ;i<n;i++){
		scanf("%d",&a[i]);
	}
	while(q--){
		scanf("%d",&x);
		int l = 0, r = n;
		//æœå·¦è¾¹ç•Œ
		while(l < r){
			int mid = l+r>>1;
			if(a[mid] == x) r = mid;//æ‰¾åˆ°äº†æ”¶ç¼©å³è¾¹ä»¥è¾¾åˆ°æ‰¾åˆ°å·¦è¾¹ç•Œçš„æ•ˆæœ
			else if(a[mid] < x) l = mid + 1;
			else if(a[mid] > x) r = mid;
		}
		if(a[l] != x) {printf("-1 -1\n");continue;}
		int left = l;
		r = n;
		//æœå³è¾¹ç•Œ
		while(l < r){
			int mid = l+r>>1;
			if(a[mid] == x) l = mid+1;//æ”¶ç¼©å·¦è¾¹ä»¥è¾¾åˆ°æ‰¾åˆ°å³è¾¹ç•Œçš„æ•ˆæœ
			else if( a[mid] < x) l = mid + 1;
			else if( a[mid] > x) r = mid;
		}
		printf("%d %d\n",left,l-1);
		//å› ä¸ºl = mid+1; é€€å‡ºæ¥æ—¶låœ¨mid+1ä¸Šï¼Œè€Œéœ€è¦è¿”å›midå³mid-1
	}
}
```

### [AcWing790.æ•°çš„ä¸‰æ¬¡æ–¹æ ¹](https://www.acwing.com/problem/content/792/)|äºŒåˆ†

> ç»™å®šä¸€ä¸ªæµ®ç‚¹æ•° n ï¼Œæ±‚å®ƒçš„ä¸‰æ¬¡æ–¹æ ¹ã€‚
>
> #### è¾“å…¥æ ¼å¼
>
> å…±ä¸€è¡Œï¼ŒåŒ…å«ä¸€ä¸ªæµ®ç‚¹æ•° nã€‚
>
> #### è¾“å‡ºæ ¼å¼
>
> å…±ä¸€è¡Œï¼ŒåŒ…å«ä¸€ä¸ªæµ®ç‚¹æ•°ï¼Œè¡¨ç¤ºé—®é¢˜çš„è§£ã€‚
>
> æ³¨æ„ï¼Œç»“æœä¿ç•™ 6ä½å°æ•°ã€‚
>
> #### æ•°æ®èŒƒå›´
>
> âˆ’10000â‰¤nâ‰¤10000

ç›´æ¥äºŒåˆ†æœç´¢ä¸€ä¸ªmidæ»¡è¶³`mid*mid*mid`æœ€æ¥è¿‘nçš„â€”â€”æœ€æ¥è¿‘å°±æ˜¯è¯¯å·®å°äº`1e-8`

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int,int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

double x;

int main(){
  cin>>x;
  double l = -10000, r = 10000;
  while(r-l > 1e-8){//ç²¾åº¦è¿˜ä¸å¤Ÿçš„è¯
    double mid = (l+r)/2;
    if(mid*mid*mid >= x) r = mid;
    else l = mid;
  }
  printf("%.6lf",l);
}
```

- ä½¿ç”¨cbrtå‡½æ•°ä¹Ÿæ˜¯å¯ä»¥çš„
- æˆ–è€…powâ€”â€”è¦å…ˆå¤„ç†ä¸€ä¸‹è´Ÿæ•°

```cpp
int main(){
    double a;
    scanf("%lf",&a);
    //if(x<0) printf("-") ,x=-x;
    //printf("%.6lf",pow(x,1/3.0));  // powä¸èƒ½å¤„ç†è´Ÿæ•°
    printf("%.6lf",cbrt(a));
    return 0;
}
```

### [AcWing1221.å››å¹³æ–¹å’Œ](https://www.acwing.com/problem/content/1223/)|äºŒåˆ†

> å››å¹³æ–¹å’Œå®šç†ï¼Œåˆç§°ä¸ºæ‹‰æ ¼æœ—æ—¥å®šç†ï¼šæ¯ä¸ªæ­£æ•´æ•°éƒ½å¯ä»¥è¡¨ç¤ºä¸ºè‡³å¤š 4ä¸ªæ­£æ•´æ•°
> çš„å¹³æ–¹å’Œã€‚å¦‚æœæŠŠ 0åŒ…æ‹¬è¿›å»ï¼Œå°±æ­£å¥½å¯ä»¥è¡¨ç¤ºä¸º 4ä¸ªæ•°çš„å¹³æ–¹å’Œã€‚æ¯”å¦‚ï¼š
>     5=0^2+0^2+1^2+2^2
>     7=1^2+1^2+1^2+2^2
> å¯¹äºä¸€ä¸ªç»™å®šçš„æ­£æ•´æ•°ï¼Œå¯èƒ½å­˜åœ¨å¤šç§å¹³æ–¹å’Œçš„è¡¨ç¤ºæ³•ã€‚è¦æ±‚ä½ å¯¹ 4ä¸ªæ•°æ’åºï¼š0â‰¤aâ‰¤bâ‰¤câ‰¤d
> å¹¶å¯¹æ‰€æœ‰çš„å¯èƒ½è¡¨ç¤ºæ³•æŒ‰ a,b,c,dä¸ºè”åˆä¸»é”®å‡åºæ’åˆ—ï¼Œæœ€åè¾“å‡ºç¬¬ä¸€ä¸ªè¡¨ç¤ºæ³•ã€‚

**å››é‡å¾ªç¯ä¼˜åŒ–ä¸ºä¸‰é‡å¾ªç¯**

æ­¤æ—¶æ—¶é—´å¤æ‚åº¦ä¸ºO(N^3)â€”â€”(5\*10^6)^3>>10^8ï¼Œæ•°æ®å¼ºçš„æ—¶å€™å°±è¿‡ä¸äº†äº†ã€‚æ‰€ä»¥å¾ªç¯æœ€å¤šäºŒé‡

```cpp
#include<bits/stdc++.h>
using namespace std;
int main()  
{  
    int n,a,b,c,d;  
    scanf("%d",&n);   
    int sqn = int(sqrt(n));
    for(a=0;a<=sqn;++a)  
    {  
        for(b=a;b<=sqn;++b)  
        {  
            for(c=b;c<=sqn;++c)  
            {  
                d=sqrt(n-a*a-b*b-c*c); //è¿™é‡Œå‡å°‘ä¸€é‡å¾ªç¯ 
                if(n==a*a+b*b+c*c+d*d)  
                {  
                    if(c>d)swap(d,c);
                    printf("%d %d %d %d\n",a,b,c,d);  
                    return 0;  
                }   
            }   
        }   
    }   
}

```

**ä¼˜åŒ–å¾ªç¯ä¸ºäºŒé‡+åˆ©ç”¨äºŒåˆ†**

é¢„å¤„ç†cã€dä¸”å­˜ä¸‹æ¥

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int,int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

const int N = 25e5 + 10;

struct Sum
{
    int s, c, d; // sè¡¨ç¤ºcå’Œdçš„å¹³æ–¹
    bool operator<(const Sum& t) const //è¿”å›è¾ƒå°çš„é‚£ä¸ª
    {
        if(s != t.s) return s < t.s;
        if(c != t.c) return c < t.c;
        return d < t.d;
    }
} sum[N];

int n, m;

int main(void)
{
    scanf("%d", &n);

    for(int c = 0; c * c <= n; c++)
        for(int d = c; c * c + d * d <= n; d++) sum[m++] = {c * c + d * d, c, d};

    sort(sum, sum + m);

    for(int a = 0; a <= n; a++)
        for(int b = 0; b * b + a * a <= n; b++)
        {
            int t = n - a * a - b * b;
            int l = 0, r = m - 1;
            while(l < r)
            {
                int mid = l + r >> 1;
                if(sum[mid].s >= t) //è¦æ‰¾ä¸€ä¸ªæœ€å°çš„ æ‰€ä»¥æ˜¯>=
                    r = mid;
                else
                    l = mid + 1;
            }
            if(sum[l].s == t)
            {
                printf("%d %d %d %d\n", a, b, sum[l].c, sum[l].d);
                return 0;
            }
        }
    return 0;
}

```



**ä¼˜åŒ–å¾ªç¯ä¸ºäºŒé‡ï¼šä¼˜åŒ–æšä¸¾ï¼šå“ˆå¸Œ+æšä¸¾**

> å‡å°‘æšä¸¾æ¬¡æ•°
> ç¡®å®šæšä¸¾èŒƒå›´ï¼š
> a 0â€“sqrt(510^6/4)  : a a a a
> b 0â€“sqrt(510^6/3)  : 0 b b b 
> c 0â€“sqrt(510^6/2)  : 0 0 c c
> d 0â€“sqrt(510^6)	 : 0 0 0 d
>
> é¢„å…ˆæ±‚å‡ºR=c^2+d^2çš„è§£ ç”¨**å“ˆå¸Œè¡¨unordered_map**æ¥ä¿å­˜ä¸€ä¸ªRå¯¹åº”çš„c

åˆ©ç”¨å“ˆå¸Œè¡¨å­˜å‚¨é¢„å¤„ç†çš„cã€dï¼Œåé¢ç›´æ¥æ‹¿æ¥æ“ä½œâ€”â€”å°è£…å¥½çš„unordered_map ä¸­çš„æŸ¥è¯¢å‡½æ•°æ•ˆç‡è‚¯å®šä¸å¿…è‡ªå·±å†™çš„äºŒåˆ†å·®çš„ã€‚

**ä½†è¿™ä¸ªä¼šè¶…æ—¶â€”â€”æˆ‘ä¸ç†è§£ï¼Œè¿™æ—¶é—´å¤æ‚åº¦ä¸æ˜¯O(N^2)å—**

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int,int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

int n;
unordered_map<int, PII> mp;
int main(){
  cin>>n;
  for(int c =0;c*c<=n/2; c++) //cçš„æšä¸¾èŒƒå›´ä¼˜åŒ–
    for(int d = c; d*d+c*c <= n; d++){//d>=cæ‰€ä»¥ç›´æ¥ä»cå¼€å§‹
      int t = c*c + d*d;
      if(mp.count(t) == 0) mp[t] = {c, d};//æ²¡æœ‰å°±å­˜ï¼›æœ‰äº†çš„è¯ï¼Œé¡ºåºä¹Ÿæ’åœ¨åé¢ï¼Œæ²¡å¿…è¦å­˜
    }

  for(int a = 0; a*a <= n/4; a++){//ä¼˜åŒ–æšä¸¾èŒƒå›´
    for(int b = a; a*a+b*b<=n/2; b++){//è¿™é‡ŒåŒæ ·å¯ä»¥ä¼˜åŒ–æšä¸¾èŒƒå›´
      int t = n - a*a-b*b;
      if(mp.count(t)){
        cout<<a<<" "<<b<<" "<<mp[t].first<<" "<<mp[t].second;
        //è¾“å‡ºç¬¬ä¸€ä¸ªå°±å¯ä»¥äº†
        return 0;
      }
    }
  }
}
```

**ä¼˜åŒ–å¾ªç¯+ä¼˜åŒ–æšä¸¾+æ•°ç»„æ‰“è¡¨ä»£æ›¿å“ˆå¸Œè¡¨**

æ„Ÿè§‰ä¸¤ä¸ªåŸç†å·®ä¸å¤šï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆä¸Šé¢é‚£ä¸ªå¤æ‚åº¦ä¼šè¶…ï¼Œæœ‰æ‡‚çš„å—ã€‚

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int,int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)
const int N = 1e8 + 10;
int h[N];
int main() {
    int n;
    cin >> n;
    //æ‰“è¡¨ 
    for (int c = 0; c * c * 2<= n; c++) {    //ä¼˜åŒ–äº†æšä¸¾èŒƒå›´
        for (int d = c; d * d + c * c <= n; d++) {
            if (!h[c * c + d * d])//ä¹‹å‰æ²¡è®°å½•è¿‡
                h[c * c + d * d] = c + 1;//æ ‡è®°ï¼Œé˜²æ­¢i = 0æ—¶åœ¨åé¢åˆ¤æ–­æŸ¥æ‰¾è·³è¿‡ i = 0çš„æƒ…å†µ
        }
    }
      
    for (int a = 0; a * a * 4 <= n; a++) {     //ä¼˜åŒ–äº†æšä¸¾èŒƒå›´
        for (int b = a; b * b + a * a <= n / 2; b++) {
            int t = n - a * a - b * b;
            if (h[t]) {
                int c = h[t] - 1;   //æ¢å¤æ ‡è®°
                //é˜²æ­¢å¼€æ ¹å·åå› ä¸ºç²¾åº¦å…³ç³»,å‘ä¸‹å–æ•´,ä¾‹:25 å¼€æ ¹å·å¾—åˆ°4.99999å‘ä¸‹å–æ•´ä¸º4;
                int d = (sqrt(t - c * c) + 1e-4);
                printf("%d %d %d %d", a, b, c, d);
                return 0;
            }
        }
    }
    return 0;
}

```



---

## å‰ç¼€å’Œ

**ä¸€ç»´å‰ç¼€å’Œ**

![image-20211211210344450](https://gitee.com/okkjoo/image-bed/raw/master/imgs/image-20211211210344450.png)

### [AcWing795.å‰ç¼€å’Œ](https://www.acwing.com/problem/content/797/)

> è¾“å…¥ä¸€ä¸ªé•¿åº¦ä¸ºnçš„æ•´æ•°åºåˆ—ã€‚
>
> æ¥ä¸‹æ¥å†è¾“å…¥mä¸ªè¯¢é—®ï¼Œæ¯ä¸ªè¯¢é—®è¾“å…¥ä¸€å¯¹l, rã€‚
> å¯¹äºæ¯ä¸ªè¯¢é—®ï¼Œè¾“å‡ºåŸåºåˆ—ä¸­ä»ç¬¬lä¸ªæ•°åˆ°ç¬¬rä¸ªæ•°çš„å’Œã€‚
>
> è¾“å…¥æ ¼å¼
> ç¬¬ä¸€è¡ŒåŒ…å«ä¸¤ä¸ªæ•´æ•°nå’Œmã€‚
>
> ç¬¬äºŒè¡ŒåŒ…å«nä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæ•´æ•°æ•°åˆ—ã€‚
>
> æ¥ä¸‹æ¥mè¡Œï¼Œæ¯è¡ŒåŒ…å«ä¸¤ä¸ªæ•´æ•°lå’Œrï¼Œè¡¨ç¤ºä¸€ä¸ªè¯¢é—®çš„åŒºé—´èŒƒå›´ã€‚
>
> è¾“å‡ºæ ¼å¼
> å…±mè¡Œï¼Œæ¯è¡Œè¾“å‡ºä¸€ä¸ªè¯¢é—®çš„ç»“æœã€‚
>
> æ•°æ®èŒƒå›´
> 1â‰¤lâ‰¤râ‰¤n,
> 1â‰¤n,mâ‰¤100000,
> âˆ’1000â‰¤æ•°åˆ—ä¸­å…ƒç´ çš„å€¼â‰¤1000

<img src="https://gitee.com/okkjoo/image-bed/raw/master/imgs/image-20211211211040800.png" alt="image-20211211211040800" style="zoom:80%;" />

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int,int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)\

const int N = 1e5+10;
int a[N], sum[N];
int main(){
  int n, m;
  cin>>n>>m;
  for(int i =1;i<=n;i++){
    cin>>a[i];
    sum[i] = a[i] + sum[i-1];    
  }
  while(m--){
    int l, r;
    cin>>l>>r;
    cout<<sum[r] - sum[l-1]<<endl;
  }
}
```

**äºŒç»´å‰ç¼€å’Œ**

<img src="https://gitee.com/okkjoo/image-bed/raw/master/imgs/image-20211211212444311.png" alt="image-20211211212444311" style="zoom:80%;" />

### AcWing 796.å­çŸ©é˜µçš„å’Œ

> è¾“å…¥ä¸€ä¸ªnè¡Œmåˆ—çš„æ•´æ•°çŸ©é˜µï¼Œå†è¾“å…¥qä¸ªè¯¢é—®ï¼Œæ¯ä¸ªè¯¢é—®åŒ…å«å››ä¸ªæ•´æ•°x1, y1, x2, y2ï¼Œè¡¨ç¤ºä¸€ä¸ªå­çŸ©é˜µçš„å·¦ä¸Šè§’åæ ‡å’Œå³ä¸‹è§’åæ ‡ã€‚
>
> å¯¹äºæ¯ä¸ªè¯¢é—®è¾“å‡ºå­çŸ©é˜µä¸­æ‰€æœ‰æ•°çš„å’Œã€‚
>
> #### è¾“å…¥æ ¼å¼
>
> ç¬¬ä¸€è¡ŒåŒ…å«ä¸‰ä¸ªæ•´æ•°nï¼Œmï¼Œqã€‚
>
> æ¥ä¸‹æ¥nè¡Œï¼Œæ¯è¡ŒåŒ…å«mä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæ•´æ•°çŸ©é˜µã€‚
>
> æ¥ä¸‹æ¥qè¡Œï¼Œæ¯è¡ŒåŒ…å«å››ä¸ªæ•´æ•°x1, y1, x2, y2ï¼Œè¡¨ç¤ºä¸€ç»„è¯¢é—®ã€‚
>
> #### è¾“å‡ºæ ¼å¼
>
> å…±qè¡Œï¼Œæ¯è¡Œè¾“å‡ºä¸€ä¸ªè¯¢é—®çš„ç»“æœã€‚
>
> #### æ•°æ®èŒƒå›´
>
> 1â‰¤n,mâ‰¤1000,
> 1â‰¤qâ‰¤200000,
> 1â‰¤x1â‰¤x2â‰¤n,
> 1â‰¤y1â‰¤y2â‰¤m,
> âˆ’1000â‰¤çŸ©é˜µå†…å…ƒç´ çš„å€¼â‰¤1000



```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int,int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

const int N = 1e3+10;
int a[N][N], s[N][N];
int main(){
  int  n, m , q;
  cin>>n>>m>>q;
  for(int i =1;i<=n;i++)
    for(int j = 1;j<=m;j++)
      cin>>a[i][j];
  
  for(int i = 1; i<= n; i++)
    for(int j = 1;j <=m; j++)
      s[i][j] = s[i-1][j]+s[i][j-1] - s[i-1][j-1]  + a[i][j];//æ³¨æ„å‡å»é‡å å¯¼è‡´çš„å¤šä½™éƒ¨åˆ†

  int x1, y1, x2, y2;
  while(q--){
    cin>>x1>>y1>>x2>>y2;
    int res = s[x2][y2] - s[x1-1][y2] - s[x2][y1-1] + s[x1-1][y1-1];//ç”»ä¸ªå›¾å°±çŸ¥é“äº†
    cout<<res<<endl;
  }
}
```

### [AcWing1230.Kå€åŒºé—´](https://www.acwing.com/problem/content/1232/)|å‰ç¼€å’Œ

1. sum[i]è¡¨ç¤ºç¬¬1ä¸ªå…ƒç´ åˆ°ç¬¬iä¸ªå…ƒç´ 
2. sum[r] - sum[l-1]å°±æ˜¯åŒºé—´[l,r]çš„å’Œ
3. åŒºé—´[l,r]çš„å’Œæ˜¯kçš„å€æ•°å³(sum[r] - sum[l-1])%k == 0
4. **sum[r]%k == sum[l-1]%k**

æ‰€ä»¥åœ¨æ±‚ sum æ—¶å°±è¿›è¡Œå–æ¨¡ï¼Œæœ€åæœ‰**ä¸¤ä¸ª**ç›¸ç­‰çš„**å‰ç¼€å’Œ%k**åŒºé—´å°±å¯ä»¥å½¢æˆä¸€ä¸ª **Kå€åŒºé—´**ã€‚â€”â€”å¦‚å…±æœ‰5ä¸ªå‰ç¼€å’Œ%k==1çš„ï¼Œå¯ä»¥ä»é‡Œé¢é€‰ä»»æ„ä¸¤ä¸ªçš„ç»„åˆæ•°å°±æ˜¯**å‰ç¼€å’Œ%k==1 çš„Kå€åŒºé—´æ•°**ã€‚

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int,int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

const int N = 1e5+10;
ll s[N];//å‰ç¼€å’Œæ•°ç»„
int cnt[N];//cnt[x]ï¼š å‰ç¼€å’Œ%k ä¸ºx çš„ä¸ªæ•°
ll res = 0;//æœ€åçš„ç­”æ¡ˆ

int main(){
  int  n, k;
  cin>>n>>k;
  for(int i = 1; i<=n; i++){
    cin>>s[i];
    s[i] += s[i-1];
  }
  cnt[0]++;//s[0]æ”¾è¿›å»
    //åé¢å†æœ‰s[i]%k==0 çš„æ—¶å€™ï¼Œå‰é¢è¿™ä¸ªs[0]å°±å¯ä»¥è®¤ä¸ºæ˜¯è¯¥åŒºé—´çš„å·¦ç«¯ç‚¹ã€‚
  //è¿™ä¸€æ­¥çš„ç›®çš„æ˜¯å½“[1,i]åŒºé—´ç´¯åŠ æˆçš„æ•°ï¼Œä¹Ÿå°±æ˜¯s[i]æ˜¯kçš„å€æ•°ã€‚é‚£ä¹ˆåŒºé—´[1ï¼Œi]ä¹Ÿæ˜¯ä¸€ä¸ªkå€åŒºé—´ï¼Œä½†æ˜¯éœ€è¦å‰é¢æœ‰ä¸€ä¸ªç‚¹ä½œä¸ºè¿™ä¸ªåŒºé—´çš„å·¦ç«¯ç‚¹ã€‚è€Œæ­¤æ—¶s[i]%kè¿›è¡Œå–ä½™ç­‰äº0ï¼Œæ‰€ä»¥å°†cnt[0]++;
    
  for(int i = 1; i<=n; i++){
    res += cnt[s[i] % k];
    cnt[s[i]%k] ++;
  }
  cout<<res;
}
```

## å·®åˆ†

**ä¸€ç»´å·®åˆ†**

ç»™ä½ ä¸€ä¸²**é•¿åº¦ä¸ºn**çš„æ•°åˆ—a1,a2,a3......anï¼Œè¦æ±‚**å¯¹a[L]~a[R]è¿›è¡Œmæ¬¡æ“ä½œ**ï¼š

æ“ä½œ:å°†a[L]~a[R]å†…çš„å…ƒç´ éƒ½åŠ ä¸Šc
æœ€åå†ç»™å‡ºä¸€ä¸ªè¯¢é—®æ±‚a[L]-a[R]å†…çš„å…ƒç´ ä¹‹å’Œï¼Ÿ

å¯¹äºmæ¬¡æ“ä½œæ¯æ¬¡éƒ½éå†ä¸€éa[L]~a[R],ç»™åŒºé—´é‡Œçš„æ•°éƒ½åŠ ä¸Šcæˆ–å‡å»cï¼Œæœ€åå†æ±‚ä¸€æ¬¡å‰ç¼€å’Œâ€”â€”è¿™æ ·å­ç¡®å®ä¹Ÿèƒ½å¾—å‡ºæ­£ç¡®ç­”æ¡ˆï¼Œä½†æ—¶é—´å¤æ‚åº¦å´**é«˜è¾¾O(M*n)**ï¼Œå¯¹äº1<=n,m<=1e5è¿™ä¸ªæ•°æ®èŒƒå›´æ¥è¯´å°±è¶…æ—¶äº†ã€‚

**å·®åˆ†ï¼š**æˆ‘ä»¬æ–°å¼€ä¸€ä¸ªæ•°ç»„d,`d[i]=a[i]-a[i-1]`ï¼Œ**å‚¨å­˜æ¯ä¸€æ¬¡çš„ä¿®æ”¹æ“ä½œ**ï¼Œ**æœ€å**æ±‚å‰ç¼€å’Œä¸€æ¬¡è®¡ç®—å°±èƒ½è·å¾—æ­£ç¡®ç­”æ¡ˆã€‚**å·®åˆ†å¯ä»¥çœ‹æˆå‰ç¼€å’Œçš„é€†è¿ç®—**

---

```cpp
int a[N];//åŸæ•°ç»„
int d[N];//å·®åˆ†æ•°ç»„
int s[N];//å‰ç¼€å’Œæ•°ç»„
void insert(int l, int r, int c){
  d[l] += c;  //ä¿®æ”¹äº†[l,n-1]
  d[r+1] -= c; //æ’¤é”€[r+1, n-1]çš„ä¿®æ”¹
}
```





---



### [Acwing  797. å·®åˆ†](https://www.acwing.com/problem/content/description/799/)

> è¾“å…¥ä¸€ä¸ªé•¿åº¦ä¸º  n çš„æ•´æ•°åºåˆ—ã€‚
>
> æ¥ä¸‹æ¥è¾“å…¥ m ä¸ªæ“ä½œï¼Œæ¯ä¸ªæ“ä½œåŒ…å«ä¸‰ä¸ªæ•´æ•° l,r,cï¼Œè¡¨ç¤ºå°†åºåˆ—ä¸­ [l,r][l,r] ä¹‹é—´çš„æ¯ä¸ªæ•°åŠ ä¸Š cã€‚
>
> è¯·ä½ è¾“å‡ºè¿›è¡Œå®Œæ‰€æœ‰æ“ä½œåçš„åºåˆ—ã€‚
>
> #### è¾“å…¥æ ¼å¼
>
> ç¬¬ä¸€è¡ŒåŒ…å«ä¸¤ä¸ªæ•´æ•° nn å’Œ mmã€‚
>
> ç¬¬äºŒè¡ŒåŒ…å« nn ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæ•´æ•°åºåˆ—ã€‚
>
> æ¥ä¸‹æ¥ mm è¡Œï¼Œæ¯è¡ŒåŒ…å«ä¸‰ä¸ªæ•´æ•° lï¼Œrï¼Œclï¼Œrï¼Œcï¼Œè¡¨ç¤ºä¸€ä¸ªæ“ä½œã€‚
>
> #### è¾“å‡ºæ ¼å¼
>
> å…±ä¸€è¡Œï¼ŒåŒ…å« nn ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæœ€ç»ˆåºåˆ—ã€‚
>
> #### æ•°æ®èŒƒå›´
>
> 1â‰¤n,mâ‰¤1000001â‰¤n,mâ‰¤100000,
> 1â‰¤lâ‰¤râ‰¤n1â‰¤lâ‰¤râ‰¤n,
> âˆ’1000â‰¤câ‰¤1000âˆ’1000â‰¤câ‰¤1000,
> âˆ’1000â‰¤æ•´æ•°åºåˆ—ä¸­å…ƒç´ çš„å€¼â‰¤1000

```CPP
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int,int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

const int N = 1e5+10;
int a[N], d[N];
int n, m;
void insert(int l, int r, int c){
  d[l] += c;
  d[r+1] -= c;
}

int main(){
  cin>>n>>m;
  for(int i = 1; i<=n;i++){
    cin>>a[i];
    d[i] = a[i]-a[i-1];//æ„å»ºå·®åˆ†æ•°ç»„ï¼Œa[0] = 0
  }
  int  l, r, c;
  while(m--){
    cin>>l>>r>>c;
    insert(l, r, c);
  }
  for(int i = 1;i<=n;i++){
    a[i] = a[i-1] + d[i]; //å‰ç¼€å’Œè¿ç®—
    cout<<a[i]<<" ";
  }
}
```

**äºŒç»´å·®åˆ†**

å’Œä¸€ç»´å‰ç¼€å’Œä¸äºŒç»´å‰ç¼€å’Œçš„å…³ç³»å·®ä¸å¤š

**ç»™ä»¥(x1, y1)ä¸ºå·¦ä¸Šè§’ï¼Œ(x2, y2)ä¸ºå³ä¸‹è§’çš„å­çŸ©é˜µä¸­çš„æ‰€æœ‰å…ƒç´ åŠ ä¸Šcï¼š**

```cpp
void insert(int x1,int y1,int x2,int y2,int c){
    d[x1][y1]+=c;
    d[x1][y2+1]-=c;
    d[x2+1][y1]-=c;
    d[x2+1][y2+1]+=c;
}

//å‰ç¼€å’Œè¿ç®—
    for(int i=1;i<=n;i++)
      for(int j=1;j<=m;j++)
         b[i][j]+=b[i-1][j]+b[i][j-1]-b[i-1][j-1];
```

## æšä¸¾

### [AcWing1210.è¿å·åŒºé—´æ•°](https://www.acwing.com/problem/content/1212/)

> åœ¨ 1âˆ¼N çš„æŸä¸ªæ’åˆ—ä¸­æœ‰å¤šå°‘ä¸ªè¿å·åŒºé—´å‘¢ï¼Ÿ
>
> è¿™é‡Œæ‰€è¯´çš„è¿å·åŒºé—´çš„å®šä¹‰æ˜¯ï¼š
>
> å¦‚æœåŒºé—´ `[L,R][L,R]` é‡Œçš„æ‰€æœ‰å…ƒç´ ï¼ˆå³æ­¤æ’åˆ—çš„ç¬¬ L ä¸ªåˆ°ç¬¬ R ä¸ªå…ƒç´ ï¼‰é€’å¢æ’åºåèƒ½å¾—åˆ°ä¸€ä¸ªé•¿åº¦ä¸º Râˆ’L+1 çš„â€œè¿ç»­â€æ•°åˆ—ï¼Œåˆ™ç§°è¿™ä¸ªåŒºé—´è¿å·åŒºé—´ã€‚
>
> å½“ Nå¾ˆå°çš„æ—¶å€™ï¼Œå°æ˜å¯ä»¥å¾ˆå¿«åœ°ç®—å‡ºç­”æ¡ˆï¼Œä½†æ˜¯å½“ N å˜å¤§çš„æ—¶å€™ï¼Œé—®é¢˜å°±ä¸æ˜¯é‚£ä¹ˆç®€å•äº†ï¼Œç°åœ¨å°æ˜éœ€è¦ä½ çš„å¸®åŠ©ã€‚

å°±æ˜¯ç»™å‡º1~nä½†æ˜¯æ˜¯æœ‰é¡ºåºçš„ï¼Œç„¶ååœ¨é‡Œé¢æˆªå–ä¸€æ®µ`[l,r]`æ‹¿å‡ºæ¥æ’åºåä»å°åˆ°å¤§æ˜¯è¿ç»­çš„ï¼Œåˆ™åˆæ³•ï¼›å¦åˆ™ä¸ã€‚**ç‰¹æ®Šæƒ…å†µï¼šl==ræ—¶ä¹Ÿæ˜¯è¿ç»­çš„**

é‚£ä¹ˆå°±ç”¨ä¸¤å±‚å¾ªç¯ï¼Œiè¡¨ç¤ºå·¦ç«¯ç‚¹ï¼Œjè¡¨ç¤ºå³ç«¯ç‚¹ï¼›å¹¶ä¸”è¦æ±‚è¿ç»­ï¼Œé‚£ä¹ˆå°±æ˜¯åŒºé—´ä¸­æœ€å¤§å€¼-æœ€å°å€¼ç­‰äºåŒºé—´é•¿åº¦ã€‚

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int,int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)
  
int a[100005];
int mn, mx;
int res = 0;
int main(){
  int n;
  cin>>n;
  for(int i = 0;i <n;i++){
    cin>>a[i];
  }
  for(int i = 0; i < n; i++){
    mn = INT_MAX;
    mx = INT_MIN;
    for(int j = i;j <n; j++){
      mx = max(mx, a[j]);
      mn = min(mn, a[j]);
      if((mx - mn) == (j - i)) res++;
    }
  }
  cout<<res;
}
```

### [AcWing1236.é€’å¢ä¸‰å…ƒç»„](https://www.acwing.com/problem/content/1238/)|æšä¸¾|äºŒåˆ†|å‰ç¼€å’Œ|åŒæŒ‡é’ˆ

è¿™é¢˜çš„æ•°æ® 1e5 ï¼Œæ˜¾ç„¶éœ€è¦å¤æ‚åº¦å°äºç­‰äº O(nlogn)çš„

1. æš´åŠ›ï¼šä¸‰ä¸ªæ•°ç»„å¾ªç¯åµŒå¥—ï¼›n^3 âŒ
2. ä¼˜åŒ–æšä¸¾ï¼šAä¸­å¯»æ‰¾å°äºB[i]çš„ä¸ªæ•°acntï¼ŒCä¸­å¯»æ‰¾å¤§äºB[i]çš„ä¸ªæ•°ccnt, acnt\*ccntï¼Œé‚£ä¹ˆå¸¦æœ‰B[i]çš„åˆæ³•é€‰æ‹©æ•°å°±æ˜¯acnt\*cntï¼›n^2 âŒ
3. å†ä¼˜åŒ–æŸ¥æ‰¾ï¼šé¢„å¤„ç†ä¸‰ä¸ªæ•°ç»„,ä½¿å…¶å…·æœ‰é¡ºåº,æ’åºæ—¶é—´å¤æ‚åº¦O(nlogn)ã€‚æšä¸¾Bï¼‹äºŒåˆ†æŸ¥æ‰¾Aã€Cä¸­çš„å…ƒç´ ï¼ŒO(nlogn)ã€‚

å°æŠ€å·§ï¼š

1. æ’åºç›´æ¥ç”¨sortå‡½æ•°
2. äºŒåˆ†æŸ¥æ‰¾ç›´æ¥ç”¨low_boundã€upper_bound(è¿”å›è¿­ä»£å™¨ï¼Œä¸æ•°ç»„çš„ç¬¬ä¸€ä¸ªè¿­ä»£å™¨ç›¸å‡å°±æ˜¯æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªæ•°çš„ä¸‹æ ‡)

> å€ŸåŠ©è¾“å‡ºç»“æœå¯ä»¥çœ‹å‡ºï¼Œupper_bound() å‡½æ•°çš„åŠŸèƒ½å’Œ lower_bound() å‡½æ•°ä¸åŒï¼Œå‰è€…æŸ¥æ‰¾çš„æ˜¯å¤§äºç›®æ ‡å€¼çš„å…ƒç´ ï¼Œè€Œåè€…æŸ¥æ‰¾çš„ä¸å°äºï¼ˆå¤§äºæˆ–è€…ç­‰äºï¼‰ç›®æ ‡å€¼çš„å…ƒç´ ã€‚

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int,int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

const int N =1e5+10;
int a[N], b[N], c[N];
int main(){
  int n;scanf("%d",&n);
  FOR(i,0,n) scanf("%d",&a[i]);
  FOR(i,0,n) scanf("%d",&b[i]);
  FOR(i,0,n) scanf("%d",&c[i]);
  
  //æ’åºé¢„å¤„ç†
  sort(a,a+n);
  sort(b,b+n);
  sort(c,c+n);

  ll ans = 0;

  //æšä¸¾B
  for(int i = 0 ; i < n; i++){
    int bkey = b[i];
    //æ‰¾Aä¸­ç¬¬ä¸€ä¸ªä¸å°äºkeyçš„æ•°çš„ä¸‹æ ‡
    int pa = lower_bound(a, a + n, bkey) -  a;
    //æ‰¾Cä¸­ç¬¬ä¸€ä¸ªå¤§äºkeyçš„æ•°çš„ä¸‹æ ‡
    int pc= upper_bound(c, c + n, bkey) - c;
    if(pa >= 0 && pc < n){
      ans += (ll)(pa)*(n-pc);
    } 
  }
  printf("%lld",ans);
}
```

**åŒæŒ‡é’ˆ**

è¿›ä¸€æ­¥å¯¹æŸ¥æ‰¾è¿›è¡Œä¼˜åŒ–ï¼Œå¯¹äº**æ’è¿‡åºçš„æ•°ç»„Aå’ŒBï¼Œå¯»æ‰¾Aä¸­å°äºB[i]çš„å…ƒç´ çš„ä¸ªæ•°**å¯ä»¥è€ƒè™‘åŒæŒ‡é’ˆç®—æ³•ï¼Œå› ä¸ºæ¯ä¸ªæŒ‡é’ˆæœ€å¤šç§»åŠ¨næ¬¡ï¼Œæ•…æŸ¥æ‰¾çš„æ—¶é—´å¤æ‚åº¦é™åˆ°O(n)ï¼ŒæŸ¥æ‰¾Cä¸æŸ¥æ‰¾AåŒç†ï¼Œåªæ˜¯æ‰¾ç¬¬ä¸€ä¸ªå¤§äºBçš„ä½ç½®ã€‚

å°†å…¶ä¸­çš„äºŒåˆ†éƒ¨åˆ†ç›´æ¥æ”¹æˆç”¨æŒ‡é’ˆä»ä¸‹æ ‡ä¸º0çš„åœ°æ–¹å¼€å§‹æ¯”ã€‚ä½†æ­¤æ—¶å› ä¸ºæ’åºçš„æ—¶é—´å¤æ‚åº¦è¿˜æ˜¯ä¸ºO(nlogn)ï¼Œæ‰€ä»¥æ€»çš„æ—¶é—´å¤æ‚åº¦è¿˜æ˜¯O(nlogn).

**å‰ç¼€å’Œ**

æ’åºçš„æ—¶é—´å¤æ‚åº¦æ˜¯ä¸€ä¸ªç“¶é¢ˆï¼Œé‚£ä¹ˆå°±æ€è€ƒæ€ä¹ˆä¸æ’åºå®Œæˆç›®æ ‡ã€‚

ä¸æ’åºå¿«é€Ÿæ‰¾åˆ°Aä¸­å°äºB[i]çš„ä¸ªæ•°ï¼šå°†Aä¸­æ‰€æœ‰æ•°å‡ºç°çš„ä¸ªæ•°å­˜å‚¨åœ¨ä¸€ä¸ªå’Œå“ˆå¸Œè¡¨ä¸­ï¼Œå› ä¸ºæ•°æ®è¾ƒå°æ‰€ä»¥å¯ä»¥ç›´æ¥å¼€ä¸€ä¸ªcntaæ•°ç»„ä½œä¸ºå“ˆå¸Œè¡¨ï¼šcnt[i]è¡¨ç¤ºAä¸­içš„ä¸ªæ•°ã€‚æšä¸¾Bæ—¶ç›´æ¥**æ‰¾å°äºB[i]çš„æ‰€æœ‰å…ƒç´ çš„æ€»å’Œ**ï¼ˆæ‰¾æ€»å’Œè¿™ä¸€æ­¥å¯ä»¥**å€ŸåŠ©å‰ç¼€å’Œ**ï¼‰å³å¯ï¼›æ‰¾Cä¸­å¤§äºB[i]çš„ä¸ªæ•°ä¹ŸåŒç†ã€‚

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int,int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

const int N =1e5+10;
 

int A[N], B[N], C[N];
int cnta[N], cntc[N], sa[N], sc[N];
int main(){
  int n;scanf("%d", &n);
  //æ¯ä¸€é¡¹éƒ½è¦+1ï¼Œç›¸å¯¹å¤§å°ä¸å˜ã€‚é˜²æ­¢*å¤„åé¢è¶Šç•Œ
  //æ•°iåœ¨Aä¸­æœ‰cnta[i]ä¸ª
  FOR(i,1,n+1){
    scanf("%d", &A[i]);
    cnta[++A[i]]++;
  }
  FOR(i,1,n+1){
    scanf("%d", &B[i]);
    ++B[i];
  }
  FOR(i,1,n+1){
    scanf("%d", &C[i]);
    cntc[++C[i]]++;
  }
  //å¯¹cntaã€cntcæ±‚å‰ç¼€å’Œ
  sa[0] = cnta[0], 
  sc[0] = cntc[0];
  FOR(i, 1, N+1){ sa[i] = sa[i-1] + cnta[i];}
  FOR(i, 1, N+1){ sc[i] = sc[i-1] + cntc[i];}
  //éå†B
  ll ans = 0;
  FOR(i, 1, n+1){
    int b = B[i];
    //sa[b-1]ï¼š Aä¸­å°äºç­‰äºb-1çš„ä¸ªæ•°å³å°äºbçš„ä¸ªæ•°ï¼›   sc[N-1] - sc[b]ï¼šCä¸­å¤§äºbçš„ä¸ªæ•°
    ans += (ll)sa[b-1]*(sc[N-1] - sc[b]); //*    sa[b-1]å¦‚æœBä¸­æœ‰ä¸ªæ•°æ˜¯0ï¼Œå‰é¢ä¸é¢„å¤„ç† åŠ ä¸€ å°±ä¼šæŠ¥é”™äº†
    //è¿˜æœ‰è¦æ³¨æ„çš„æ˜¯ï¼Œè¦å…ˆè½¬æ¢ç¬¬ä¸€ä¸ªæ•°ä¸ºlonglongï¼Œç›¸ä¹˜å®Œå†è½¬æ¢æœ‰ä¸€ä¸ªæ ·ä¾‹è¿‡ä¸å»
  }
  printf("%lld",ans);
}
```

## æ¨¡æ‹Ÿ

### [AcWing1245.ç‰¹åˆ«æ•°çš„å’Œ](https://www.acwing.com/problem/content/1247/)|æ¨¡æ‹Ÿ

