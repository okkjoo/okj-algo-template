> 
>
> å‡†å¤‡ä¸‰å››æœˆä»½è“æ¡¥æ¯çš„ç¬”è®°

# è¯´åœ¨å‰é¢çš„å¥—è·¯

æ—¶é—´é™åˆ¶ï¼šC++ è¯„æµ‹æœºä¸€ç§’çº¦è¿è¡Œä¸€äº¿æ¬¡ã€‚è‹¥ç®—æ³•çš„çš„æ—¶é—´å¤æ‚åº¦è¶…è¿‡10^8,åˆ™å¯èƒ½ä¼šè¶…æ—¶

- **ç”±æ•°æ®èŒƒå›´åæ¨ç®—æ³•å¤æ‚åº¦ä»¥åŠç®—æ³•å†…å®¹**

![ ](https://gitee.com/okkjoo/image-bed/raw/master/imgs/image-20211210112521113.png)

- è‹¥è¾“å…¥è¾“å‡º èŒƒå›´ å°äº 105 æ¨èç”¨ `cin / cout` å¦åˆ™ç”¨ `scanf / printf` è¾“å…¥æ—¶é—´ä¼šå¿«ä¸€å€å·¦å³

**å„æ•°æ®ç±»å‹å–å€¼èŒƒå›´ä¸10çš„æ•°é‡çº§å¯¹ç…§**

>   ç±»å‹åç§°                                                     å–å€¼èŒƒå›´
>     int                                                         		-2^31~ï¼ˆ2^31-1ï¼‰
> unsigned int       										      0~ï¼ˆ2^32-1ï¼‰
> 2^31=2,147,483,648 				 10^9æ•°é‡çº§
> 2^32=4,294,967,296  				10^9æ•°é‡çº§
>
>   ç±»å‹åç§°                                                        å–å€¼èŒƒå›´
>   long long (_int64)                                     -2\^63~(2\^63-1ï¼‰
>
> unsigned long long (unsigned_int64)     0~(2^64-1)
> 2^63=9,223,372,036,854,775,808      10^18æ•°é‡çº§
> 2^64=18,446,744,073,709,551,616  	 10^19æ•°é‡çº§

# é¢˜ç›®

## EASY

### [è“æ¡¥æ¯| Hello Word!](https://www.dotcpp.com/oj/problem1083.html)

```c++
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int, int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

int x;

int main() {
  while (~(scanf("%d", &x))) {
    printf("%c", x);
  }
}
```

### [ç”¨ç­›æ³•æ±‚ä¹‹Nå†…çš„ç´ æ•°](https://www.dotcpp.com/oj/problem1084.html)

>  ç”¨ç­›æ³•æ±‚ç´ æ•°çš„åŸºæœ¬æ€æƒ³æ˜¯ï¼šæŠŠä»1å¼€å§‹çš„ã€æŸä¸€èŒƒå›´å†…çš„æ­£æ•´æ•°ä»å°åˆ°å¤§é¡ºåºæ’åˆ—ï¼Œ 1ä¸æ˜¯ç´ æ•°ï¼Œé¦–å…ˆæŠŠå®ƒç­›æ‰ã€‚å‰©ä¸‹çš„æ•°ä¸­é€‰æ‹©æœ€å°çš„æ•°æ˜¯ç´ æ•°ï¼Œç„¶åå»æ‰å®ƒçš„å€æ•°ã€‚

```c++
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int, int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

const int N = 100000;
int n;

bool f[N];
int main() {
  int i, j;
  memset(f, 1, sizeof(f));
  scanf("%d", &n);
  // ç­›é€‰
  for (i = 2; i * i <= n; i++)
    if (f[i] == true)
      for (j = i; i * j <= n; j++) f[i * j] = false;

  // è¾“å‡ºç´ æ•°
  for (i = 2; i <= n; i++)
    if (f[i] == true) printf("%d\n", i);
  return 0;
}
```

### [å­—ç¬¦é€†åº](https://www.dotcpp.com/oj/problem1093.html)

` reverse(s.begin(), s.end());`

```c++
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int, int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

string s;
int main() {
  getline(cin, s);
  reverse(s.begin(), s.end());
  cout << s;
  return 0;
}
```

### [**å­—ç¬¦ä¸²çš„è¾“å…¥è¾“å‡ºå¤„ç†**](https://www.dotcpp.com/oj/problem1094.html)

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int, int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

string s[105], x;
int main() {
  int n = 0;
  int idx = 0;
  cin >> n;
  getline(cin, s[0]);
  for (int i = 0; i < n; i++) {
    getline(cin, s[i]);
    idx = i + 1;
  }
  while (cin >> x) {
    s[idx] = x;
    idx++;
  }
  for (int i = 0; i < idx - 1; i++) {
    cout << s[i] << "\n" << endl;
  }
  cout << s[idx - 1];
}
```

### [Minesweeper](https://www.dotcpp.com/oj/problem1096.html)

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int, int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

const int N = 101;
char mp[N][N];
int visc[N][N];
int n, m;

void check(int dx, int dy) {
  if (dx - 1 >= 0) visc[dx - 1][dy]++;
  if (dx + 1 < n) visc[dx + 1][dy]++;
  if (dy + 1 >= 0) visc[dx][dy + 1]++;
  if (dy - 1 < m) visc[dx][dy - 1]++;
  if (dx - 1 >= 0 && dy + 1 < m) visc[dx - 1][dy + 1]++;
  if (dx + 1 < n && dy - 1 >= 0) visc[dx + 1][dy - 1]++;
  if (dx + 1 < n && dy + 1 < m) visc[dx + 1][dy + 1]++;
  if (dx - 1 >= 0 && dy - 1 >= 0) visc[dx - 1][dy - 1]++;
}
int main() {
  int num = 1;
  while (cin >> n >> m, n) {
    memset(mp, 0, sizeof mp);
    memset(visc, 0, sizeof visc);
    int k = 0;
    FOR(i, 0, n) {
      FOR(j, 0, m) {
        cin >> mp[i][j];
        if (mp[i][j] == '*') check(i, j);
      }
    }
    printf("Field #%d:\n", num);
    FOR(i, 0, n) {
      FOR(j, 0, m) {
        if (mp[i][j] == '*') {
          cout << "*";
        } else {
          cout << visc[i][j];
        }
      }
      cout << endl;
    }
    cout << endl;
    num++;
  }
}
```

### [è›‡è¡ŒçŸ©é˜µ](https://www.dotcpp.com/oj/problem1097.html)

ä¸»è¦æ˜¯ for å¾ªç¯ä¸­å¯¹è¡Œæ•°å’Œåˆ—æ•°çš„æŠŠæ§

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int, int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

int main() {
  int x, cnt = 1, mat[100][100];
  for (int j = 0; j < 100; j++) {
    for (int k = 0; k <= j; k++) {
      mat[j - k][k] = cnt++;  // è¡Œæ•°å¾€ä¸Šèµ°ï¼Œåˆ—æ•°å¾€å³èµ°
    }
  }
  while (cin >> x) {
    for (int j = 0; j < x; j++) {
      for (int k = 0; k + j < x; k++) {
        cout << mat[j][k] << ' ';
      }
      cout << endl;
    }
  }
  return 0;
}
```

### ç¿»ç¡¬å¸|é€’æ¨|è´ªå¿ƒ

ä»çŠ¶æ€1 å˜ä¸º çŠ¶æ€2ï¼Œå¹¶ä¸”æ¯æ¬¡éƒ½åªèƒ½ç¿»ä¸¤ä¸ªç›¸é‚»çš„ç¡¬å¸ï¼Œåˆ™ä¸¤ä¸ªçŠ¶æ€ä¹‹é—´å¿…ç„¶å­˜åœ¨å¶æ•°ä¸ªä¸åŒçŠ¶æ€çš„ç¡¬å¸ã€‚

è´ªå¿ƒï¼šä»æœ€å·¦ä¾§å¼€å§‹éå†ï¼Œå¦‚æœè¯¥ä½ç½®ç¡¬å¸çŠ¶æ€ä¸ç›®æ ‡ä¸åŒï¼Œå°±ç¿»åŠ¨è¯¥ä½ç½®å’Œè¯¥ä½ç½®åé¢çš„ä¸¤æšç¡¬å¸ã€‚
å› ä¸ºé¢˜ç›®**è¯´äº†æœ‰è§£**ï¼Œæ‰€ä»¥éå†åˆ°å€’æ•°ç¬¬äºŒæšçš„æ—¶å€™ï¼Œæ‰€æœ‰ç¡¬å¸çŠ¶æ€å°±ä¸ç›®æ ‡ç›¸åŒäº†ï¼ˆæ‰€ä»¥æ˜¯éå†åˆ° sz-1ï¼‰

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int, int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

string s1, s2;
int cnt = 0;
int main() {
  cin >> s1 >> s2;
  int sz = s1.size();
  FOR(i, 0, sz - 1) {
    if (s1[i] != s2[i]) {  // ä¸ä¸€æ ·å°±åè½¬
      cnt++;
      if (s1[i] == '*')
        s1[i] = 'o';
      else
        s1[i] = '*';
      if (s1[i + 1] == '*')
        s1[i + 1] = 'o';
      else
        s1[i + 1] = '*';
    }
  }
  cout << cnt;
}
```





## é€’å½’

### [å¸¦åˆ†æ•°|é€’å½’|æœç´¢|å‰ªæ](https://www.acwing.com/problem/content/1211/)

å°±æ˜¯ç»™ä¸€ä¸ª nï¼Œé—®æœ‰å¤šå°‘ç»„ abc æ»¡è¶³ a + b/c = nï¼Œä¸”aã€bã€cä¸­æ¶µç›– 1~9 ä¹ä¸ªæ•°å­—ï¼Œä¸é‡å¤ä¸é—æ¼ã€‚

- æš´åŠ›æšä¸¾å‡º 1~9 ä¹ä¸ªæ•°å­—çš„å…¨æ’åˆ—ï¼Œç„¶åç”¨ä¸€ä¸ªé•¿åº¦ä¸º9çš„æ•°ç»„ä¿å­˜å…¨æ’åˆ—çš„ç»“æœ
- ä»å…¨æ’åˆ—çš„ç»“æœä¸­ç”¨ä¸¤é‡å¾ªç¯æš´åŠ›åˆ†è§£å‡ºä¸‰æ®µï¼Œåˆ†åˆ«ä»£è¡¨ a b c
- éªŒè¯æšä¸¾å‡ºæ¥çš„ä¸‰ä¸ªæ•°æ˜¯å¦æ»¡è¶³é¢˜å¹²æ¡ä»¶ï¼Œè‹¥æ»¡è¶³åˆ™è®¡æ•°

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int, int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

const int N = 10;
int target;    //ç›®æ ‡æ•°n
int num[N];    //å…¨æ’åˆ—çš„ç»“æœ
bool used[N];  //ç”Ÿæˆå…¨æ’åˆ—è¿‡ç¨‹ä¸­æ ‡è®°æ˜¯å¦ä½¿ç”¨è¿‡
int cnt = 0;   //è®°æœ€åçš„ç»„åˆæ•°

//è®¡ç®— num æ•°ç»„ä¸­ä¸€æ®µçš„æ•°æ˜¯å¤šå°‘
int calc(int l, int r) {  //[l,r]
  int res = 0;
  FOR(i, l, r + 1) { res = res * 10 + num[i]; }
  return res;
}

//ç”¨dfsç”Ÿæˆå…¨æ’åˆ—ï¼Œåˆ°ä½åè¿›è¡Œåˆ†æ®µ
void dfs(int u) {  // uä¸ºå·²ç»æ”¾è¿›äº†å¤šå°‘ä¸ªæ•°å­—
  //ç”¨ä¸¤å±‚å¾ªç¯åˆ†ä¸ºä¸‰æ®µ
  if (u == 9) {
    FOR(i, 0, 7) {  //è‡³å°‘ç•™ä¸¤ä½æ•°ç»™åé¢ä¸¤ç«¯ æ‰€ä»¥ç•™ä¸‹ ç¬¬7ã€8ä½
      FOR(j, i + 1, 8) {  //åŒç†ç•™ä¸‹ç¬¬8ä½
        int a = calc(0, i);
        int b = calc(i + 1, j);
        int c = calc(j + 1, 8);
        //åˆ¤æ–­æ˜¯å¦æ»¡è¶³
        if (a * c + b == c * target) cnt++;
      }
    }
    return;
  }
  //æœç´¢
  FOR(i, 1, 10) {    // 1~9
    if (!used[i]) {  //æ²¡ç”¨è¿‡å°±ç”¨
      used[i] = 1;   //æ ‡è®°ä½¿ç”¨
      num[u] = i;    //æ”¾è¿›å»
      dfs(u + 1);
      used[i] = 0;  //å›æº¯
    }
  }
}
int main() {
  cin >> target;
  dfs(0);
  cout << cnt;
  return 0;
}
```

ç„¶åè¿˜æœ‰ä¸€ä¸ª`next_permutation()`å¯ä»¥ç›´æ¥è°ƒç”¨ä»£æ›¿æ‰‹å†™dfsæ¥æšä¸¾å…¨æ’åˆ—

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int, int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

const int N = 10;
int target;  //ç›®æ ‡æ•°n
int num[N];  //å…¨æ’åˆ—çš„ç»“æœ
int cnt;

//è®¡ç®— num æ•°ç»„ä¸­ä¸€æ®µçš„æ•°æ˜¯å¤šå°‘
int calc(int l, int r) {  //[l,r]
  int res = 0;
  FOR(i, l, r + 1) { res = res * 10 + num[i]; }
  return res;
}

int main() {
  cin >> target;
  FOR(i, 0, 9) num[i] = i + 1;  // 1~9
  do {
    FOR(i, 0, 7) {
      FOR(j, i + 1, 8) {
        int a = calc(0, i);
        int b = calc(i + 1, j);
        int c = calc(j + 1, 8);
        if (a * c + b == c * target) cnt++;
      }
    }
  } while (next_permutation(num, num + 9));
  cout << cnt;
  return 0;
}
```



### [è“æ¡¥æ¯| æ¯ç‰›çš„æ•…äº‹](https://www.dotcpp.com/oj/problem1004.html)

> f(1)ï¼1 f(2)=2 f(3)=3 f(4)=4 f(5)=6å½“ç¬¬nå¹´çš„æ—¶å€™ï¼Œæ‰€æœ‰çš„ç‰›åº”è¯¥æœ‰ã€€ç¬¬n-1å¹´çš„ç‰›+ç¬¬n-3å¹´çš„å¹´ï¼ˆéƒ½èƒ½ç”Ÿï¼‰ï¼Œæ¨å‡ºf(n)=f(n-1)+f(n-3)

```c++
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int, int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

ll f[100];  // f[n] = f[n-1] + f[n-3]
int x;

int main() {
  f[1] = 1, f[2] = 2, f[3] = 3, f[4] = 4, f[5] = 6;
  FOR(i, 5, 56) { f[i] = f[i - 1] + f[i - 3]; }
  while (cin >> x, x) {
    cout << f[x] << endl;
  }
  return 0;
}
```



## å¼‚æˆ–çš„å¦™ç”¨

### [116. é£è¡Œå‘˜å…„å¼Ÿ|DFS|ä½è¿ç®—|æš´åŠ›æšä¸¾](https://www.acwing.com/problem/content/118/)

- çŸ©é˜µ
- å˜ä¸€ä¸ªä½ç½®å°±æ˜¯å˜ä¸€ä¸ªåå­—
- å…ˆçº§æ•´ä½“ä»ä¸Šåˆ°ä¸‹ï¼ŒåŒè¡Œä»å·¦åˆ°å³æ‰“å¼€â€”â€”å…ˆçœ‹ç¬¬ä¸€è¡Œ...

=>

- æš´åŠ›æšä¸¾â€”â€”ä½è¿ç®— ï¼ˆè¿™ä¸ªçœ‹èµ·æ¥æ›´èªæ˜ç‚¹ğŸ¶ï¼‰
  - ä¹Ÿå¯ä»¥DFS+ç›´æ¥æ“ä½œå­—ç¬¦æ•°ç»„

- ç”¨ä¸€ä¸ªåå…­ä½çš„äºŒè¿›åˆ¶æ•°æ¨¡æ‹Ÿæ£‹ç›˜çŠ¶æ€ï¼š0~2^16-1
  - è§£é¢˜æ€è·¯ï¼šè¿™é“é¢˜ç›®è§£é¢˜æ€è·¯å¤§è‡´æ˜¯ï¼Œé¦–å…ˆæˆ‘ä»¬å¯ä»¥æ„é€ ä¸€ä¸ª16ä½çš„äºŒè¿›åˆ¶æ•°ï¼Œç„¶åå‘¢ï¼ŒäºŒè¿›åˆ¶æ•°çš„æ¯ä¸€ä½ä»£è¡¨4*4çŸ©é˜µä¸­çš„ä¸€ä½ï¼Œä¾‹å¦‚1ä»£è¡¨(1,1),2ä»£è¡¨(1,2),3ä»£è¡¨(1,3),4ä»£è¡¨(1,4),5ä»£è¡¨(2,1)ã€‚æ—¢ç„¶è¿™æ ·çš„è¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦æšä¸¾è¿™ä¸ª16ä½çš„äºŒè¿›åˆ¶æ•°ï¼Œå°±å¯ä»¥ç¡®å®šæˆ‘ä»¬çš„æ–¹æ¡ˆï¼Œå› ä¸ºé¢˜ç›®åªéœ€è¦æœ€ä¼˜è§£æ–¹æ¡ˆï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦å¤§çº¦æ˜¯O(16 * 2^16)
- get è·å¾—ä½æ•°
- change é€šè¿‡**å¼‚æˆ–**æ“ä½œè¿›è¡Œåè½¬å¼€å…³æ“ä½œ
  - 01äº’ç›¸åè½¬ == ä¸1å¼‚æˆ–

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int,int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

/*  DFS+ç›´æ¥æ“ä½œå­—ç¬¦æ•°ç»„
typedef pair<int,int> PII;
PII ans[20],cur[20];
char c[6][6];
int sum;
void turn(int x,int y)
{       for(int i=0;i<4;i++)
        {
            if(c[i][y]=='+') c[i][y]='-';
            else  c[i][y]='+';
        }
        for(int i=0;i<4;i++)
        {
            if(c[x][i]=='+') c[x][i]='-';
            else  c[x][i]='+';
        }
         if(c[x][y]=='+') c[x][y]='-';
            else  c[x][y]='+';
}
bool check(char c[][6])
{   for(int i=0;i<4;i++)
    for(int j=0;j<4;j++)
        if(c[i][j]=='+')
           return false; 

     return true; 

}
void dfs(int x,int y,int res){
        if(x==4)
        {
            if(check(c)&&res<sum)
            {   
            	memcpy(ans,cur,sizeof(ans));
                sum=res;
            }
            return;
        }
        int dx=x,dy=y+1;
        if(dy==4){
            dx++,dy=0;
        }
        turn(x,y);
        cur[res+1]={x,y};
        dfs(dx,dy,res+1);
        turn(x,y);
        dfs(dx,dy,res);


}
int main()
{   for(int i=0;i<4;i++)  cin>>c[i];
    sum=0x3f3f3f3f;
    dfs(0,0,0);
    cout<<sum<<endl;
    for(int i=1;i<=sum;i++)
    {
        cout<<ans[i].first+1<<" "<<ans[i].second+1<<endl;
    }


    return 0;
}
 */


int change[4][4];
int get(int x, int y){//è·å–ä½æ•°
	return x*4 + y;
}
int main(){
	int state = 0;//èµ·å§‹æ£‹ç›˜çŠ¶æ€
	for(int i =0 ; i<4; i++){
		string line;
		cin>>line;
		for(int j = 0;j<4;j++){
			if(line[j] == '+')
				state += 1 << get(i,j);			
		}
	} 

	//é¢„å¤„ç†
	for(int i = 0; i < 4; i++)
	for(int j =0; j < 4; j++){
		for(int k=0; k < 4; k++){
			change[i][j] += 1<<get(i, k);
			change[i][j] += 1<<get(k, j);
		}
		change[i][j] -= 1<<get(i, j);//è¡Œåˆ—æ“ä½œåå¤šæ“ä½œäº†ä¸€æ¬¡ï¼Œè¦å‡å»
	}
	vector<PII> res;
	for(int k = 0;k< 1<<16; k++){//æš´åŠ›éå† 0~10^16ï¼Œå³å…¨éƒ¨çš„åè½¬æ–¹æ³•ï¼ˆä¸ä¸€å®šæ˜¯èƒ½æ‰“å¼€å†°ç®±çš„ï¼‰
		int now = state;//å­˜ä¸€ä¸‹å½“å‰å±€é¢
		vector<PII> path;//æ³¨æ„pathå®šä¹‰åœ¨è¿™é‡Œä¹Ÿå°±å…·æœ‰äº†é‡ç½®pathçš„æ–¹æ³•
		for(int i =0; i<16; i++){//å¦‚æœkçš„æŸä¸€ä½æ˜¯1ï¼Œå°±è¡¨ç¤ºéœ€è¦æ“ä½œ
			if((k >>i)& 1){
				//å¯¹ç¼–å·æ˜¯içš„æ ¼å­è¿›è¡Œæ“ä½œ
				int x = i/4, y = i%4;//æ‰¾åˆ°ä»–çš„è¡Œåˆ—ä½ç½®
				now ^= change[x][y];
				path.push_back({x, y});
			}
			if(!now && (res.empty()|| res.size() >path.size())){
			//å…¨0è¯´æ˜åˆæ³• && ï¼ˆåŸå…ˆresä¸ºç©º || æ–°çš„æ–¹æ³•æ­¥éª¤æ›´å°‘ï¼‰
				res = path;
			}
		}
	}
	cout<<res.size()<<endl;
	for(auto p:res)cout<< p.first+1<<" "<<p.second+1<<endl;
}
```

## äºŒåˆ†

### [AcWing789.æ•°çš„èŒƒå›´](https://www.acwing.com/problem/content/791/)|äºŒåˆ†

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int,int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

int n, q, x;
int a[100005];
int main(){
	scanf("%d%d",&n,&q);
	for(int i =0 ;i<n;i++){
		scanf("%d",&a[i]);
	}
	while(q--){
		scanf("%d",&x);
		int l = 0, r = n;
		//æœå·¦è¾¹ç•Œ
		while(l < r){
			int mid = l+r>>1;
			if(a[mid] == x) r = mid;//æ‰¾åˆ°äº†æ”¶ç¼©å³è¾¹ä»¥è¾¾åˆ°æ‰¾åˆ°å·¦è¾¹ç•Œçš„æ•ˆæœ
			else if(a[mid] < x) l = mid + 1;
			else if(a[mid] > x) r = mid;
		}
		if(a[l] != x) {printf("-1 -1\n");continue;}
		int left = l;
		r = n;
		//æœå³è¾¹ç•Œ
		while(l < r){
			int mid = l+r>>1;
			if(a[mid] == x) l = mid+1;//æ”¶ç¼©å·¦è¾¹ä»¥è¾¾åˆ°æ‰¾åˆ°å³è¾¹ç•Œçš„æ•ˆæœ
			else if( a[mid] < x) l = mid + 1;
			else if( a[mid] > x) r = mid;
		}
		printf("%d %d\n",left,l-1);
		//å› ä¸ºl = mid+1; é€€å‡ºæ¥æ—¶låœ¨mid+1ä¸Šï¼Œè€Œéœ€è¦è¿”å›midå³mid-1
	}
}
```

### [AcWing790.æ•°çš„ä¸‰æ¬¡æ–¹æ ¹](https://www.acwing.com/problem/content/792/)|äºŒåˆ†

> ç»™å®šä¸€ä¸ªæµ®ç‚¹æ•° n ï¼Œæ±‚å®ƒçš„ä¸‰æ¬¡æ–¹æ ¹ã€‚
>
> #### è¾“å…¥æ ¼å¼
>
> å…±ä¸€è¡Œï¼ŒåŒ…å«ä¸€ä¸ªæµ®ç‚¹æ•° nã€‚
>
> #### è¾“å‡ºæ ¼å¼
>
> å…±ä¸€è¡Œï¼ŒåŒ…å«ä¸€ä¸ªæµ®ç‚¹æ•°ï¼Œè¡¨ç¤ºé—®é¢˜çš„è§£ã€‚
>
> æ³¨æ„ï¼Œç»“æœä¿ç•™ 6ä½å°æ•°ã€‚
>
> #### æ•°æ®èŒƒå›´
>
> âˆ’10000â‰¤nâ‰¤10000

ç›´æ¥äºŒåˆ†æœç´¢ä¸€ä¸ªmidæ»¡è¶³`mid*mid*mid`æœ€æ¥è¿‘nçš„â€”â€”æœ€æ¥è¿‘å°±æ˜¯è¯¯å·®å°äº`1e-8`

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int,int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

double x;

int main(){
  cin>>x;
  double l = -10000, r = 10000;
  while(r-l > 1e-8){//ç²¾åº¦è¿˜ä¸å¤Ÿçš„è¯
    double mid = (l+r)/2;
    if(mid*mid*mid >= x) r = mid;
    else l = mid;
  }
  printf("%.6lf",l);
}
```

- ä½¿ç”¨cbrtå‡½æ•°ä¹Ÿæ˜¯å¯ä»¥çš„
- æˆ–è€…powâ€”â€”è¦å…ˆå¤„ç†ä¸€ä¸‹è´Ÿæ•°

```cpp
int main(){
    double a;
    scanf("%lf",&a);
    //if(x<0) printf("-") ,x=-x;
    //printf("%.6lf",pow(x,1/3.0));  // powä¸èƒ½å¤„ç†è´Ÿæ•°
    printf("%.6lf",cbrt(a));
    return 0;
}
```

### [AcWing1221.å››å¹³æ–¹å’Œ](https://www.acwing.com/problem/content/1223/)|äºŒåˆ†

> å››å¹³æ–¹å’Œå®šç†ï¼Œåˆç§°ä¸ºæ‹‰æ ¼æœ—æ—¥å®šç†ï¼šæ¯ä¸ªæ­£æ•´æ•°éƒ½å¯ä»¥è¡¨ç¤ºä¸ºè‡³å¤š 4ä¸ªæ­£æ•´æ•°
> çš„å¹³æ–¹å’Œã€‚å¦‚æœæŠŠ 0åŒ…æ‹¬è¿›å»ï¼Œå°±æ­£å¥½å¯ä»¥è¡¨ç¤ºä¸º 4ä¸ªæ•°çš„å¹³æ–¹å’Œã€‚æ¯”å¦‚ï¼š
>     5=0^2^+0^2^+1^2^+2^2^
>     7=1^2^+1^2^+1^2^+2^2^
> å¯¹äºä¸€ä¸ªç»™å®šçš„æ­£æ•´æ•°ï¼Œå¯èƒ½å­˜åœ¨å¤šç§å¹³æ–¹å’Œçš„è¡¨ç¤ºæ³•ã€‚è¦æ±‚ä½ å¯¹ 4ä¸ªæ•°æ’åºï¼š0â‰¤aâ‰¤bâ‰¤câ‰¤d
> å¹¶å¯¹æ‰€æœ‰çš„å¯èƒ½è¡¨ç¤ºæ³•æŒ‰ a,b,c,dä¸ºè”åˆä¸»é”®å‡åºæ’åˆ—ï¼Œæœ€åè¾“å‡ºç¬¬ä¸€ä¸ªè¡¨ç¤ºæ³•ã€‚

**å››é‡å¾ªç¯ä¼˜åŒ–ä¸ºä¸‰é‡å¾ªç¯**

æ­¤æ—¶æ—¶é—´å¤æ‚åº¦ä¸ºO(N^3^)â€”â€”(5\*10^6^)^3^ è¿œè¿œå¤§äº 10^8^ï¼Œæ•°æ®å¼ºçš„æ—¶å€™å°±è¿‡ä¸äº†äº†ã€‚æ‰€ä»¥å¾ªç¯æœ€å¤šäºŒé‡

```cpp
#include<bits/stdc++.h>
using namespace std;
int main()  
{  
    int n,a,b,c,d;  
    scanf("%d",&n);   
    int sqn = int(sqrt(n));
    for(a=0;a<=sqn;++a)  
    {  
        for(b=a;b<=sqn;++b)  
        {  
            for(c=b;c<=sqn;++c)  
            {  
                d=sqrt(n-a*a-b*b-c*c); //è¿™é‡Œå‡å°‘ä¸€é‡å¾ªç¯ 
                if(n==a*a+b*b+c*c+d*d)  
                {  
                    if(c>d)swap(d,c);
                    printf("%d %d %d %d\n",a,b,c,d);  
                    return 0;  
                }   
            }   
        }   
    }   
}

```

**ä¼˜åŒ–å¾ªç¯ä¸ºäºŒé‡+åˆ©ç”¨äºŒåˆ†**

é¢„å¤„ç†cã€dä¸”å­˜ä¸‹æ¥

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int,int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

const int N = 25e5 + 10;

struct Sum
{
    int s, c, d; // sè¡¨ç¤ºcå’Œdçš„å¹³æ–¹
    bool operator<(const Sum& t) const //è¿”å›è¾ƒå°çš„é‚£ä¸ª
    {
        if(s != t.s) return s < t.s;
        if(c != t.c) return c < t.c;
        return d < t.d;
    }
} sum[N];

int n, m;

int main(void)
{
    scanf("%d", &n);

    for(int c = 0; c * c <= n; c++)
        for(int d = c; c * c + d * d <= n; d++) sum[m++] = {c * c + d * d, c, d};

    sort(sum, sum + m);

    for(int a = 0; a <= n; a++)
        for(int b = 0; b * b + a * a <= n; b++)
        {
            int t = n - a * a - b * b; // åº”å–åˆ°çš„ c * c + d * d
            //äºŒåˆ†
            int l = 0, r = m - 1;
            while(l < r)
            {
                int mid = l + r >> 1;
                if(sum[mid].s >= t) //è¦æ‰¾ä¸€ä¸ªæœ€å°çš„ æ‰€ä»¥æ˜¯>=
                    r = mid;
                else
                    l = mid + 1;
            }
            if(sum[l].s == t)
            {
                printf("%d %d %d %d\n", a, b, sum[l].c, sum[l].d);
                return 0;
            }
        }
    return 0;
}

```



**ä¼˜åŒ–å¾ªç¯ä¸ºäºŒé‡ï¼šä¼˜åŒ–æšä¸¾ï¼šå“ˆå¸Œ+æšä¸¾**

> å‡å°‘æšä¸¾æ¬¡æ•°
> ç¡®å®šæšä¸¾èŒƒå›´ï¼š
> a 0â€“sqrt(510^6/4)  : a a a a
> b 0â€“sqrt(510^6/3)  : 0 b b b 
> c 0â€“sqrt(510^6/2)  : 0 0 c c
> d 0â€“sqrt(510^6)	 : 0 0 0 d
>
> é¢„å…ˆæ±‚å‡ºR=c^2+d^2çš„è§£ ç”¨**å“ˆå¸Œè¡¨unordered_map**æ¥ä¿å­˜ä¸€ä¸ªRå¯¹åº”çš„c

åˆ©ç”¨å“ˆå¸Œè¡¨å­˜å‚¨é¢„å¤„ç†çš„cã€dï¼Œåé¢ç›´æ¥æ‹¿æ¥æ“ä½œâ€”â€”å°è£…å¥½çš„unordered_map ä¸­çš„æŸ¥è¯¢å‡½æ•°æ•ˆç‡è‚¯å®šä¸å¿…è‡ªå·±å†™çš„äºŒåˆ†å·®çš„ã€‚

**ä½†è¿™ä¸ªä¼šè¶…æ—¶â€”â€”æˆ‘ä¸ç†è§£ï¼Œè¿™æ—¶é—´å¤æ‚åº¦ä¸æ˜¯O(N^2)å—**

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int,int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

int n;
unordered_map<int, PII> mp;
int main(){
  cin>>n;
  for(int c =0;c*c<=n/2; c++) //cçš„æšä¸¾èŒƒå›´ä¼˜åŒ–
    for(int d = c; d*d+c*c <= n; d++){//d>=cæ‰€ä»¥ç›´æ¥ä»cå¼€å§‹
      int t = c*c + d*d;
      if(mp.count(t) == 0) mp[t] = {c, d};//æ²¡æœ‰å°±å­˜ï¼›æœ‰äº†çš„è¯ï¼Œé¡ºåºä¹Ÿæ’åœ¨åé¢ï¼Œæ²¡å¿…è¦å­˜
    }

  for(int a = 0; a*a <= n/4; a++){//ä¼˜åŒ–æšä¸¾èŒƒå›´
    for(int b = a; a*a+b*b<=n/2; b++){//è¿™é‡ŒåŒæ ·å¯ä»¥ä¼˜åŒ–æšä¸¾èŒƒå›´
      int t = n - a*a-b*b;
      if(mp.count(t)){
        cout<<a<<" "<<b<<" "<<mp[t].first<<" "<<mp[t].second;
        //è¾“å‡ºç¬¬ä¸€ä¸ªå°±å¯ä»¥äº†
        return 0;
      }
    }
  }
}
```

**ä¼˜åŒ–å¾ªç¯+ä¼˜åŒ–æšä¸¾+æ•°ç»„æ‰“è¡¨ä»£æ›¿å“ˆå¸Œè¡¨**

æ„Ÿè§‰ä¸¤ä¸ªåŸç†å·®ä¸å¤šï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆä¸Šé¢é‚£ä¸ªå¤æ‚åº¦ä¼šè¶…ï¼Œæœ‰æ‡‚çš„å—ã€‚

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int,int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)
const int N = 1e8 + 10;
int h[N];
int main() {
    int n;
    cin >> n;
    //æ‰“è¡¨ 
    for (int c = 0; c * c * 2<= n; c++) {    //ä¼˜åŒ–äº†æšä¸¾èŒƒå›´
        for (int d = c; d * d + c * c <= n; d++) {
            if (!h[c * c + d * d])//ä¹‹å‰æ²¡è®°å½•è¿‡
                h[c * c + d * d] = c + 1;//æ ‡è®°ï¼Œé˜²æ­¢i = 0æ—¶åœ¨åé¢åˆ¤æ–­æŸ¥æ‰¾è·³è¿‡ i = 0çš„æƒ…å†µ
        }
    }
      
    for (int a = 0; a * a * 4 <= n; a++) {     //ä¼˜åŒ–äº†æšä¸¾èŒƒå›´
        for (int b = a; b * b + a * a <= n / 2; b++) {
            int t = n - a * a - b * b;
            if (h[t]) {
                int c = h[t] - 1;   //æ¢å¤æ ‡è®°
                //é˜²æ­¢å¼€æ ¹å·åå› ä¸ºç²¾åº¦å…³ç³»,å‘ä¸‹å–æ•´,ä¾‹:25 å¼€æ ¹å·å¾—åˆ°4.99999å‘ä¸‹å–æ•´ä¸º4;
                int d = (sqrt(t - c * c) + 1e-4);
                printf("%d %d %d %d", a, b, c, d);
                return 0;
            }
        }
    }
    return 0;
}

```



---

## å‰ç¼€å’Œ

**ä¸€ç»´å‰ç¼€å’Œ**

![image-20211211210344450](https://gitee.com/okkjoo/image-bed/raw/master/imgs/image-20211211210344450.png)

### [AcWing795.å‰ç¼€å’Œ](https://www.acwing.com/problem/content/797/)

> è¾“å…¥ä¸€ä¸ªé•¿åº¦ä¸ºnçš„æ•´æ•°åºåˆ—ã€‚
>
> æ¥ä¸‹æ¥å†è¾“å…¥mä¸ªè¯¢é—®ï¼Œæ¯ä¸ªè¯¢é—®è¾“å…¥ä¸€å¯¹l, rã€‚
> å¯¹äºæ¯ä¸ªè¯¢é—®ï¼Œè¾“å‡ºåŸåºåˆ—ä¸­ä»ç¬¬lä¸ªæ•°åˆ°ç¬¬rä¸ªæ•°çš„å’Œã€‚
>
> è¾“å…¥æ ¼å¼
> ç¬¬ä¸€è¡ŒåŒ…å«ä¸¤ä¸ªæ•´æ•°nå’Œmã€‚
>
> ç¬¬äºŒè¡ŒåŒ…å«nä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæ•´æ•°æ•°åˆ—ã€‚
>
> æ¥ä¸‹æ¥mè¡Œï¼Œæ¯è¡ŒåŒ…å«ä¸¤ä¸ªæ•´æ•°lå’Œrï¼Œè¡¨ç¤ºä¸€ä¸ªè¯¢é—®çš„åŒºé—´èŒƒå›´ã€‚
>
> è¾“å‡ºæ ¼å¼
> å…±mè¡Œï¼Œæ¯è¡Œè¾“å‡ºä¸€ä¸ªè¯¢é—®çš„ç»“æœã€‚
>
> æ•°æ®èŒƒå›´
> 1â‰¤lâ‰¤râ‰¤n,
> 1â‰¤n,mâ‰¤100000,
> âˆ’1000â‰¤æ•°åˆ—ä¸­å…ƒç´ çš„å€¼â‰¤1000

<img src="https://gitee.com/okkjoo/image-bed/raw/master/imgs/image-20211211211040800.png" alt="image-20211211211040800" style="zoom:80%;" />

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int,int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)\

const int N = 1e5+10;
int a[N], sum[N];
int main(){
  int n, m;
  cin>>n>>m;
  for(int i =1;i<=n;i++){
    cin>>a[i];
    sum[i] = a[i] + sum[i-1];    
  }
  while(m--){
    int l, r;
    cin>>l>>r;
    cout<<sum[r] - sum[l-1]<<endl;
  }
}
```

**äºŒç»´å‰ç¼€å’Œ**

<img src="https://gitee.com/okkjoo/image-bed/raw/master/imgs/image-20211211212444311.png" alt="image-20211211212444311" style="zoom:80%;" />

### AcWing 796.å­çŸ©é˜µçš„å’Œ

> è¾“å…¥ä¸€ä¸ªnè¡Œmåˆ—çš„æ•´æ•°çŸ©é˜µï¼Œå†è¾“å…¥qä¸ªè¯¢é—®ï¼Œæ¯ä¸ªè¯¢é—®åŒ…å«å››ä¸ªæ•´æ•°x1, y1, x2, y2ï¼Œè¡¨ç¤ºä¸€ä¸ªå­çŸ©é˜µçš„å·¦ä¸Šè§’åæ ‡å’Œå³ä¸‹è§’åæ ‡ã€‚
>
> å¯¹äºæ¯ä¸ªè¯¢é—®è¾“å‡ºå­çŸ©é˜µä¸­æ‰€æœ‰æ•°çš„å’Œã€‚
>
> #### è¾“å…¥æ ¼å¼
>
> ç¬¬ä¸€è¡ŒåŒ…å«ä¸‰ä¸ªæ•´æ•°nï¼Œmï¼Œqã€‚
>
> æ¥ä¸‹æ¥nè¡Œï¼Œæ¯è¡ŒåŒ…å«mä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæ•´æ•°çŸ©é˜µã€‚
>
> æ¥ä¸‹æ¥qè¡Œï¼Œæ¯è¡ŒåŒ…å«å››ä¸ªæ•´æ•°x1, y1, x2, y2ï¼Œè¡¨ç¤ºä¸€ç»„è¯¢é—®ã€‚
>
> #### è¾“å‡ºæ ¼å¼
>
> å…±qè¡Œï¼Œæ¯è¡Œè¾“å‡ºä¸€ä¸ªè¯¢é—®çš„ç»“æœã€‚
>
> #### æ•°æ®èŒƒå›´
>
> 1â‰¤n,mâ‰¤1000,
> 1â‰¤qâ‰¤200000,
> 1â‰¤x1â‰¤x2â‰¤n,
> 1â‰¤y1â‰¤y2â‰¤m,
> âˆ’1000â‰¤çŸ©é˜µå†…å…ƒç´ çš„å€¼â‰¤1000



```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int,int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

const int N = 1e3+10;
int a[N][N], s[N][N];
int main(){
  int  n, m , q;
  cin>>n>>m>>q;
  for(int i =1;i<=n;i++)
    for(int j = 1;j<=m;j++)
      cin>>a[i][j];
  
  for(int i = 1; i<= n; i++)
    for(int j = 1;j <=m; j++)
      s[i][j] = s[i-1][j]+s[i][j-1] - s[i-1][j-1]  + a[i][j];//æ³¨æ„å‡å»é‡å å¯¼è‡´çš„å¤šä½™éƒ¨åˆ†

  int x1, y1, x2, y2;
  while(q--){
    cin>>x1>>y1>>x2>>y2;
    int res = s[x2][y2] - s[x1-1][y2] - s[x2][y1-1] + s[x1-1][y1-1];//ç”»ä¸ªå›¾å°±çŸ¥é“äº†
    cout<<res<<endl;
  }
}
```

### [AcWing1230.Kå€åŒºé—´](https://www.acwing.com/problem/content/1232/)|å‰ç¼€å’Œ

1. sum[i]è¡¨ç¤ºç¬¬1ä¸ªå…ƒç´ åˆ°ç¬¬iä¸ªå…ƒç´ 
2. sum[r] - sum[l-1]å°±æ˜¯åŒºé—´[l,r]çš„å’Œ
3. åŒºé—´[l,r]çš„å’Œæ˜¯kçš„å€æ•°å³(sum[r] - sum[l-1])%k == 0
4. **sum[r]%k == sum[l-1]%k**

æ‰€ä»¥åœ¨æ±‚ sum æ—¶å°±è¿›è¡Œå–æ¨¡ï¼Œæœ€åæœ‰**ä¸¤ä¸ª**ç›¸ç­‰çš„**å‰ç¼€å’Œ%k**åŒºé—´å°±å¯ä»¥å½¢æˆä¸€ä¸ª **Kå€åŒºé—´**ã€‚â€”â€”å¦‚å…±æœ‰5ä¸ªå‰ç¼€å’Œ%k1çš„ï¼Œå¯ä»¥ä»é‡Œé¢é€‰ä»»æ„ä¸¤ä¸ªçš„ç»„åˆæ•°å°±æ˜¯**å‰ç¼€å’Œ%k1 çš„Kå€åŒºé—´æ•°**ã€‚

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int,int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

const int N = 1e5+10;
ll s[N];//å‰ç¼€å’Œæ•°ç»„
int cnt[N];//cnt[x]ï¼š å‰ç¼€å’Œ%k ä¸ºx çš„ä¸ªæ•°
ll res = 0;//æœ€åçš„ç­”æ¡ˆ

int main(){
  int  n, k;
  cin>>n>>k;
  for(int i = 1; i<=n; i++){
    cin>>s[i];
    s[i] += s[i-1];
  }
  cnt[0]++;//s[0]æ”¾è¿›å»
    //åé¢å†æœ‰s[i]%k==0 çš„æ—¶å€™ï¼Œå‰é¢è¿™ä¸ªs[0]å°±å¯ä»¥è®¤ä¸ºæ˜¯è¯¥åŒºé—´çš„å·¦ç«¯ç‚¹ã€‚
  //è¿™ä¸€æ­¥çš„ç›®çš„æ˜¯å½“[1,i]åŒºé—´ç´¯åŠ æˆçš„æ•°ï¼Œä¹Ÿå°±æ˜¯s[i]æ˜¯kçš„å€æ•°ã€‚é‚£ä¹ˆåŒºé—´[1ï¼Œi]ä¹Ÿæ˜¯ä¸€ä¸ªkå€åŒºé—´ï¼Œä½†æ˜¯éœ€è¦å‰é¢æœ‰ä¸€ä¸ªç‚¹ä½œä¸ºè¿™ä¸ªåŒºé—´çš„å·¦ç«¯ç‚¹ã€‚è€Œæ­¤æ—¶s[i]%kè¿›è¡Œå–ä½™ç­‰äº0ï¼Œæ‰€ä»¥å°†cnt[0]++;
    
  for(int i = 1; i<=n; i++){
    res += cnt[s[i] % k];
    cnt[s[i]%k] ++;
  }
  cout<<res;
}
```

## å·®åˆ†

**ä¸€ç»´å·®åˆ†**

ç»™ä½ ä¸€ä¸²**é•¿åº¦ä¸ºn**çš„æ•°åˆ—a1,a2,a3......anï¼Œè¦æ±‚**å¯¹a[L]~a[R]è¿›è¡Œmæ¬¡æ“ä½œ**ï¼š

æ“ä½œ:å°†a[L]~a[R]å†…çš„å…ƒç´ éƒ½åŠ ä¸Šc
æœ€åå†ç»™å‡ºä¸€ä¸ªè¯¢é—®æ±‚a[L]-a[R]å†…çš„å…ƒç´ ä¹‹å’Œï¼Ÿ

å¯¹äºmæ¬¡æ“ä½œæ¯æ¬¡éƒ½éå†ä¸€éa[L]~a[R],ç»™åŒºé—´é‡Œçš„æ•°éƒ½åŠ ä¸Šcæˆ–å‡å»cï¼Œæœ€åå†æ±‚ä¸€æ¬¡å‰ç¼€å’Œâ€”â€”è¿™æ ·å­ç¡®å®ä¹Ÿèƒ½å¾—å‡ºæ­£ç¡®ç­”æ¡ˆï¼Œä½†æ—¶é—´å¤æ‚åº¦å´**é«˜è¾¾O(M*n)**ï¼Œå¯¹äº1<=n,m<=1e5è¿™ä¸ªæ•°æ®èŒƒå›´æ¥è¯´å°±è¶…æ—¶äº†ã€‚

**å·®åˆ†ï¼š**æˆ‘ä»¬æ–°å¼€ä¸€ä¸ªæ•°ç»„d,`d[i]=a[i]-a[i-1]`ï¼Œ**å‚¨å­˜æ¯ä¸€æ¬¡çš„ä¿®æ”¹æ“ä½œ**ï¼Œ**æœ€å**æ±‚å‰ç¼€å’Œä¸€æ¬¡è®¡ç®—å°±èƒ½è·å¾—æ­£ç¡®ç­”æ¡ˆã€‚**å·®åˆ†å¯ä»¥çœ‹æˆå‰ç¼€å’Œçš„é€†è¿ç®—**

---

```cpp
int a[N];//åŸæ•°ç»„
int d[N];//å·®åˆ†æ•°ç»„
int s[N];//å‰ç¼€å’Œæ•°ç»„
void insert(int l, int r, int c){
  d[l] += c;  //ä¿®æ”¹äº†[l,n-1]
  d[r+1] -= c; //æ’¤é”€[r+1, n-1]çš„ä¿®æ”¹
}
```





---



### [Acwing  797. å·®åˆ†](https://www.acwing.com/problem/content/description/799/)

> è¾“å…¥ä¸€ä¸ªé•¿åº¦ä¸º  n çš„æ•´æ•°åºåˆ—ã€‚
>
> æ¥ä¸‹æ¥è¾“å…¥ m ä¸ªæ“ä½œï¼Œæ¯ä¸ªæ“ä½œåŒ…å«ä¸‰ä¸ªæ•´æ•° l,r,cï¼Œè¡¨ç¤ºå°†åºåˆ—ä¸­ [l,r][l,r] ä¹‹é—´çš„æ¯ä¸ªæ•°åŠ ä¸Š cã€‚
>
> è¯·ä½ è¾“å‡ºè¿›è¡Œå®Œæ‰€æœ‰æ“ä½œåçš„åºåˆ—ã€‚
>
> #### è¾“å…¥æ ¼å¼
>
> ç¬¬ä¸€è¡ŒåŒ…å«ä¸¤ä¸ªæ•´æ•° nn å’Œ mmã€‚
>
> ç¬¬äºŒè¡ŒåŒ…å« nn ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæ•´æ•°åºåˆ—ã€‚
>
> æ¥ä¸‹æ¥ mm è¡Œï¼Œæ¯è¡ŒåŒ…å«ä¸‰ä¸ªæ•´æ•° lï¼Œrï¼Œclï¼Œrï¼Œcï¼Œè¡¨ç¤ºä¸€ä¸ªæ“ä½œã€‚
>
> #### è¾“å‡ºæ ¼å¼
>
> å…±ä¸€è¡Œï¼ŒåŒ…å« nn ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæœ€ç»ˆåºåˆ—ã€‚
>
> #### æ•°æ®èŒƒå›´
>
> 1â‰¤n,mâ‰¤1000001â‰¤n,mâ‰¤100000,
> 1â‰¤lâ‰¤râ‰¤n1â‰¤lâ‰¤râ‰¤n,
> âˆ’1000â‰¤câ‰¤1000âˆ’1000â‰¤câ‰¤1000,
> âˆ’1000â‰¤æ•´æ•°åºåˆ—ä¸­å…ƒç´ çš„å€¼â‰¤1000

```CPP
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int,int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

const int N = 1e5+10;
int a[N], d[N];
int n, m;
void insert(int l, int r, int c){
  d[l] += c;
  d[r+1] -= c;
}

int main(){
  cin>>n>>m;
  for(int i = 1; i<=n;i++){
    cin>>a[i];
    d[i] = a[i]-a[i-1];//æ„å»ºå·®åˆ†æ•°ç»„ï¼Œa[0] = 0
  }
  int  l, r, c;
  while(m--){
    cin>>l>>r>>c;
    insert(l, r, c);
  }
  for(int i = 1;i<=n;i++){
    a[i] = a[i-1] + d[i]; //å‰ç¼€å’Œè¿ç®—
    cout<<a[i]<<" ";
  }
}
```

**äºŒç»´å·®åˆ†**

å’Œä¸€ç»´å‰ç¼€å’Œä¸äºŒç»´å‰ç¼€å’Œçš„å…³ç³»å·®ä¸å¤š

**ç»™ä»¥(x1, y1)ä¸ºå·¦ä¸Šè§’ï¼Œ(x2, y2)ä¸ºå³ä¸‹è§’çš„å­çŸ©é˜µä¸­çš„æ‰€æœ‰å…ƒç´ åŠ ä¸Šcï¼š**

```cpp
void insert(int x1,int y1,int x2,int y2,int c){
    d[x1][y1]+=c;
    d[x1][y2+1]-=c;
    d[x2+1][y1]-=c;
    d[x2+1][y2+1]+=c;
}

//å‰ç¼€å’Œè¿ç®—
    for(int i=1;i<=n;i++)
      for(int j=1;j<=m;j++)
         b[i][j]+=b[i-1][j]+b[i][j-1]-b[i-1][j-1];
```

## æšä¸¾

### [AcWing1210.è¿å·åŒºé—´æ•°](https://www.acwing.com/problem/content/1212/)

> åœ¨ 1âˆ¼N çš„æŸä¸ªæ’åˆ—ä¸­æœ‰å¤šå°‘ä¸ªè¿å·åŒºé—´å‘¢ï¼Ÿ
>
> è¿™é‡Œæ‰€è¯´çš„è¿å·åŒºé—´çš„å®šä¹‰æ˜¯ï¼š
>
> å¦‚æœåŒºé—´ `[L,R][L,R]` é‡Œçš„æ‰€æœ‰å…ƒç´ ï¼ˆå³æ­¤æ’åˆ—çš„ç¬¬ L ä¸ªåˆ°ç¬¬ R ä¸ªå…ƒç´ ï¼‰é€’å¢æ’åºåèƒ½å¾—åˆ°ä¸€ä¸ªé•¿åº¦ä¸º Râˆ’L+1 çš„â€œè¿ç»­â€æ•°åˆ—ï¼Œåˆ™ç§°è¿™ä¸ªåŒºé—´è¿å·åŒºé—´ã€‚
>
> å½“ Nå¾ˆå°çš„æ—¶å€™ï¼Œå°æ˜å¯ä»¥å¾ˆå¿«åœ°ç®—å‡ºç­”æ¡ˆï¼Œä½†æ˜¯å½“ N å˜å¤§çš„æ—¶å€™ï¼Œé—®é¢˜å°±ä¸æ˜¯é‚£ä¹ˆç®€å•äº†ï¼Œç°åœ¨å°æ˜éœ€è¦ä½ çš„å¸®åŠ©ã€‚

å°±æ˜¯ç»™å‡º1~nä½†æ˜¯æ˜¯æœ‰é¡ºåºçš„ï¼Œç„¶ååœ¨é‡Œé¢æˆªå–ä¸€æ®µ`[l,r]`æ‹¿å‡ºæ¥æ’åºåä»å°åˆ°å¤§æ˜¯è¿ç»­çš„ï¼Œåˆ™åˆæ³•ï¼›å¦åˆ™ä¸ã€‚**ç‰¹æ®Šæƒ…å†µï¼šl==ræ—¶ä¹Ÿæ˜¯è¿ç»­çš„**

é‚£ä¹ˆå°±ç”¨**ä¸¤å±‚å¾ªç¯ï¼Œiè¡¨ç¤ºå·¦ç«¯ç‚¹ï¼Œjè¡¨ç¤ºå³ç«¯ç‚¹ï¼›å¹¶ä¸”è¦æ±‚è¿ç»­ï¼Œé‚£ä¹ˆå°±æ˜¯åŒºé—´ä¸­æœ€å¤§å€¼-æœ€å°å€¼ç­‰äºåŒºé—´é•¿åº¦ã€‚**

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int,int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)
  
int a[100005];
int mn, mx;
int res = 0;
int main(){
  int n;
  cin>>n;
  for(int i = 0;i <n;i++){
    cin>>a[i];
  }
  for(int i = 0; i < n; i++){
    mn = INT_MAX;
    mx = INT_MIN;
    for(int j = i;j <n; j++){
      mx = max(mx, a[j]);
      mn = min(mn, a[j]);
      if((mx - mn) == (j - i)) res++;
    }
  }
  cout<<res;
}
```

### [AcWing1236.é€’å¢ä¸‰å…ƒç»„](https://www.acwing.com/problem/content/1238/)|æšä¸¾|äºŒåˆ†|å‰ç¼€å’Œ|åŒæŒ‡é’ˆ

è¿™é¢˜çš„æ•°æ® 1e5 ï¼Œæ˜¾ç„¶éœ€è¦å¤æ‚åº¦å°äºç­‰äº O(nlogn)çš„

1. æš´åŠ›ï¼šä¸‰ä¸ªæ•°ç»„å¾ªç¯åµŒå¥—ï¼›n^3 âŒ
2. ä¼˜åŒ–æšä¸¾ï¼šAä¸­å¯»æ‰¾å°äºB[i]çš„ä¸ªæ•°acntï¼ŒCä¸­å¯»æ‰¾å¤§äºB[i]çš„ä¸ªæ•°ccnt, acnt\*ccntï¼Œé‚£ä¹ˆå¸¦æœ‰B[i]çš„åˆæ³•é€‰æ‹©æ•°å°±æ˜¯acnt\*cntï¼›n^2 âŒ
3. å†ä¼˜åŒ–æŸ¥æ‰¾ï¼šé¢„å¤„ç†ä¸‰ä¸ªæ•°ç»„,ä½¿å…¶å…·æœ‰é¡ºåº,æ’åºæ—¶é—´å¤æ‚åº¦O(nlogn)ã€‚æšä¸¾Bï¼‹äºŒåˆ†æŸ¥æ‰¾Aã€Cä¸­çš„å…ƒç´ ï¼ŒO(nlogn)ã€‚

å°æŠ€å·§ï¼š

1. æ’åºç›´æ¥ç”¨sortå‡½æ•°
2. äºŒåˆ†æŸ¥æ‰¾ç›´æ¥ç”¨low_boundã€upper_bound(è¿”å›è¿­ä»£å™¨ï¼Œä¸æ•°ç»„çš„ç¬¬ä¸€ä¸ªè¿­ä»£å™¨ç›¸å‡å°±æ˜¯æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªæ•°çš„ä¸‹æ ‡)

> å€ŸåŠ©è¾“å‡ºç»“æœå¯ä»¥çœ‹å‡ºï¼Œupper_bound() å‡½æ•°çš„åŠŸèƒ½å’Œ lower_bound() å‡½æ•°ä¸åŒï¼Œå‰è€…æŸ¥æ‰¾çš„æ˜¯å¤§äºç›®æ ‡å€¼çš„å…ƒç´ ï¼Œè€Œåè€…æŸ¥æ‰¾çš„ä¸å°äºï¼ˆå¤§äºæˆ–è€…ç­‰äºï¼‰ç›®æ ‡å€¼çš„å…ƒç´ ã€‚

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int,int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

const int N =1e5+10;
int a[N], b[N], c[N];
int main(){
  int n;scanf("%d",&n);
  FOR(i,0,n) scanf("%d",&a[i]);
  FOR(i,0,n) scanf("%d",&b[i]);
  FOR(i,0,n) scanf("%d",&c[i]);
  
  //æ’åºé¢„å¤„ç†
  sort(a,a+n);
  sort(b,b+n);
  sort(c,c+n);

  ll ans = 0;

  //æšä¸¾B
  for(int i = 0 ; i < n; i++){
    int bkey = b[i];
    //æ‰¾Aä¸­ç¬¬ä¸€ä¸ªä¸å°äºkeyçš„æ•°çš„ä¸‹æ ‡
    int pa = lower_bound(a, a + n, bkey) -  a;
    //æ‰¾Cä¸­ç¬¬ä¸€ä¸ªå¤§äºkeyçš„æ•°çš„ä¸‹æ ‡
    int pc= upper_bound(c, c + n, bkey) - c;
    if(pa >= 0 && pc < n){
      ans += (ll)(pa)*(n-pc);
    } 
  }
  printf("%lld",ans);
}
```

**åŒæŒ‡é’ˆ**

è¿›ä¸€æ­¥å¯¹æŸ¥æ‰¾è¿›è¡Œä¼˜åŒ–ï¼Œå¯¹äº**æ’è¿‡åºçš„æ•°ç»„Aå’ŒBï¼Œå¯»æ‰¾Aä¸­å°äºB[i]çš„å…ƒç´ çš„ä¸ªæ•°**å¯ä»¥è€ƒè™‘åŒæŒ‡é’ˆç®—æ³•ï¼Œå› ä¸ºæ¯ä¸ªæŒ‡é’ˆæœ€å¤šç§»åŠ¨næ¬¡ï¼Œæ•…æŸ¥æ‰¾çš„æ—¶é—´å¤æ‚åº¦é™åˆ°O(n)ï¼ŒæŸ¥æ‰¾Cä¸æŸ¥æ‰¾AåŒç†ï¼Œåªæ˜¯æ‰¾ç¬¬ä¸€ä¸ªå¤§äºBçš„ä½ç½®ã€‚

å°†å…¶ä¸­çš„äºŒåˆ†éƒ¨åˆ†ç›´æ¥æ”¹æˆç”¨æŒ‡é’ˆä»ä¸‹æ ‡ä¸º0çš„åœ°æ–¹å¼€å§‹æ¯”ã€‚ä½†æ­¤æ—¶å› ä¸ºæ’åºçš„æ—¶é—´å¤æ‚åº¦è¿˜æ˜¯ä¸ºO(nlogn)ï¼Œæ‰€ä»¥æ€»çš„æ—¶é—´å¤æ‚åº¦è¿˜æ˜¯O(nlogn).

**å‰ç¼€å’Œ**

æ’åºçš„æ—¶é—´å¤æ‚åº¦æ˜¯ä¸€ä¸ªç“¶é¢ˆï¼Œé‚£ä¹ˆå°±æ€è€ƒæ€ä¹ˆä¸æ’åºå®Œæˆç›®æ ‡ã€‚

ä¸æ’åºå¿«é€Ÿæ‰¾åˆ°Aä¸­å°äºB[i]çš„ä¸ªæ•°ï¼šå°†Aä¸­æ‰€æœ‰æ•°å‡ºç°çš„ä¸ªæ•°å­˜å‚¨åœ¨ä¸€ä¸ªå’Œå“ˆå¸Œè¡¨ä¸­ï¼Œå› ä¸ºæ•°æ®è¾ƒå°æ‰€ä»¥å¯ä»¥ç›´æ¥å¼€ä¸€ä¸ªcntaæ•°ç»„ä½œä¸ºå“ˆå¸Œè¡¨ï¼šcnt[i]è¡¨ç¤ºAä¸­içš„ä¸ªæ•°ã€‚æšä¸¾Bæ—¶ç›´æ¥**æ‰¾å°äºB[i]çš„æ‰€æœ‰å…ƒç´ çš„æ€»å’Œ**ï¼ˆæ‰¾æ€»å’Œè¿™ä¸€æ­¥å¯ä»¥**å€ŸåŠ©å‰ç¼€å’Œ**ï¼‰å³å¯ï¼›æ‰¾Cä¸­å¤§äºB[i]çš„ä¸ªæ•°ä¹ŸåŒç†ã€‚

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int,int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

const int N =1e5+10;
 

int A[N], B[N], C[N];
int cnta[N], cntc[N], sa[N], sc[N];
int main(){
  int n;scanf("%d", &n);
  //æ¯ä¸€é¡¹éƒ½è¦+1ï¼Œç›¸å¯¹å¤§å°ä¸å˜ã€‚é˜²æ­¢*å¤„åé¢è¶Šç•Œ
  //æ•°iåœ¨Aä¸­æœ‰cnta[i]ä¸ª
  FOR(i,1,n+1){
    scanf("%d", &A[i]);
    cnta[++A[i]]++;
  }
  FOR(i,1,n+1){
    scanf("%d", &B[i]);
    ++B[i];
  }
  FOR(i,1,n+1){
    scanf("%d", &C[i]);
    cntc[++C[i]]++;
  }
  //å¯¹cntaã€cntcæ±‚å‰ç¼€å’Œ
  sa[0] = cnta[0], 
  sc[0] = cntc[0];
  FOR(i, 1, N+1){ sa[i] = sa[i-1] + cnta[i];}
  FOR(i, 1, N+1){ sc[i] = sc[i-1] + cntc[i];}
  //éå†B
  ll ans = 0;
  FOR(i, 1, n+1){
    int b = B[i];
    //sa[b-1]ï¼š Aä¸­å°äºç­‰äºb-1çš„ä¸ªæ•°å³å°äºbçš„ä¸ªæ•°ï¼›   sc[N-1] - sc[b]ï¼šCä¸­å¤§äºbçš„ä¸ªæ•°
    ans += (ll)sa[b-1]*(sc[N-1] - sc[b]); //*    sa[b-1]å¦‚æœBä¸­æœ‰ä¸ªæ•°æ˜¯0ï¼Œå‰é¢ä¸é¢„å¤„ç† åŠ ä¸€ å°±ä¼šæŠ¥é”™äº†
    //è¿˜æœ‰è¦æ³¨æ„çš„æ˜¯ï¼Œè¦å…ˆè½¬æ¢ç¬¬ä¸€ä¸ªæ•°ä¸ºlonglongï¼Œç›¸ä¹˜å®Œå†è½¬æ¢æœ‰ä¸€ä¸ªæ ·ä¾‹è¿‡ä¸å»
  }
  printf("%lld",ans);
}
```

## æ¨¡æ‹Ÿã€æ’åº

### [1215. å°æœ‹å‹æ’é˜Ÿ](https://www.acwing.com/problem/content/1217/)|è´ªå¿ƒ|æ ‘çŠ¶æ•°ç»„:ç”¨æ¥æ±‚é€†åºå¯¹|å½’å¹¶æ’åº

é€†åºå¯¹ä¸ªæ•°å…¶å®ä»£è¡¨äº†è¯¥æ•°æ¢ä½ç½®çš„æ¬¡æ•°ã€‚

> é€†åºå¯¹ï¼šåœ¨è¿™ä¸ªæ•°ä¹‹å‰æ¯”è¿™ä¸ªæ•°å¤§æ•°+è¿™ä¸ªæ•°ä¹‹åæ¯”è¿™ä¸ªæ•°å°çš„æ•°

ç®—å‡ºæ¥æ¬¡æ•°ä¹‹åé€šè¿‡ç­‰å·®æ•°åˆ—æ¥è®¡ç®—å‡ºè¿™å¸®å°ç›†å‹çš„ä¸é«˜å…´ç¨‹åº¦

å¦‚ä½•æ±‚æ¯ä¸ªæ•°çš„é€†åºå¯¹ï¼š

ç›´æ¥åŒé‡å¾ªç¯å»æ±‚å½“ç„¶ä¼šè¢«å¡  æ•°æ®é‡æ˜¯ `1e5`ï¼Œæ‰€ä»¥å¯ä»¥é€‰æ‹©ä½¿ç”¨æ ‘çŠ¶æ•°ç»„

- æ¯è¯»å…¥ä¸€ä¸ªæ•°è®°å…¥æ ‘çŠ¶æ•°ç»„ï¼Œæ ‘çŠ¶æ•°ç»„ä¸­ä¿å­˜è¯¥æ•°å‡ºç°è¿‡çš„æ¬¡æ•°
- æ”¾å®Œä¹‹åï¼ŒæŸ¥è¯¢
  - åœ¨è¿™ä¸ªæ•°ä¹‹å‰æœ‰å¤šå°‘æ•°æ¯”ä»–å°ï¼Œè®°ä¸ºx
    - ç”¨å½“å‰æ•°ç»„é•¿åº¦å‡å»x  å¾—åˆ°çš„å°±æ˜¯`å°±æ˜¯åœ¨è¿™ä¸ªæ•°ä¹‹å‰æ¯”ä»–å¤§çš„æ•°çš„æ¬¡æ•°äº†`
  - å¦ä¸€è¾¹å°±æ˜¯åŒç†æŠŠæ ‘çŠ¶æ•°ç»„å€’è¿‡æ¥æ±‚ä¸€éå³å¯
    - ç›´æ¥æ±‚å°±æ˜¯`åœ¨è¿™ä¸ªæ•°ä¹‹åæ¯”ä»–å°çš„æ•°çš„æ¬¡æ•°`
- bæ•°ç»„ç»´æŠ¤çš„æ˜¯æ¯ä¸ªå°æœ‹å‹æ¢ä½çš„æ¬¡æ•°ï¼Œæ‰€ä»¥æ¯æ¬¡è¦ç”¨ç­‰å·®æ•°åˆ—å…ˆç®—å‡ºæ¯ä¸ªå°æœ‹å‹çš„ä¸å¼€å¿ƒç¨‹åº¦ï¼Œç„¶åç´¯åŠ 

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int, int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

const int N = 1e6 + 10;
int n;
ll tr[N],  //æ ‘çŠ¶æ•°ç»„
    a[N],
    b[N];  //ç»´æŠ¤æ¯ä¸ªå°æœ‹å‹éœ€è¦æ¢ä½çš„æ¬¡æ•°

int lowbit(int x) { return x & -x; }
void add(int x, int y) {
  for (int i = x; i < N; i += lowbit(i)) tr[i] += y;
}
ll query(int x) {
  int ans = 0;
  for (int i = x; i; i -= lowbit(i)) ans += tr[i];
  return ans;
}
int main() {
  cin >> n;
  for (int i = 1; i <= n; i++) {
    cin >> a[i];
    a[i]++;  //é¿å…0
  }
  for (int i = 1; i <= n; i++) {
    add(a[i], 1);
    b[i] = i - query(a[i]);  //æ¯”è¿™ä¸ªæ•°å¤§çš„æ•°= æ€»æ•° - (1~a[i]çš„æ¬¡æ•°)
  }
  //é€†åºå‰é‡ç½®ä¸€ä¸‹
  memset(tr, 0, sizeof tr);
  for (int i = n; i >= 1; i--) {
    add(a[i], 1);
    b[i] += query(a[i] - 1);  //æ¯”è¿™ä¸ªæ•°å° = (1 ~ a[i]-1)
  }
  ll res = 0;
  //ç­‰å·®é˜Ÿåˆ—æ±‚ä¸€ä¸‹
  for (int i = 1; i <= n; i++) res += (1 + b[i]) * b[i] / 2;
  cout << res;
  return 0;
}
```



### [AcWing1245.ç‰¹åˆ«æ•°çš„å’Œ](https://www.acwing.com/problem/content/1247/)|æ¨¡æ‹Ÿ|easy

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int,int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

ll res = 0;
int main(){
    int n;cin>>n;
    FOR(i,1,n+1){
        int x = i;
        while(x){
            int t = x%10;
            x /= 10;
            if(t == 2 | t == 0 | t == 1| t == 9){
                res += i;
                break;
            }
        }
    }
    cout<<res;
}
```

### [AcWing1204.é”™è¯¯ç¥¨æ®](https://www.acwing.com/problem/content/1206/)|æ¨¡æ‹Ÿ|æ’åº|è¾“å…¥å¤„ç†ï¼ˆstringstream ï¼‰

éš¾ç‚¹ä¸»è¦åœ¨äºè¿™é‡Œï¼š

>  æ¥ä¸‹æ¥ Nè¡Œï¼Œæ¯è¡ŒåŒ…å«ç©ºæ ¼åˆ†å¼€çš„è‹¥å¹²ä¸ª

è¿™æ„å‘³ç€éœ€è¦å¤„ç†ï¼šä»€ä¹ˆæ—¶å€™è¾“å…¥å®Œäº†ã€‚

å€ŸåŠ© stringstream å¯ä»¥å®Œç¾è§£å†³ã€‚

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int,int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

const int N = 1e5+10;
int a[N];
int main(){
  int n;cin>>n;
  int idx = 0;//æ•°ç»„ä¸‹æ ‡
  string line;
  getchar();//æŠŠè¡Œæ•°åé¢è¿™ä¸ªå›è½¦åƒäº†
  while(n--){
    getline(cin, line);
    stringstream ssin(line);//è¾“å…¥æµ
    while(ssin >> a[idx]) idx++;
  }
  sort(a, a+idx);//æ’åºï¼Œæ–¹ä¾¿åé¢æŸ¥é‡
  int res1, res2;
  // FOR(i,0,idx)cout<<a[i]<<" ";
  // cout<<endl;
  FOR(i, 1, idx){
    if(a[i] > a[i-1] + 1) res1 = a[i]-1;//æ–­å·
    if(a[i] == a[i-1])res2 = a[i];//é‡å·
  }
  cout<<res1<<" "<<res2;
}
```

### [AcWing466.å›æ–‡æ—¥æœŸ](https://www.acwing.com/problem/content/description/468/)|æšä¸¾|æ¨¡æ‹Ÿ

**ç›´æ¥æš´åŠ›**ï¼šæœ€å¤§çš„æ—¶å€™10^8\*8è¿‡ä¸äº†çš„

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int,int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

bool isPalind(int x){
  string s = to_string(x);
  FOR(i, 0, 4){
    for(int j = 7;i>=4;j--){
      if(s[i]!=s[j])return false;
    }
  }
  return true;
}
int res = 0;
int main(){
  int a,b;
  cin>>a>>b;
  for(int i = a;i<=b;i++){
    if(isPalind(i))res++;
  }
  cout<<res;
}
```

**é€†å‘æ€è€ƒï¼š** å…¶å®**åªç”¨æšä¸¾å·¦åŠè¾¹**ï¼Œä¹Ÿå°±æ˜¯1000~9999æ€»å…±åœ¨ä¹åƒä¸ªæ•°å­—
ç„¶åå†åˆ¤æ–­

- å¯¹ç§°åæ„æˆçš„æ—¥æœŸæ˜¯å¦åˆæ³•
- æ˜¯å¦åœ¨èŒƒå›´ä¹‹å†…

åˆ¤æ–­è®¡ç®—é‡ä¸ºå¸¸æ•°ï¼Œæ‰€ä»¥å¤æ‚åº¦ä¹Ÿåªæœ‰O(9000).

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int,int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

//æ¯ä¸ªæœˆä»½çš„å¤©æ•°åˆ«æé”™äº†ï¼ŒäºŒæœˆå°±å…ˆé»˜è®¤28ï¼Œåé¢å†åˆ¤æ–­é—°å¹´
int months[13] = {0,31,28,31,30,31,30,31,31,30,31,30,31};

//åˆ¤æ–­æ—¥æœŸæ˜¯å¦åˆæ³•
bool check(int date){  
  int year = date/10000;
  int month = date%10000/100;
  int day = date%10000%100;

  if(!month || month>= 13 || !day || day >31) return false;

  if(month != 2 && day > months[month]) return false;
  if(month == 2) {
    //åˆ¤æ–­é—°å¹´ç‰¹æ®Šæƒ…å†µ
    bool leap = year%4 == 0 && year%100 >0  || year%400 == 0;
    if(day > 28 + leap) return false;
  }
  return true;
}

int main(){
  int d1, d2;cin>>d1>>d2;
  int res = 0;
  for(int i = 1000; i <= 9999; i++){
    //æ„é€ ä¸€ä¸ªå›æ–‡æ•°å­—ä¸²
    int x = i, tmp = i;
    for(int j = 0; j<4;j++) x = x*10 + tmp%10, tmp/=10;
    if(x >= d1 && x<=d2 && check(x)) res++;
  }
  cout<<res;
}
```



### [AcWing1219.ç§»åŠ¨è·ç¦»](https://www.acwing.com/problem/content/1221/)|æ¨¡æ‹Ÿ

æ›¼å“ˆé¡¿è·ç¦»ï¼š`|x2-x1|+|y2-y1|`
æ¬§å‡ é‡Œå¾—è·ç¦»ï¼š`âˆš[(x1-x2)^2+(y1-y2)^2]`

**å¥‡æ•°è¡Œæ˜¯æ­£å¸¸çš„, å¶æ•°è¡Œæ˜¯åå‘çš„**,è¡Œåˆ—è¦å¤„ç†å¥½ï¼Œæ³¨æ„ç»†èŠ‚ã€‚**è¿™ç§é¢˜ç›®è·å–è¡Œåˆ—å·æ—¶ï¼Œæœ€å¥½å¸¦å…¥æ¯è¡Œä¸¤ç«¯çš„æ•°æ®è¿›è¡Œæµ‹è¯•**

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int,int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

int main(){
  int w, m, n;cin>>w>>m>>n;
  int x1 = (m-1)/w + 1, x2 = (n-1)/w + 1;//è¡Œæ•°
  int y1 = (x1&1)?((m-1)%w + 1): (w-(m-1)%w),//åˆ—æ•°+åˆ¤æ–­è¡Œæ•°å¥‡å¶æƒ…å†µæ—¶çš„åˆ—æ•°
      y2 = (x2&1)?((n-1)%w + 1): (w-(n-1)%w);

  cout<<abs(x1-x2) + abs(y1-y2);
}
```

### [AcWing1229.æ—¥æœŸé—®é¢˜](https://www.acwing.com/problem/content/1231/)|æ¨¡æ‹Ÿ|æšä¸¾

> å°æ˜çŸ¥é“è¿™äº›æ—¥æœŸéƒ½åœ¨1960å¹´1æœˆ1æ—¥è‡³2059å¹´12æœˆ31æ—¥ã€‚
>
> æ ¼å¼éå¸¸ä¸ç»Ÿä¸€ï¼Œæœ‰é‡‡ç”¨å¹´/æœˆ/æ—¥çš„ï¼Œæœ‰é‡‡ç”¨æœˆ/æ—¥/å¹´çš„ï¼Œè¿˜æœ‰é‡‡ç”¨æ—¥/æœˆ/å¹´çš„
>
> ç»™å‡ºä¸€ä¸ªæ–‡çŒ®ä¸Šçš„æ—¥æœŸï¼Œä½ èƒ½å¸®åŠ©å°æ˜åˆ¤æ–­æœ‰å“ªäº›å¯èƒ½çš„æ—¥æœŸå¯¹å…¶å¯¹åº”å—
>
> #### è¾“å…¥æ ¼å¼
>
> ä¸€ä¸ªæ—¥æœŸï¼Œæ ¼å¼æ˜¯â€AA/BB/CCâ€ã€‚
>
> å³æ¯ä¸ªâ€™/â€™éš”å¼€çš„éƒ¨åˆ†ç”±ä¸¤ä¸ª 0-9 ä¹‹é—´çš„æ•°å­—ï¼ˆä¸ä¸€å®šç›¸åŒï¼‰ç»„æˆã€‚
>
> #### è¾“å‡ºæ ¼å¼
>
> è¾“å‡ºè‹¥å¹²ä¸ªä¸ç›¸åŒçš„æ—¥æœŸï¼Œæ¯ä¸ªæ—¥æœŸä¸€è¡Œï¼Œæ ¼å¼æ˜¯â€yyyy-MM-ddâ€ã€‚
>
> å¤šä¸ªæ—¥æœŸæŒ‰ä»æ—©åˆ°æ™šæ’åˆ—ã€‚

1. å®Œå…¨æ¨¡æ‹Ÿï¼šä»£ç é‡å¤ªå¤§äº†ï¼Œæ²¡å¿…è¦
2. ç›´æ¥ä»19600101-20591231æšä¸¾, ç„¶åå†åˆ¤æ–­æ—¥æœŸæ˜¯å¦åˆæ³• è®¡ç®—é‡10^7ä¸ä¼šè¶…æ—¶

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int,int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

int months[13] = {0,31,28,31,30,31,30,31,31,30,31,30,31};

bool isLeap(int year){
  if(year % 400 == 0 || (year%100 != 0 && year%4 == 0)) return true;
  return false;
}

int y, m, d;//è®¾ä¸ºå…¨å±€ï¼Œæ–¹ä¾¿ä¸»ç¨‹åºé‡Œ
bool judge(int date){//ä¼ å…¥å…«ä½æ•°
  y = date/10000;
  m = date%10000/100;
  d = date%100;
  if(d < 1 || d > 31) return false;
  if(m <1 || m > 12) return false;
  //äºŒæœˆä¹‹å¤–
  if(m != 2 && d > months[m]) return false;
  //ç‰¹æ®Šæƒ…å†µï¼šé—°å¹´äºŒæœˆ
  else if(m == 2 && d > 28+isLeap(y)) return false;//æ³¨æ„è¿™é‡Œå¿…é¡»ä½¿ç”¨å¤§äºå·>è€Œä¸æ˜¯ä¸ç­‰äº!=  ï¼Œè¿™ä¸ç±»å‹è½¬æ¢æœ‰å…³
  
  return true;
}

int main(){
  int a, b, c;
  scanf("%d/%d/%d", &a,&b,&c);
  for(int i = 19600101; i<= 20591231; i++){
    if(judge(i)){
      //å¹´æœˆæ—¥ã€æœˆæ—¥å¹´ã€æ—¥æœˆå¹´;å¹´æ˜¯åä¸¤ä½æ•°
      if(        
        (y%100 == a && m == b && d == c) ||
        (d == a && m == b && y%100 == c) ||
        (m == a && d == b && y%100 == c)
      ){
        printf("%d-%02d-%02d\n",y,m,d);
      }
    }
  }
}
```

---

**æ—¥æœŸé—®é¢˜æ€»ç»“**

å†™äº†å‡ é“é¢˜ç›®ï¼Œéå¸¸å¤šæ—¥æœŸé—®é¢˜ï¼Œè¿™é‡Œæ€»ç»“ä¸€ä¸‹æ—¥æœŸé—®é¢˜ç›¸å…³å¸¸ç”¨çš„ä»£ç 

1. æŸ¥é‡æ’åº

   ```cpp
   set<string> st;
   ```

2. æ•´å‹è½¬å­—ç¬¦ä¸²`to_string`

3. å­—ç¬¦ä¸²è½¬æ•´å¹¸`stoi`

4. åˆ¤æ–­é—°å¹´

   ```cpp
   bool isLeap(int year){
     if(year % 400 == 0 || (year%100 != 0 && year%4 == 0)) return true;
     return false;
   }
   ```

5. æœˆä»½æ•°ç»„

   ```cpp
   int months[13] = {0,31,28,31,30,31,30,31,31,30,31,30,31};
   ```

6. åˆ¤æ–­æ—¥æœŸæ˜¯å¦åˆæ³•

   ```cpp
   bool judge(int date){//ä¼ å…¥å…«ä½æ•°
     y = date/10000;
     m = date%10000/100;
     d = date%100;
     if(d < 1 || d > 31) return false;
     if(m <1 || m > 12) return false;
     //äºŒæœˆä¹‹å¤–
     if(m != 2 && d > months[m]) return false;
     //ç‰¹æ®Šæƒ…å†µï¼šé—°å¹´äºŒæœˆ
     else if(m == 2 && d > 28+isLeap(y)) return false;//æ³¨æ„è¿™é‡Œå¿…é¡»ä½¿ç”¨å¤§äºå·>è€Œä¸æ˜¯ä¸ç­‰äº!=  ï¼Œè¿™ä¸ç±»å‹è½¬æ¢æœ‰å…³
     
     return true;
   }
   ```

7. å¸¸ç”¨æŠ€å·§ï¼šç›´æ¥éå†æ‰€æœ‰å¯èƒ½çš„æ—¥æœŸï¼Œå¯¹æ»¡è¶³é¢˜æ„çš„æ“ä½œï¼Œè€Œä¸æ˜¯å•ä¸ªæŸ¥è¯¢åˆ¤æ–­åæ“ä½œã€‚

---

### [AcWing1231.èˆªç­æ—¶é—´](https://www.acwing.com/problem/content/1233/)|æ¨¡æ‹Ÿ|æ•°å­¦

> é£æœºåœ¨é£ï¼Œç”±äºäººä¸ºè§„å®šçš„æ—¶åŒºå¯¼è‡´å¥½åƒæ—¶é—´å˜æ…¢æˆ–è€…å¿«äº†ï¼ˆå®é™…ä¸Šæ²¡æœ‰ï¼‰ã€‚è¿™é‡Œå¾ˆåƒæˆ‘ä»¬é«˜ä¸­ç‰©ç†å­¦çš„è¿åŠ¨å­¦çŸ¥è¯†ï¼Œæˆ‘ä»¬å¯ä»¥å‡è®¾ä¸€ä¸ªåœºæ™¯â€”â€”**èˆ¹åœ¨ä¸å¹³é™æ°´é¢è¡Œé©¶ï¼Œèˆ¹ä»ä¸€ä¸ªç‚¹å‡ºå‘è¡Œé©¶äº†sè·¯ç¨‹åè¿”å›åŸç‚¹ï¼ˆæœŸé—´èˆ¹é€Ÿä¸å˜ï¼‰ï¼Œç„¶åå‘Šè¯‰æˆ‘ä»¬æ¥å›æ•´ä¸ªè¿‡ç¨‹å›åˆ°åŸç‚¹çš„æ€»æ—¶é—´æ˜¯tï¼Œé—®èˆ¹åœ¨é™æ°´ä¸­è¡Œé©¶sè·¯ç¨‹éœ€è¦å¤šé•¿æ—¶é—´ã€‚æˆ‘ä»¬å¯ä»¥ä»¥æ°´ä¸ºå‚è€ƒç³»ï¼Œé‚£ä¹ˆæ˜¾ç„¶è¿™ä¸ªæ—¶é—´ä¸º t/2ã€‚**

ä¸Šé¢è¿™ä¸ªç†è§£ï¼Œéå¸¸ğŸ‘

- åº“å‡½æ•°çš„è¿ç”¨ï¼š
  - `sscanf`
  - `get_line`
  - `.c_str()`

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int,int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

int get_seconds(int h, int m, int s)
{
    return h * 3600 + m * 60 + s;
}

int get_time()
{
    string line;
    getline(cin, line);

    if (line.back() != ')') line += " (+0)";

    int h1, m1, s1, h2, m2, s2, d;
    sscanf(line.c_str(), "%d:%d:%d %d:%d:%d (+%d)", &h1, &m1, &s1, &h2, &m2, &s2, &d);

    return get_seconds(h2, m2, s2) - get_seconds(h1, m1, s1) + d * 24 * 3600;
}

int main()
{
    int n;
    scanf("%d", &n);
    string line;
    getline(cin, line);     // å¿½ç•¥æ‰ç¬¬ä¸€è¡Œçš„å›è½¦
    while (n -- )
    {
        int time = (get_time() + get_time()) / 2;
        int hour = time / 3600, minute = time % 3600 / 60, second = time % 60;
        printf("%02d:%02d:%02d\n", hour, minute, second);
    }

    return 0;
}
```

### [AcWing1241.å¤–å–åº—ä¼˜å…ˆçº§](https://www.acwing.com/problem/content/1243/)|æ¨¡æ‹Ÿ

>  ç”±äº**è®¢å•æ•°é‡ã€åº—é“ºæ•°é‡å’Œæ—¶é—´è¾¾åˆ°10^5**ï¼Œæˆ‘ä»¬**ä¸èƒ½é€šè¿‡æ—¶é—´æ¥æšä¸¾æ¯ä¸€ä»½è®¢å•ï¼Œè¿™æ ·å¿…ç„¶ä¼šè¶…æ—¶**ã€‚
> **å¯¹äºä¸€å®¶åº—é“º**æ¥è¯´ï¼Œåœ¨**ä¸€æ¡æ—¶é—´è½´ä¸Š**ï¼Œå¿…ç„¶æ˜¯æœ‰**ä¸€äº›æ—¶é—´ç‚¹æœ‰è®¢å•ï¼Œæœ‰äº›ç‚¹æ²¡æœ‰è®¢å•**ã€‚é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥**æšä¸¾æ¯ä¸€æ‰¹æ¬¡è®¢å•**ï¼Œè¿™äº›è®¢å•æ˜¯åŒä¸€æ—¶åˆ»åŒä¸€åº—é“ºçš„ï¼Œè¿™æ ·çš„è¯æ—¶é—´å¤æ‚åº¦å°±é™åˆ°O(m)

å…³é”®è¿˜æ˜¯é‚£ä¸ª last æ•°ç»„ï¼Œå­˜å‚¨ä¸Šä¸€æ¬¡è®¢å•æ—¶é—´ï¼Œä½¿å¾—å‡å°‘äº†æšä¸¾æ—¶é—´çš„æ“ä½œã€‚

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int,int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

const int N = 1e5+10;

int n, m, T;
int pr[N],//ä¼˜å…ˆçº§
    st[N],//st[i]=1 è¡¨ç¤ºiåœ¨ä¼˜å…ˆç¼“å­˜ä¸­
    last[N];//last[N] è¡¨ç¤ºæœ€è¿‘ä¸€æ¬¡çš„è®¢å•æ—¶é—´
PII order[N];//è®¢å•ï¼š<t, di>

int main(){
  cin>>n>>m>>T;
  for(int i = 0; i<m;i++){
    cin>>order[i].first>>order[i].second;
    // cout<<"*"<<order[i].first<<order[i].second<<endl;
  }
  // cout<<endl;
  //æŒ‰æ—¶é—´æ’åº
  sort(order, order+m);
  for(int i = 0; i<m;i++){
    // cout<<i<<"*"<<order[i].first<<order[i].second<<endl;
  }

// cout<<endl;
  for(int i = 0; i< m; ){//å–µçš„ä¸€å¼€å§‹è¿™é‡Œæ‰“ä¹ æƒ¯äº†ä¸€ä¸ª i++  ï¼Œæ‰¾äº†åŠå¤©bug
    int j = i;
    // cout<<j<<":"<<endl;
    while(order[i] == order[j] && j < m) j++;//pairçš„ç›¸ç­‰æ˜¯keyå’Œvalueéƒ½è¦ç›¸ç­‰ï¼šä¹Ÿå°±æ˜¯åŒä¸€æ—¶åˆ»ä¸€å®¶åº—å¤šä¸ªè®¢å•çš„æƒ…å†µ
    int t = order[i].first, id = order[i].second, 
        cnt = j - i;//tæ—¶åˆ»ï¼Œidåº—æœ‰cntä¸ªè®¢å•
    i = j;//è®¢å•æŒ‡é’ˆè·³è½¬
    pr[id] -= t - last[id] - 1;
    // cout<<"-:t-last-1: "<<t<<"-"<<last[id]<<"-1"<<endl;
    if(pr[id] < 0) pr[id] = 0;
    if(pr[id] <= 3) st[id] = 0;
    // cout<<"-pr"<<id<<" "<<pr[id]<<endl;

    //ä»¥ä¸Šæ˜¯å¤„ç†tæ—¶åˆ»ä¹‹å‰ï¼Œä¸‹é¢æ˜¯tæ—¶åˆ»
    pr[id] += cnt*2;
    // cout<<"+pr"<<id<<" "<<pr[id]<<endl;
    if(pr[id] > 5) st[id] = 1;
    last[id] = t;
    // cout<<"last"<<id<<" "<<last[id]<<endl;
  }
  // æœ€åå†å¤„ç†ä¸€ä¸‹
  for(int i = 1; i<= n; i++){
    if(last[i] < T){
      pr[i] -= T - last[i];
      if(pr[i] <= 3) st[i] = 0;
    }
  }
  int ans = 0;
  for(int i = 1; i <= n; i++){
    // cout<<pr[i]<<" ";
    ans += st[i];
  }
  // cout<<endl;
  cout<<ans;
  
}
```

## åŒæŒ‡é’ˆã€BFSã€DFSã€å›¾è®º

### [AcWing1238.æ—¥å¿—ç»Ÿè®¡](https://www.acwing.com/problem/content/1240/)|åŒæŒ‡é’ˆ|æ»‘åŠ¨çª—å£

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
#define x first
#define y second
typedef pair<int, int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

const int N = 1e5 + 10;
int cnt[N];  //è®°å½•å½“å‰æ—¶é—´çª—å£å†…ç‚¹èµæ¬¡æ•°
bool st[N];  //æœ‰æˆä¸ºè¿‡çƒ­å¸–å°±ä¸º1
PII win[N];  //çª—å£
int main() {
  int n, d, k;
  scanf("%d%d%d", &n, &d, &k);
  for (int i = 0; i < n; i++) {
    scanf("%d%d", &win[i].x, &win[i].y);
  }

  sort(win, win + n);  //å¯¹ç¬¬ä¸€ä¸ªå…³é”®å­—ä¹Ÿå°±æ˜¯æ—¶é—´è¿›è¡Œæ’åºæ–¹ä¾¿çª—å£æ“ä½œ

    //æ»‘åŠ¨çª—å£
  for (int i = 0, j = 0; i < n; i++) {
    //åŒæŒ‡é’ˆ
    // iä¸ºå½“å‰æŒ‡é’ˆ,ä¹Ÿå°±æ˜¯çª—å£å³ä¾§
    // jä¸ºçª—å£å·¦ä¾§
    int id = win[i].y;
    cnt[id]++;
    while (win[i].x - win[j].x >= d) {  //å› ä¸ºæ˜¯å·¦å¼€å³é—­åŒºé—´
      //è¦æŠŠæœ€å·¦è¾¹çš„é™¤æ‰äº†
      int id = win[j].y;
      cnt[id]--;
      j++;  //çª—å£å³ç§»
    }
    if (cnt[id] >= k) st[id] = 1;
  }
  for (int i = 0; i < N; i++) {
    if (st[i]) printf("%d\n", i);
  }
}
```

### [AcWing1101.çŒ®ç»™é˜¿å°”å‰ä¾¬çš„èŠ±æŸ](https://www.acwing.com/problem/content/1103/)|BFS

æ‰¾æœ€çŸ­æ­¥æ•°â€”â€”BFSï¼Œå¹¿æœï¼ŒæŒ‰å±‚æœç´¢ï¼Œä¹Ÿå°±æ˜¯æ‰¾åˆ°äº†ç›´æ¥é€€å‡ºã€‚

å­˜å‚¨

```cpp
char a[N][N];// æ¥æ”¶åœ°å›¾ã€‚
int dis[N][N];// å­˜å‚¨åˆ°æ¯ä¸ªç‚¹çš„è·¯å¾„é•¿åº¦
```

åœ°å›¾éå†æ–¹å‘æ•°ç»„

```cpp
int dx[4] = {-1, 0, 1, 0};
int dy[4] = {0, 1, 0 ,-1};
```

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int, int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

const int N = 210;
int dis[N][N];
char a[N][N];
void bfs(PII start) {
  queue<PII> q;
  q.push(start);
  while (!q.empty()) {
    PII u = q.front();
    q.pop();
    int dx[4] = {-1, 0, 1, 0};
    int dy[4] = {0, 1, 0, -1};
    //éå†å››ä¸ªæ–¹å‘
    for (int i = 0; i < 4; i++) {
      int x = u.first + dx[i], y = u.second + dy[i];
      if (a[x][y] == '#') continue;  //æ˜¯å¢™ç›´æ¥ä¸‹ä¸€ä¸ª
      if (a[x][y] == '.') {
        dis[x][y] = dis[u.first][u.second] + 1;
        a[x][y] = '#';  //éå†è¿‡çš„ç‚¹ç›´æ¥è®°å½•ä¸ºå¢™é˜²æ­¢å†æ¬¡è¿›å…¥å¤šä½™å¾ªç¯
        q.push({x, y});
      }
      if (a[x][y] == 'E') {  //æ‰¾åˆ°ç»ˆç‚¹
        cout << dis[u.first][u.second] + 1 << "\n";
        return;
      }
    }
  }
  cout << "oop!\n";  //æ²¡æ‰¾åˆ°
}
int main() {
  int t;
  cin >> t;
  while (t--) {
    memset(a, '#', sizeof(a));  //åœ°å›¾å…¨åˆå§‹åŒ–ä¸ºå¢™
    memset(dis, 0, sizeof(dis));
    int n, m;
    cin >> n >> m;
    PII start;
    //ä¸‹æ ‡ä»1å¼€å§‹ï¼Œè¿™æ ·å›¾çš„è¾¹ç¼˜ä¹Ÿå°±æ˜¯å¢™
    for (int i = 1; i <= n; i++) {
      for (int j = 1; j <= m; j++) {
        cin >> a[i][j];
        if (a[i][j] == 'S') {  //è®°å½•èµ·ç‚¹
          start = {i, j};
          // start.first = i, start.second = j;
          a[i][j] = '#';  //è®°å½•ä¸ºå¢™é˜²æ­¢è¿›å»bfsåå¤šä½™çš„é‡å¤éå†
        }
      }
    }
    bfs(start);
  }
  return 0;
}
```

### [AcWing1096.åœ°ç‰¢å¤§å¸ˆ](https://www.acwing.com/problem/content/1098/)|BFS

> ä¸‰ç»´åœ°ç‰¢
> æœ€å¿«è„±ç¦»
> ä¸å«å²©çŸ³éšœç¢å¯ä»¥ç›´æ¥é€šè¿‡ï¼Œéƒ¨åˆ†åŒ…å«å²©çŸ³éšœç¢æ— æ³•é€šè¿‡
> å……æ»¡å²©çŸ³éšœç¢çš„å•å…ƒæ ¼ç”¨â€#â€è¡¨ç¤ºï¼Œä¸å«éšœç¢çš„ç©ºå•å…ƒæ ¼ç”¨â€.â€è¡¨ç¤ºï¼Œä½ çš„èµ·å§‹ä½ç½®ç”¨â€Sâ€è¡¨ç¤ºï¼Œç»ˆç‚¹ç”¨â€Eâ€è¡¨ç¤ºã€‚
> å‘åŒ—ï¼Œå‘å—ï¼Œå‘ä¸œï¼Œå‘è¥¿ï¼Œå‘ä¸Šæˆ–å‘ä¸‹ç§»åŠ¨ä¸€ä¸ªå•å…ƒè·ç¦»å‡éœ€è¦ä¸€åˆ†é’Ÿã€‚

**æœ€å¿«è·¯çº¿ = æœ€çŸ­è·¯çº¿ = å¹¿æœ BFS**

è¿˜å°±é‚£ä¸ªå¹¿æœï¼Œåªä¸è¿‡ç©ºé—´æ¢æˆäº†ä¸‰ç»´ï¼Œä¸äºŒç»´çš„ç›¸æ¯”ï¼ŒåŒºåˆ«åœ¨äºå»ºå›¾æ—¶è¦ç”¨ä¸‰ç»´æ•°ç»„ï¼Œæ§åˆ¶ç§»åŠ¨æ–¹å‘æ—¶ä¸€å…±æœ‰å…­ä¸ªæ–¹å‘ï¼Œä¸‰ä¸ªåç§»é‡ã€‚

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int, int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

const int N = 110;
int l, r, c;      //å±‚æ•°ã€æ¯å±‚çš„è¡Œæ•°ã€åˆ—æ•°
char g[N][N][N];  //å­˜å›¾
int res[N][N][N];  //è®°å½•åˆ°è¯¥ç‚¹çš„æ­¥æ•°ï¼Œå¹¶ä¸”åˆå§‹åŒ–ä¸º-1(-1ä»£è¡¨æ²¡è®¿é—®è¿‡)

//ç‚¹ç»“æ„ä½“
struct Point {
  int z, x, y;
} st, ed;  //èµ·ç‚¹ã€ç»ˆç‚¹

//åˆ¤æ–­æ¡ä»¶è¾ƒå¤šï¼Œå°±ç›´æ¥æŠ½å–å‡ºæ¥å½“ä¸€ä¸ªå‡½æ•°
bool check(int z, int x, int y) {
  //å‡ºç•Œ
  if (z < 1 || z > l || x < 1 || x > r || y < 1 || y > c) return false;
  //è®¿é—®è¿‡
  if (res[z][x][y] != -1) return false;
  //æ˜¯é˜»ç¢
  if (g[z][x][y] == '#') return false;
  return true;
}

void bfs() {
  queue<Point> Q;
  Q.push(st);
  res[st.z][st.x][st.y] = 0;  //åˆå§‹åŒ–
  //åç§»é‡:ä¸œå—è¥¿åŒ—ä¸Šä¸‹
  int dx[6] = {1, 0, -1, 0, 0, 0};
  int dy[6] = {0, 1, 0, -1, 0, 0};
  int dz[6] = {0, 0, 0, 0, -1, 1};

  while (Q.size()) {
    auto u = Q.front();
    Q.pop();

    //éå†å„ä¸ªæ–¹å‘
    for (int i = 0; i < 6; i++) {
      int z = u.z + dz[i], x = u.x + dx[i], y = u.y + dy[i];
      if (check(z, x, y)) {
        Q.push({z, x, y});
        res[z][x][y] = res[u.z][u.x][u.y] + 1;
      }
    }
  }
}

int main() {
  // while (scanf("%d%d%d", &l, &r, &c) && l) {  // l==0æ—¶é€€å‡º
  while (cin >> l >> r >> c, l) {  // l==0æ—¶é€€å‡º
    //å¤šç»„è¾“å…¥ï¼Œæ‰€ä»¥æ¯æ¬¡éƒ½è¦åˆå§‹åŒ–æ•°ç»„
    memset(res, -1, sizeof(res));
    for (int i = 0; i < l; i++) {
      for (int j = 0; j < r; j++) {
        string s;
        cin >> s;
        for (int k = 0; k < c; k++) {
          //å›¾çš„é—®é¢˜ï¼Œåæ ‡æœ€å¥½éƒ½ä»1 å¼€å§‹ï¼Œè¿™æ ·é»˜è®¤æ•ˆæœå°±æ˜¯å››å‘¨æœ‰å¢™
          g[i + 1][j + 1][k + 1] = s[k];
          //è®°å½•èµ·ç‚¹å’Œç»ˆç‚¹
          if (s[k] == 'S')
            st = {i + 1, j + 1, k + 1};
          else if (s[k] == 'E')
            ed = {i + 1, j + 1, k + 1};
        }
      }
    }
    bfs();
    int ans = res[ed.z][ed.x][ed.y];
    if (ans != -1)
      printf("Escaped in %d minute(s).\n", ans);
    else
      printf("Trapped!\n");
  }
  return 0;
}
```

- æ¯ä¸€è¡Œéƒ½æ˜¯è¿ç€çš„ï¼Œæ‰€ä»¥ç›´æ¥ç”¨stringè¯»å…¥
- å¹¶ä¸”åæ ‡ä»1å¼€å§‹ï¼Œè¾¾åˆ°é»˜è®¤æ•ˆæœå››å‘¨æœ‰å¢™ã€‚



### [AcWing1113.çº¢ä¸é»‘](https://www.acwing.com/problem/content/1115/)|DFS|Flood Fill

> æœ‰ä¸€é—´é•¿æ–¹å½¢çš„æˆ¿å­ï¼Œåœ°ä¸Šé“ºäº†çº¢è‰²ã€é»‘è‰²ä¸¤ç§é¢œè‰²çš„æ­£æ–¹å½¢ç“·ç –ã€‚
>
> ä½ ç«™åœ¨å…¶ä¸­ä¸€å—é»‘è‰²çš„ç“·ç –ä¸Šï¼Œåªèƒ½å‘ç›¸é‚»ï¼ˆä¸Šä¸‹å·¦å³å››ä¸ªæ–¹å‘ï¼‰çš„é»‘è‰²ç“·ç –ç§»åŠ¨ã€‚
>
> è¯·å†™ä¸€ä¸ªç¨‹åºï¼Œè®¡ç®—ä½ æ€»å…±èƒ½å¤Ÿåˆ°è¾¾å¤šå°‘å—é»‘è‰²çš„ç“·ç –ã€‚

> 1ï¼‰â€˜.â€™ï¼šé»‘è‰²çš„ç“·ç –ï¼›
> 2ï¼‰â€˜#â€™ï¼šçº¢è‰²çš„ç“·ç –ï¼›
> 3ï¼‰â€˜@â€™ï¼šé»‘è‰²çš„ç“·ç –ï¼Œå¹¶ä¸”ä½ ç«™åœ¨è¿™å—ç“·ç –ä¸Šã€‚è¯¥å­—ç¬¦åœ¨æ¯ä¸ªæ•°æ®é›†åˆä¸­å”¯ä¸€å‡ºç°ä¸€æ¬¡ã€‚

è®¡ç®—ä»èµ·ç‚¹èµ°**ä»»æ„è·¯çº¿**èƒ½åˆ°è¾¾çš„é»‘è‰²ç –å—æ•°â€”â€”æœå…¨éƒ¨çš„è§£â€”â€”æ·±æœDFS

è¿˜è¦æ³¨æ„

> è¾“å…¥åŒ…æ‹¬å¤šä¸ªæ•°æ®é›†åˆã€‚
>
> å½“åœ¨ä¸€è¡Œä¸­è¯»å…¥çš„æ˜¯ä¸¤ä¸ªé›¶æ—¶ï¼Œè¡¨ç¤ºè¾“å…¥ç»“æŸã€‚

è¦çŸ¥é“æ€ä¹ˆå¤„ç†è¾“å…¥è¾“å…¥çš„æ•°æ®

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int, int> PII;


const int N = 50;
int h, w;      //å®½é«˜,w è¡Œ h åˆ—
char g[N][N];  //åœ°å›¾
int dx[4] = {0, 1, 0, -1};
int dy[4] = {1, 0, -1, 0};
int cnt = 0;

void dfs(int x, int y) {
  cnt++;          //èƒ½åˆ°å°±è¯´æ˜æ˜¯é»‘æ ¼å­ï¼Œè®°å½•++
  g[x][y] = '#';  //è½¬ä¸ºçº¢æ ¼å­ï¼Œä¹Ÿå°±æ˜¯æ ‡è®°ä¸ºè®¿é—®è¿‡
  for (int i = 0; i < 4; i++) {
    int a = x + dx[i], b = y + dy[i];
    if (a < 0 || a >= h || b < 0 || b >= w || g[a][b] == '#') continue;
    dfs(a, b);
  }
}

int main() {
  // cppä¸­é€—å·è¡¨è¾¾å¼çš„å€¼æ˜¯æœ€åä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼ï¼Œå³n||méƒ½ä¸º0æ—¶é€€å‡º
  while (cin >> w >> h, h || w) {
    cnt = 0;
    for (int i = 0; i < h; i++)
      scanf("%s", g[i]);  //ä¸€æ¬¡è¯»å…¥ä¸€è¡Œï¼Œå› ä¸ºè¾“å…¥æ—¶ä¹Ÿæ²¡æœ‰éš”ç©ºæ ¼

    int x = 0, y = 0, flag = 0;  // flagç”¨æ¥è·³å‡ºäºŒé‡å¾ªç¯
    for (int i = 0; i < h; i++) {
      for (int j = 0; j < w; j++) {
        if (g[i][j] == '@') {  //æ‰¾åˆ°èµ·ç‚¹
          x = i, y = j;
          flag = 1;
        }
      }
      // cout << "XY" << x << " " << y << endl;
      if (flag) break;
    }
    dfs(x, y);
    cout << cnt << "\n";
  }
  return 0;
}
```

### [AcWing1233.å…¨çƒå˜æš–](https://www.acwing.com/problem/content/1235/)|DFS|Flood Fill|è¿é€šå—

> æœ‰ä¸€å¼ æŸæµ·åŸŸ NÃ—N åƒç´ çš„ç…§ç‰‡ï¼Œâ€.â€è¡¨ç¤ºæµ·æ´‹ã€â€#â€è¡¨ç¤ºé™†åœ°
>
> å¦‚æœä¸€å—é™†åœ°åƒç´ ä¸æµ·æ´‹ç›¸é‚»(ä¸Šä¸‹å·¦å³å››ä¸ªç›¸é‚»åƒç´ ä¸­æœ‰æµ·æ´‹)ï¼Œå®ƒå°±ä¼šè¢«æ·¹æ²¡ã€‚
>
> è¿åœ¨ä¸€èµ·çš„ä¸€ç‰‡é™†åœ°ç»„æˆä¸€åº§å²›å±¿
>
> ä¾ç…§ç§‘å­¦å®¶çš„é¢„æµ‹ï¼Œç…§ç‰‡ä¸­æœ‰å¤šå°‘**å²›å±¿**ä¼šè¢«å®Œå…¨æ·¹æ²¡
>
> ç…§ç‰‡ä¿è¯ç¬¬ 11 è¡Œã€ç¬¬ 11 åˆ—ã€ç¬¬ NN è¡Œã€ç¬¬ NN åˆ—çš„åƒç´ éƒ½æ˜¯æµ·æ´‹ã€‚â€”â€”â€”â€”å°±æ˜¯å››å‘¨ä¸ºæµ·æ´‹

ä¸€ç‰‡é™†åœ°ç»„æˆä¸€åº§å²›å±¿â€”â€”>è¿é€šå—é—®é¢˜â€”â€”éå†ä¸€ä¸ªè¿é€šå—å¹¶æ ‡è®°å·²ç»æœç´¢è¿‡ï¼Œå†éå†ä¸‹ä¸€ä¸ªç»Ÿè®¡ä¸€å…±æœ‰å¤šå°‘ä¸ªè¿é€šå—ã€‚

å®Œå…¨æ·¹æ²¡ï¼šè¿é€šå—ä¸­ä¸€å—ä¸å‰©äº†ã€‚

æ‰€ä»¥å°±æ˜¯åˆå§‹åŒ–æ—¶éå†å¾—åˆ°è¿é€šå—ä¸ªæ•°ï¼Œç„¶åå†åœ¨æœç´¢æ—¶ç»Ÿè®¡ä¸€å—ä¸å‰©çš„è¿é€šå—æ•°é‡ã€‚

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int, int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

const int N = 1010;
int n, ans;
int d[4][2] = {{0, 1}, {0, -1}, {1, 0}, {-1, 0}};  //æ–¹å‘æ•°ç»„
char a[N][N];                                      //åœ°å›¾
int vis[N][N] = {0};                               //æ ‡è®°æ˜¯å¦è®¿é—®è¿‡
int flag;                                          //æ ‡è®°å•ä¸ªå²›æ˜¯å¦æ·¹æ²¡

//å¯¹(x,y)è¿›è¡Œæ·±æœï¼Œæ‰¾å‡ºå…¶ç›¸è¿çš„å°å²›ï¼Œåˆ¤æ–­è¯¥è¿é€šå—æ˜¯å¦ä¼šå®Œå…¨æ·¹æ²¡
void dfs(int x, int y) {
  vis[x][y] = 1;  //æ ‡è®°ä¸ºè®¿é—®è¿‡

  //å››å‘¨éƒ½æ˜¯é™†åœ°ä¸ä¼šè¢«æ·¹æ²¡
  if (a[x][y + 1] == '#' && a[x][y - 1] == '#' && a[x - 1][y] == '#' &&
      a[x + 1][y] == '#') {
    //åªè¦æœ‰ä¸€ä¸ªä¸ä¼šè¢«æ·¹æ²¡ï¼Œè·³å‡ºè¯¥è½®dfsçš„æ—¶å€™flagéƒ½ä¸º1â€”â€”å³è¯¥è¿é€šå—ä¸ä¼šå®Œå…¨æ·¹æ²¡
    flag = 1;
  }
  //ç»§ç»­æ·±æœå…¶å‘¨å›´çš„é™†åœ°
  for (int i = 0; i < 4; i++) {
    int nx = x + d[i][0], ny = y + d[i][1];
    if (vis[nx][ny] == 0 && a[nx][ny] == '#') {  //æ²¡è¢«è®¿é—®è¿‡ && æ˜¯é™†åœ°
      //ç»§ç»­DFS
      dfs(nx, ny);
    }
  }
}
int main() {
  cin >> n;
  //æ³¨æ„ä¸‹æ ‡ä»1å¼€å§‹ï¼Œè¿™æ ·å››å‘¨å°±ä¸æ˜¯'#'-->å°±ç­‰äºé¢˜ç›®ä¸­è¯´çš„å››å‘¨ä¸ºæµ·
  FOR(i, 1, n + 1) {
    FOR(j, 1, n + 1) { cin >> a[i][j]; }
  }
  FOR(i, 1, n + 1) {
    FOR(j, 1, n + 1) {
      if (a[i][j] == '#' && vis[i][j] == 0) {  //æ˜¯é™†åœ°å¹¶ä¸”æ²¡è®¿é—®è¿‡
        flag = 0;
        dfs(i, j);  //éå†è¿™ä¸ªç‚¹åŠå…¶è¿é€šå—
        if (flag == 0) {  //å‡ºæ¥æ—¶ï¼Œflagè¿˜æ˜¯0å°±è¯´æ˜è¯¥ç‚¹ç›¸è¿çš„å…¨éƒ¨éƒ½æ·¹æ²¡äº†
          ans++;
        }
      }
    }
  }
  cout << ans;
  return 0;
}
```





### [AcWing1224.äº¤æ¢ç“¶å­](https://www.acwing.com/problem/content/1226/)|å›¾è®º|ç¯|ç½®æ¢ç¾¤|è´ªå¿ƒ

> è‡³å°‘äº¤æ¢å¤šå°‘æ¬¡ï¼Œæ‰èƒ½å®Œæˆæ’åºã€‚

ä¸¾ä¸ªä¾‹å­ï¼š
åŸä½ç½®ï¼š      2 3 1 5 4
æ­£ç¡®ä½ç½®ï¼š  1 2 3 4 5
é‚£ä¹ˆï¼š
2 åº”è¯¥åœ¨ 3 çš„ä½ç½®
......

æœ€åå°±ä¼šå‘ç°ï¼Œå‡ ä¸ªæ•°ä¼šæ„æˆä¸€ä¸ªç¯ã€‚ï¼š1->2->3->1ï¼Œ5->4->5ã€‚

ä¸‰ä¸ªç»“è®ºï¼š

- æ”¹å˜ä¸€ä¸ªç¯ä¸­çš„ä¸¤ä¸ªç‚¹ï¼ˆå°†å…¶ä¸­ä¸€ä¸ªç‚¹å˜æ¢åˆ°æ­£ç¡®çš„ä½ç½®ï¼‰ï¼Œä¼šå°†ä¸€ä¸ªç¯åˆ†ä¸ºä¸¤ä¸ªç¯ï¼Œå¹¶ä¸”å¯¹å…¶ä»–çš„ç¯æ²¡æœ‰å½±å“ã€‚
- æ”¹å˜ä¸¤ä¸ªç¯ä¸­çš„ä¸¤ä¸ªç‚¹ï¼ˆå°†å…¶ä¸­ä¸€ä¸ªç‚¹å˜æ¢åˆ°æ­£ç¡®çš„ä½ç½®ï¼‰ï¼Œä¼šå°†è¿™ä¸¤ä¸ªç¯åˆä¸ºä¸€ä¸ªã€‚
- æ­£ç¡®ä½ç½®æ—¶ï¼Œå¯ä»¥çœ‹ä½œæ¯ä¸ªæ•°è‡ªå·±æ„æˆä¸€ä¸ªç¯â€”â€”ä¹Ÿå°±æ˜¯ n ä¸ªç¯ã€‚ï¼ˆn ä¸ºå…ƒç´ ä¸ªæ•°ï¼‰
- è‡³å°‘ n - k æ¬¡æ“ä½œã€‚(kä¸ºåŸä½ç½®åˆ°æ­£ç¡®ä½ç½®çš„åˆå§‹ç¯æ•°)

æ‰€ä»¥é‡ç‚¹æ“ä½œå°±æ˜¯ **æ‰¾åˆå§‹ç¯æ•°**ã€‚

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int, int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

const int N = 1e5 + 10;
int a[N];    //å­˜åˆå§‹æ•°ç»„
bool st[N];  //è®°å½•æ˜¯å¦å·²ç»æ”¾è¿›ç¯ä¸­

int main() {
  int n, k = 0;
  cin >> n;
  for (int i = 1; i <= n; i++) {
    cin >> a[i];
  }
  for (int i = 1; i <= n; i++) {
    if (!st[i]) {  //ä½ç½® i çš„å…ƒç´ è¿˜æ²¡æœ‰æ”¾å…¥åˆ°æŸä¸ªç¯ä¸­
      k++;
      // éå†æŸ¥æ‰¾ i ä½ç½®å…ƒç´ æ‰€åœ¨çš„ç¯ä¸­çš„å…¶ä»–å…ƒç´ 
      for (int j = i; !st[j]; j = a[j]) {  //ä½ç½® j æŒ‡å‘ a[j] çš„å…ƒç´ 
        st[j] = 1;                         //è®°å½•å·²ç»è¿›åˆ°æŸä¸ªç¯ä¸­äº†
      }
    }
  }
  cout << n - k << endl;
  return 0;
}
```

### [AcWing1207.å¤§è‡£çš„æ—…è´¹](https://www.acwing.com/problem/content/1209/)|æ ‘çš„ç›´å¾„|æ ‘å‹DP|DFS

> å›½ä¿®å»ºäº†å¤§é‡çš„å¿«é€Ÿè·¯ï¼Œç”¨äºè¿æ¥é¦–éƒ½å’Œç‹å›½å†…çš„å„å¤§åŸå¸‚
>
> ä»»ä½•ä¸€ä¸ªå¤§åŸå¸‚éƒ½èƒ½ä»é¦–éƒ½ç›´æ¥æˆ–è€…é€šè¿‡å…¶ä»–å¤§åŸå¸‚é—´æ¥åˆ°è¾¾ã€‚
>
> å¦‚æœä¸é‡å¤ç»è¿‡å¤§åŸå¸‚ï¼Œä»é¦–éƒ½åˆ°è¾¾æ¯ä¸ªå¤§åŸå¸‚çš„æ–¹æ¡ˆéƒ½æ˜¯å”¯ä¸€çš„ã€‚
>
> åœ¨æŸä¸ªåŸå¸‚åœä¸‹æ¥ä¿®æ•´ï¼Œåœ¨è¿ç»­è¡Œè¿›è¿‡ç¨‹ä¸­ï¼Œä»–æ‰€èŠ±çš„è·¯è´¹ä¸ä»–å·²èµ°è¿‡çš„è·ç¦»æœ‰å…³ï¼Œåœ¨èµ°ç¬¬xåƒç±³åˆ°ç¬¬x+1åƒç±³è¿™ä¸€åƒç±³ä¸­ï¼ˆxæ˜¯æ•´æ•°ï¼‰ï¼Œä»–èŠ±è´¹çš„è·¯è´¹æ˜¯x+10è¿™ä¹ˆå¤šã€‚ä¹Ÿå°±æ˜¯è¯´èµ°1åƒç±³èŠ±è´¹11ï¼Œèµ°2åƒç±³è¦èŠ±è´¹23ã€‚â€”â€”è¿™é‡Œçœ‹èµ·æ¥å¾ˆå¤æ‚ï¼Œå®é™…ä¸Šå°±æ˜¯å¾—åˆ°æœ€é•¿è·¯å¾„é•¿åº¦åç¨ä½œè®¡ç®—ç½¢äº†ã€‚â€”â€”ç­‰å·®æ•°åˆ—æ±‚å’Œï¼š(é¦–é¡¹+æœ«é¡¹ )*x/2
>
> æƒ³çŸ¥é“ï¼šä»–ä»æŸä¸€ä¸ªåŸå¸‚å‡ºå‘ï¼Œä¸­é—´ä¸ä¼‘æ¯ï¼Œåˆ°è¾¾å¦ä¸€ä¸ªåŸå¸‚ï¼Œæ‰€æœ‰å¯èƒ½èŠ±è´¹çš„è·¯è´¹ä¸­æœ€å¤šæ˜¯å¤šå°‘å‘¢
>
> **åŒå‘**é«˜é€Ÿè·¯

1. æ±‚ä¸€ä¸ªæ ‘çš„æœ€é•¿è·¯å¾„d(æ ‘çš„ç›´å¾„)ï¼Œ

2. è®¡ç®—æ€»èŠ±è´¹sã€‚

   $$ \frac{(11 + (d + 10))*d}{2} = \frac{(21+d)*d}{2}$$

**æ±‚æ ‘çš„ç›´å¾„çš„æ–¹æ³•ï¼š**

1. ä¸¤æ¬¡DFSæˆ–BFSæ±‚æœ€è¿œ $$ O(2n)$$
   ä»»å–ä¸€ç‚¹ä½œä¸ºèµ·å§‹ç‚¹kï¼Œæ‰¾åˆ°è·ç¦»è¯¥ç‚¹æœ€è¿œçš„ä¸€ä¸ªç‚¹vã€‚
    å†ä»ç‚¹vå¼€å§‹æœï¼Œæ‰¾åˆ°è·ç¦»ç‚¹væœ€è¿œçš„ä¸€ç‚¹uï¼Œåˆ™uvé—´çš„è·ç¦»æ˜¯æ ‘çš„ç›´å¾„ã€‚

   ç®—æ³•å¸¸æ•°æ¯”DPæ³•ç¨å¤§ä¸€äº›ï¼Œä½†æ˜¯å¯ä»¥åŒæ—¶å¾—çŸ¥ç›´å¾„çš„å…·ä½“ç»“ç‚¹ã€‚

   ```cpp
   void dfs(int u,int pa)
   {
       //dp[u]è®°å½•ä»uå‡ºå‘èƒ½åˆ°è¾¾çš„æœ€è¿œè·ç¦»ï¼Œrem[u]è®°å½•ç¦»uæœ€è¿œçš„ç»“ç‚¹
       rem[u]=u; dp[u]=0;
       //éå†æœç´¢ä»¥ u ä¸ºèµ·ç‚¹çš„è¾¹
       for(int i=head[u];i;i=E[i].nxt)
       {
           int v=E[i].v;
           if(v==pa) continue;
           dfs(v,u);
           if(dp[u]<=dp[v]+E[i].dis){
   	        dp[u]=dp[v]+E[i].dis,rem[u]=v;
           }
       }
   }
   
   dfs1(1,0); p=rem[1];
   dfs1(p,0); q=rem[p];
   //ç›´å¾„å°±æ˜¯pqï¼Œç›´å¾„é•¿åº¦å°±æ˜¯dp[p]
   ```

   

2. ä¸€æ¬¡DFSä¸­DP $$O(n)$$

   ```cpp
   void DP(int u,int pa)
   {
       dp[u]=0;
       for(int i=head[u];i;i=E[i].nxt)
       {
           int v=E[i].v;
           if(v==pa) continue;//å›å¤´å°±æˆç¯äº†
           DP(v,u);
           //çŠ¶æ€è½¬ç§»
           mxlen=max(mxlen,dp[u]+dp[v]+E[i].dis);//è¿™é‡Œç›´æ¥ç”¨ä¸€ä¸ªå…¨éƒ¨å˜é‡æ›´æ–°ä¹Ÿå¯ä»¥
           dp[u]=max(dp[u],dp[v]+E[i].dis);
       }
   }
   ```

   ![Screenshot_20220121_112058_com.jideos.jnotes](https://gitee.com/okkjoo/image-bed/raw/master/imgs/Screenshot_20220121_112058_com.jideos.jnotes.png)

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int, int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

const int N = 100010;
//ç”¨é“¾å¼å‰å‘æ˜Ÿå­˜å›¾
int h[N], ne[2 * N], e[2 * N], w[2 * N],
idx = 0;  //åŒå‘å›¾ï¼Œæ‰€ä»¥é™¤äº†èµ·ç‚¹æ•°ç»„ä»¥å¤–éƒ½è¦*2
ll ans = 0;

//åŠ è¾¹æ“ä½œ
void add(int a, int b, int c) {
    e[idx] = b, w[idx] = c, ne[idx] = h[a], h[a] = idx++;
}

int dp[N];
void DP(int u, int p) {
    dp[u] = 0;
    for (int i = h[u]; i != -1; i = ne[i]) {
        int v = e[i];
        if (v == p) {
            continue;
        }
        DP(v, u);
        ans = max(
            ans,
            (ll)(dp[u] + dp[v] +
                 w[i]));  //ç›´æ¥ç”¨ä¸€ä¸ªå…¨å±€å˜é‡å¾—åˆ°æœ€å¤§å€¼ï¼Œllå¼ºåˆ¶è½¬æ¢ä¸€ä¸‹æ•°æ®ç±»å‹ä½¿å¾—maxå‡½æ•°ä¸ä¼šæŠ¥é”™
        dp[u] = max(dp[u], dp[v] + w[i]);
    }
}
int n, a, b, c;
int main() {
    memset(h, -1, sizeof h);
    ios::sync_with_stdio(false);
    cin >> n;
    for (int i = 0; i < n - 1; i++) {
        cin >> a >> b >> c;
        add(a, b, c), add(b, a, c);
    }
    DP(1, -1);  //ä»»å–ä¸€ç‚¹å¼€å§‹æœï¼Œè¿™é‡Œé»˜è®¤ä»1å·ç‚¹æœï¼Œå…¶æ²¡æœ‰çˆ¶ç»“ç‚¹ï¼Œçˆ¶äº²ä¸º-1
    ans = (21 + ans) * ans / 2;  //è®¡ç®—æ€»èŠ±è´¹
    cout << ans;

    return 0;
}
```

### [1206. å‰ªæ ¼å­](https://www.acwing.com/problem/content/1208/)|DFS|æœç´¢|å‰ªæ

å¯¹æˆ‘æ¥è¯´å¤ªéš¾äº†ã€‚å…ˆé€‰æ‹©æ€§æ”¾å¼ƒã€‚

## DP

### [1217. å’éª°å­|DP|çŸ©é˜µä¹˜æ³•|å¿«é€Ÿå¹‚](https://www.acwing.com/problem/content/1219/)

å°†éª°å­ç«–ç€æ’

ä¸€ä¸ªéª°å­çš„æ‘†æ”¾æ–¹å¼æ˜¯24ç§ (ä»»æ„ä¸€é¢æœä¸Šä¾§é¢éƒ½å¯ä»¥æ—‹è½¬å››æ¬¡ 4 * 6 = 24)

`f[i][j] `è¡¨ç¤ºå‰iä¸ªéª°å­ä¸”ç¬¬`i`ä¸ªéª°å­æ•°å­—`j`æœä¸Š

çŠ¶æ€è½¬ç§» `f[i][j] = f[i - 1][k] * 4` (ä¾§é¢å¯æ—‹è½¬å››æ¬¡) ( ç¬¬i-1ä¸ªéª°å­æ•°å­—==kæœä¸Šä¸”kä¸ä¸jçš„å¯¹é¢äº’æ–¥==)

å¯ç”¨`op[j]`è¡¨ç¤º j å¯¹é¢çš„æ•°å­—, `st[k][j]`è¡¨ç¤ºä¸¤æ•°å­—æ˜¯å¦äº’æ–¥

**çŠ¶æ€è½¬ç§»**å¤§æ¦‚æ˜¯è¿™æ ·ï¼š

```cpp
for (int j = 1; j <= 6; j++) {
    for (int k = 1; k <= 6; k++) {
      if (st[k][op[j]]) continue;
      f[i][j] = (f[i][j] + f[i - 1][k] * 4) % mod;
    }
  }
```

ä½†æ•°æ®èŒƒå›´ä¸º `1e9`ï¼Œè‚¯å®šè¶…æ—¶

å€ŸåŠ©**çŸ©é˜µä¹˜æ³•**ï¼š

`Fn[] = {f[n][1], f[n][2], f[n][3], f[n][4], f[n][5], f[n][6]}`
`Fn+1[] = {f[n+1][1], f[n+1][2], f[n+1][3], f[n+1][4], f[n+1][5], f[n+1][6]}`

è¦æƒ³æœ‰ä¸€ä¸ªçŸ©é˜µ `A`èƒ½å¤Ÿä½¿å¾—==Fn+1[] = A * Fn[]==

![image-20220302110327593](https://gitee.com/okkjoo/image-bed/raw/master/imgs/image-20220302110327593.png)

==AçŸ©é˜µæ„é€ ï¼š==

```cpp
  int A[N][N];
  for (int i = 0; i < N; i++) { // æšä¸¾çŸ©é˜µçš„æ¯ä¸€åˆ—
    for (int j = 0; j < N; j++) { //æšä¸¾çŸ©é˜µçš„æ¯ä¸€è¡Œ
      if (st[j][op[i]])
        A[j][i] = 0;
      else
        A[j][i] = 4;
    }
  }
```

åˆ™`Fn[] = F[] * A ^ (n - 1)`ï¼Œåˆ©ç”¨==çŸ©é˜µå¿«é€Ÿå¹‚==æ±‚å‡ºç»“æœ,ç»“æœå°±æ˜¯`Fn[] é‡Œå…­ä¸ªæ•°çš„å’Œ`

**æ— æ³¨é‡Šï¼š**

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
#define FOR(i, n, m) for (int i = n; i < m; ++i)

int n, m;
const int N = 6, P = 1e9 + 7;
int op[] = {3, 4, 5, 0, 1, 2};
bool st[N][N];
void mul(int c[], int a[], int b[][N]) {
  int tmp[N] = {0};
  FOR(i, 0, N) FOR(j, 0, N) tmp[i] = (tmp[i] + (ll)a[j] * b[j][i]) % P;
  memcpy(c, tmp, sizeof tmp);
}
void mul(int c[][N], int a[][N], int b[][N]) {
  int tmp[N][N] = {0};
  FOR(i, 0, N)
  FOR(j, 0, N) FOR(k, 0, N) tmp[i][j] = (tmp[i][j] + (ll)a[i][k] * b[k][j]) % P;
  memcpy(c, tmp, sizeof tmp);
}
int main() {
  cin >> n >> m;
  FOR(i, 0, m) {
    int a, b;
    cin >> a >> b;
    st[a - 1][b - 1] = st[b - 1][a - 1] = 1;
  }
  int f[N] = {4, 4, 4, 4, 4, 4};
  int A[N][N];
  FOR(i, 0, N) FOR(j, 0, N) {
    if (st[j][op[i]])
      A[j][i] = 0;
    else
      A[j][i] = 4;
  }
  n--;
  while (n) {
    if (n & 1) mul(f, f, A);
    mul(A, A, A);
    n >>= 1;
  }
  int res = 0;
  FOR(i, 0, N) res = (res + f[i]) % P;
  cout << res;
  return 0;
}
```

**æœ‰æ³¨é‡Šï¼š**

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int, int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

const int N = 6, P = 1e9 + 7;

int n, m;
int op[] = {3, 4, 5, 0, 1, 2}; //ç»Ÿä¸€å‡ä¸€æ–¹ä¾¿åé¢æ“ä½œ
bool st[N][N];

void mul(int c[], int a[], int b[][N]) {  // a[]*b[][] ç»“æœç»™c[]
  int temp[N] = {0};                      //å­˜å‚¨ä¸´æ—¶ç»“æœ
  for (int i = 0; i < N; i++) {
    for (int j = 0; j < N; j++) {
      temp[i] = (temp[i] + (ll)a[j] * b[j][i]) % P;
    }
  }
  memcpy(c, temp, sizeof(temp));  //å°†ç»“æœæ”¾å…¥å‚æ•°cæ•°ç»„ä¸­ï¼Œå…¶å®å°±æ˜¯ä¼ å…¥çš„f
}

void mul(int c[][N], int a[][N], int b[][N]) {  // a[][]*b[][] ç»“æœç»™c[][]
  int temp[N][N] = {0};
  for (int i = 0; i < N; i++) {
    for (int j = 0; j < N; j++) {
      for (int k = 0; k < N; k++) {
        temp[i][j] = (temp[i][j] + (ll)a[i][k] * b[k][j]) % P;
      }
    }
  }

  memcpy(c, temp, sizeof(temp));  //å°†ç»“æœæ”¾å…¥å‚æ•°cæ•°ç»„ä¸­ï¼Œå…¶å®å°±æ˜¯ä¼ å…¥çš„ çŸ©é˜µA
}

int main() {
  cin >> n >> m;
  for (int i = 0; i < m; i++) {
    int a, b;
    cin >> a >> b;
    st[a - 1][b - 1] = st[b - 1][a - 1] = true;  //è®¾ç½®äº’æ–¥
  }

  int f[N] = {4, 4, 4, 4, 4, 4};  //åªæœ‰ä¸€ä¸ªéª°å­æ—¶æ¯ä¸ªé¢æœä¸Šçš„é€‰æ‹©æ•°
  int a[N][N];                    //çŸ©é˜µA
  // æ„é€ çŸ©é˜µA
  for (int i = 0; i < N; i++) {
    for (int j = 0; j < N; j++) {
      if (st[j][op[i]])
        a[j][i] = 0;
      else
        a[j][i] = 4;
    }
  }

  // çŸ©é˜µå¿«é€Ÿå¹‚
  n--;  //æ³¨æ„æ˜¯ n-1 æ¬¡å¹‚
  while (n) {
    if (n & 1)
      mul(f, f, a);  //å¦‚æœnçš„å½“å‰æœ«ä½ä¸º1ï¼Œf ä¹˜ä¸Šå½“å‰çš„a, å¹¶ä¸”å°†ç»“æœç»™å› f
    mul(a, a, a);  // åº•æ•°å¹³æ–¹
    n >>= 1;       // nå¾€å³ç§»ä¸€ä½
  }

  int res = 0;
  for (int i = 0; i < N; i++) {
    res = (res + f[i]) % P;
  }
  cout << res;

  return 0;
}

```

### [1214. æ³¢åŠ¨æ•°åˆ—](https://www.acwing.com/problem/content/1216/)|åŠ¨æ€è§„åˆ’|DP

å‚è€ƒé¢˜è§£ï¼šhttps://www.acwing.com/solution/content/19121/

ç–‘æƒ‘ï¼š

![image-20220227170631875](https://gitee.com/okkjoo/image-bed/raw/master/imgs/image-20220227170631875.png)

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int, int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

const int N = 1010, base = 1e8 + 7;
int n, s, a, b;
int f[N][N];
//c++%è¿ç®—æœ‰å¯èƒ½å‡ºç°è´Ÿæ•°ç»“æœï¼Œéœ€è¦è‡ªå®šä¹‰éè´Ÿçš„å–ä½™è¿ç®—)
int mod(int x) { return (x % n + n) % n; }

int main() {
  cin >> n >> s >> a >> b;
  f[0][0] = 1;
  for (int i = 1; i < n; ++i) {    //æšä¸¾i-1é¡¹
    for (int j = 0; j < n; ++j) {  //æšä¸¾ç¬¬ié¡¹çš„nç§å¯èƒ½çš„çŠ¶æ€
      f[i][j] =
          (f[i - 1][mod(j - a * (n - i))] + f[i - 1][mod(j + b * (n - i))]) %
          base;
    }
  }
  cout << f[n - 1][mod(s)];
  return 0;
}
```



### [1212. åœ°å®«å–å®](https://www.acwing.com/problem/content/1214/)|åŠ¨æ€è§„åˆ’|DP

- åé¢æ‹¿çš„ç‰©å“ä»·å€¼æ¯”å‰é¢æ‹¿çš„éƒ½å¤§
- å¯¹äºæ¯ä¸ªç‰©å“éƒ½æœ‰æ‹¿ä¸ä¸æ‹¿ä¸¤ä¸ªé€‰æ‹©ï¼Œé‚£ä¹ˆä¸æ‹¿è‚¯å®šæ˜¯å¯è¡Œçš„ï¼›æ‹¿åˆ™éœ€è¦è€ƒè™‘èƒ½ä¸èƒ½æ‹¿ï¼ŒèƒŒåŒ…æ”¾ä¸æ”¾çš„ä¸‹
  - ä¸æ‹¿ï¼šä¹Ÿå°±æ˜¯ç›´æ¥ä»ä¸Šä¸€æ­¥çš„çŠ¶æ€è½¬ç§»è¿‡æ¥
  - æ‹¿ï¼šå½“å‰ç‰©å“ä»·å€¼å¤§äºå‰é¢æ‹¿è¿‡çš„æœ€å¤§å€¼ && èƒŒåŒ…æœ‰ä½ç½®

- `dp[i][j][cnt][k]`:`åœ¨(i, j) è¿™ä¸ªç‚¹æ‹¿äº† cnt ä¸ªç‰©å“ï¼Œå…¶ä¸­ä»·å€¼æœ€å¤§å€¼ä¸º k` 
- æ¯ä¸ªç‚¹éƒ½åªä¼šæ¥æºäºå·¦è¾¹æˆ–è€…ä¸Šè¾¹
- ä¸ºäº†æ–¹ä¾¿æ“ä½œï¼Œå°†æ‰€æœ‰ç‰©å“ä»·å€¼éƒ½ + 1

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int, int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

const int N = 55, mod = 1000000007;
//`dp[i][j][cnt][k]`:`åœ¨(i, j) è¿™ä¸ªç‚¹æ‹¿äº† cntä¸ªç‰©å“ï¼Œå…¶ä¸­ä»·å€¼æœ€å¤§å€¼ä¸º
// k`,æ–¹æ¡ˆæ•°ä¸ºdpçš„å€¼
int dp[N][N][N][N], n, m, k;
int a[N][N];
int main() {
  cin >> n >> m >> k;
  FOR(i, 1, n + 1) {
    FOR(j, 1, m + 1) {
      cin >> a[i][j];
      a[i][j]++;  //æ‰€æœ‰ç‰©å“ä»·å€¼éƒ½+1   å³æ‰€æœ‰ç‰©å“çš„ä»·å€¼èŒƒå›´ä¸º[1,13]
    }
  }

  //åœ¨è¾¹ç•Œè¿›è¡Œåˆå§‹åŒ–
  dp[1][1][0][0] = 1;        //èµ·ç‚¹æ‹¿çš„æ–¹æ¡ˆæ•°ä¸º1
  dp[1][1][1][a[1][1]] = 1;  //èµ·ç‚¹ä¸æ‹¿çš„æ–¹æ¡ˆæ•°ä¹Ÿä¸º1
  //å¼€å§‹æšä¸¾
  FOR(i, 1, n + 1) {
    FOR(j, 1, m + 1) {                 //éå†(1,1)åˆ°(i,j)è¿™ä¸ªç‚¹
      if (i == 1 && j == 1) continue;  //èµ·ç‚¹è·³è¿‡
      FOR(cnt, 0, k + 1) {             //æšä¸¾æ‰‹ä¸­ç‰©å“çš„æ•°é‡
        FOR(v, 0, 14) {  //éå†å·²ç»æ‹¿åˆ°çš„æœ€å¤§ä»·å€¼ [0,13]
          //åœ¨è¯¥ç‚¹ä¸æ‹¿ç‰©å“
          dp[i][j][cnt][v] = (dp[i][j][cnt][v] + dp[i - 1][j][cnt][v]) % mod;
          dp[i][j][cnt][v] = (dp[i][j][cnt][v] + dp[i][j - 1][cnt][v]) % mod;

          //è‹¥å–çš„è¯:
          // 1. æ‰‹ä¸­çš„ç‰©å“æ€»æ•°é‡ä¸€å®šå¤§äº0
          // 2. å½“å‰å¾ªç¯åˆ°çš„ç‰©å“ä»·å€¼ä¸€å®šç­‰äºæ­¤å¤„ä½ç½®çš„ç‰©å“ä»·å€¼
          if (cnt > 0 && v == a[i][j]) {
            //æšä¸¾ ä¸Šä¸€æ­¥ || å·¦ä¸€æ­¥ çš„ç‰©å“æœ€å¤§å€¼,æœ€å¤§å€¼å°äºå½“å‰å€¼çš„å°±å¯ä»¥åŠ è¿›æ¥
            FOR(s, 0, a[i][j]) {
              dp[i][j][cnt][v] =
                  (dp[i][j][cnt][v] + dp[i - 1][j][cnt - 1][s]) % mod;
              dp[i][j][cnt][v] =
                  (dp[i][j][cnt][v] + dp[i][j - 1][cnt - 1][s]) % mod;
            }
          }
        }
      }
    }
  }
  //åœ¨ç»ˆç‚¹å°†æ‹¿kä¸ªç‰©å“çš„æ–¹æ¡ˆæ•°ç´¯åŠ 
  int res = 0;
  FOR(i, 1, 14) { res = (res + dp[n][m][k][i]) % mod; }
  cout << res;
  return 0;
}
```



### æ´›è°· [P2015 äºŒå‰è‹¹æœæ ‘](https://www.luogu.com.cn/problem/P2015)|æ ‘å‹èƒŒåŒ…

> ç»™å®šéœ€è¦ä¿ç•™çš„æ ‘ææ•°é‡ï¼Œæ±‚å‡ºæœ€å¤šèƒ½ç•™ä½å¤šå°‘è‹¹æœã€‚

- [æ ‘å‹DPå…¥é—¨è¯¦è§£](https://www.cnblogs.com/hanruyun/p/9788170.html)

>  è¿™é“é¢˜æœ‰ä¸€ä¸ªéšå«çš„æ¡ä»¶ï¼Œå½“==æŸæ¡è¾¹è¢«ä¿ç•™ä¸‹æ¥æ—¶ï¼Œä»æ ¹èŠ‚ç‚¹åˆ°è¿™æ¡è¾¹çš„è·¯å¾„ä¸Šçš„æ‰€æœ‰è¾¹ä¹Ÿéƒ½å¿…é¡»ä¿ç•™ä¸‹æ¥==
>
> è®¾`f[u][i]`è¡¨ç¤º *u*çš„å­æ ‘ä¸Šä¿ç•™i æ¡è¾¹ï¼Œè‡³å¤šä¿ç•™çš„è‹¹æœæ•°ç›®
>
> é‚£ä¹ˆçŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¹Ÿå°±æ˜¾è€Œæ˜“è§äº†
>
> ![image-20220127165719570](https://gitee.com/okkjoo/image-bed/raw/master/imgs/image-20220127165719570.png)
>
> *`u`*è¡¨ç¤ºå½“å‰èŠ‚ç‚¹ï¼Œ`v`æ˜¯`u`çš„ä¸€ä¸ªå­èŠ‚ç‚¹ï¼Œ`sz[u]`è¡¨ç¤º`u`çš„å­æ ‘ä¸Šçš„è¾¹æ•°ï¼Œ`q`å°±æ˜¯é¢˜ç›®ä¸­è¦æ±‚çš„æœ€å¤šä¿ç•™è¾¹æ•°
>
> **è¿˜è¦å€’åºæšä¸¾ï¼Œå› ä¸ºæ˜¯ 01 èƒŒåŒ…ï¼Œæœ‰å¯èƒ½ä¼šæ‹¿å¤šã€‚**

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int, int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

int n, m;
int u, v, w;
const int N = 105;

int f[N][N];  // f[j][k] è¡¨ç¤ºä»¥ç¬¬jä¸ªç‚¹ä¸ºæ ¹çš„å­æ ‘é€‰å–kä¸ªè¾¹èƒ½ä¿ç•™çš„æœ€å¤§æƒå€¼

//é“¾å¼å‰å‘æ˜Ÿå­˜å›¾
struct node {
  int w, to, nxt;
} e[N << 1];
int tot, head[N];
inline void add(int u, int v, int w) {
  e[tot] = {w, v, head[u]};
  head[u] = tot++;
}

int sz[N];  // sz[u]è¡¨ç¤ºuå­æ ‘ä¸Šçš„è¾¹æ•°

void dfs(int u, int fa) {
  for (int i = head[u]; ~i; i = e[i].nxt) {
    int v = e[i].to;
    if (v == fa) continue;
    dfs(v, u);  //å…ˆé€’

    //åœ¨å½’ä¸­æ“ä½œ
    sz[u] += sz[v] + 1;  //ä»¥uä¸ºæ ¹çš„å­æ ‘çš„è¾¹æ•° = ä»¥vä¸ºæ ¹çš„å­æ ‘çš„è¾¹ç›¸åŠ  + 1(uv)
    //æ³¨æ„jkèŒƒå›´
    for (int j = min(sz[u], m); j; --j) {
      for (int k = min(sz[v], j - 1); k >= 0; --k) {
        f[u][j] = max(f[u][j], f[u][j - k - 1] + f[v][k] + e[i].w);
      }
    }
  }
}

int main() {
  memset(head, -1, sizeof head);  //åƒä¸‡è®°å¾—åˆå§‹åŒ–head
  cin >> n >> m;
  FOR(i, 1, n) {
    cin >> u >> v >> w;
    add(u, v, w);
    add(v, u, w);
  }

  dfs(1, -1);
  cout << f[1][m];
  return 0;
}
```





### [1220. ç”Ÿå‘½ä¹‹æ ‘|æ ‘å‹DP](https://www.acwing.com/problem/content/1222/)

è¦æ±‚æ±‚å‡ºSæœ€å¤§çš„å€¼ï¼ŒSå…¶å®æ˜¯ä¸€ä¸ª**è”é€šå—**ã€‚æ‰€ä»¥å°±æ˜¯æ±‚æ‰€æœ‰è”é€šå—é‡Œé¢å€¼æœ€å¤§çš„é‚£ä¸ªã€‚â€”â€”æ²¡è¿™ä¹ˆéº»çƒ¦çš„æ ‘å‹DP

f[u]è¡¨ç¤ºçš„æ˜¯ä»¥uä¸ºæ ¹èŠ‚ç‚¹çš„è¿é€šå—çš„sumçš„æœ€å¤§å€¼

`f[u]=w[u]+max(å­æ ‘çš„æƒ…å†µï¼Œ0)` 

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int, int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

const int N = 1e5 + 10, N2 = N << 1;

int h[N], e[N2], ne[N2], w[N], tot;
void add(int a, int b) { e[tot] = b, ne[tot] = h[a], h[a] = tot++; }
int sz[N];
ll f[N];
int n;

void dfs(int u, int fa) {
  f[u] = w[u];
  for (int i = h[u]; ~i; i = ne[i]) {
    int j = e[i];
    if (j != fa) {
      dfs(j, u);                //å¾€å­èŠ‚ç‚¹é€’
      f[u] += max(f[j], (ll)0); //å½’çš„æ—¶å€™åŠ ä¸Š
    }
  }
}

int main() {
  cin >> n;
  fill(h, h + N, -1);
  // memset(h, -1, sizeof h);
  FOR(i, 1, n + 1) cin >> w[i];
  FOR(i, 0, n - 1) {
    int a, b;
    cin >> a >> b;
    add(a, b), add(b, a);
  }
  dfs(1, -1);
  ll res = f[1];
  FOR(i, 1, n + 1) res = max(res, f[i]);
  cout << res;
  return 0;
}
```



###  æ´›è°·[P2014 [CTSC1997\] é€‰è¯¾](https://www.luogu.com.cn/problem/P2014)|æ ‘å‹èƒŒåŒ…

å…ˆæ„å»ºä¸€ä¸ªè™šæ‹Ÿå¤´â€”â€”è™šæ‹Ÿè¯¾ç¨‹ï¼šæ²¡æœ‰å…ˆè¡Œè¯¾çš„å…ˆä¿®è¯¾ï¼Œåˆ™åŒ…å«Nä¸ªç»“ç‚¹çš„æ£®æ—å°±è½¬æ¢ä¸ºäº† N+1 ä¸ªç»“ç‚¹çš„æ ‘ï¼Œå…¶ä¸­ç»“ç‚¹0ä¸ºæ ¹èŠ‚ç‚¹ã€‚ï¼ˆå› ä¸ºä¸€å¼€å§‹å¯èƒ½æ˜¯æ— æ ¹çš„ï¼Œä¸å¥½æ“ä½œï¼‰

è®¾ `dp[x][t]`ä¸ºä»¥xä¸ºæ ¹çš„å­æ ‘ä¸­ï¼Œé€‰å– t é—¨è¯¾èƒ½è·å–çš„æœ€é«˜å­¦åˆ†ï¼Œè®¾xçš„å­èŠ‚ç‚¹é›†åˆä¸º `Son(x)`,å­èŠ‚ç‚¹ä¸ªæ•°ä¸º `p = |Son(x)|`ï¼Œé€‰æ‹©xè¿™é—¨è¯¾åï¼Œå¯¹äºxçš„æ¯ä¸ªå­èŠ‚ç‚¹yï¼Œä»¥yä¸ºæ ¹çš„å­æ ‘ä¸­é€‰ä¿® t -1 é—¨è¯¾ç¨‹ï¼Œå¹¶ä¸”åœ¨æ»¡è¶³ `t - 1` é—¨è¯¾ç¨‹åŸºç¡€ä¸Šè·å¾—æœ€å¤šçš„å­¦åˆ†ã€‚

**åˆå§‹**

t=0æ—¶ï¼Œæ˜¾ç„¶`dp[x][t] = 0`

**çŠ¶æ€è½¬ç§»æ–¹ç¨‹**

t>0æ—¶ï¼ŒçŠ¶æ€è½¬ç§»æ–¹ç¨‹

![img](https://gitee.com/okkjoo/image-bed/raw/master/imgs/a2e068fcf8faa0ee7eb6b865836c9c47.svg)

å…¶å®ä¹Ÿå°±æ˜¯åˆ†ç»„èƒŒåŒ…æ¨¡å‹ï¼Œæœ‰ p = |Son(x)|ç»„ç‰©å“ï¼Œæ¯ç»„ç‰©å“æœ‰ t-1 

```cpp
 #include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int, int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

const int N = 310;
//é“¾å¼å‰å‘æ˜Ÿå­˜å›¾
struct node {
  int v;        ///ç»ˆç«¯ç‚¹
  int next;     ///ä¸‹ä¸€æ¡åŒæ ·èµ·ç‚¹çš„è¾¹å·
  int w;        ///æƒå€¼
} edge[N * 2];  ///æ— å‘è¾¹ï¼Œ2å€

int head[N];  /// head[u]=iè¡¨ç¤ºä»¥uä¸ºèµ·ç‚¹çš„æ‰€æœ‰è¾¹ä¸­çš„ç¬¬ä¸€æ¡è¾¹æ˜¯ iå·è¾¹
int tot;  ///æ€»è¾¹æ•°
int minn;
void add(int u, int v) {
  edge[tot].v = v;
  // edge[tot].w=w;
  edge[tot].next = head[u];
  head[u] = tot++;
}
int n, m;
int dp[N][N], val[N];
void dfs(int u, int fa) {
  dp[u][1] = val[u];  ///é€‰ä¸€ä¸ªè‚¯å®šé€‰è‡ªå·±è¿™ä¸ªç»“ç‚¹
  for (int i = head[u]; i != -1; i = edge[i].next) {
    int v = edge[i].v;
    /// if(fa==v) continue;
    /// ///å¦‚æœä¸‹ä¸€ä¸ªç›¸é‚»èŠ‚ç‚¹å°±æ˜¯çˆ¶èŠ‚ç‚¹ï¼Œåˆ™è¯æ˜åˆ°åº•å±‚äº†ï¼Œå¼€å§‹é€’å½’çˆ¶èŠ‚ç‚¹çš„å…„å¼ŸèŠ‚ç‚¹
    dfs(v, u);
    ///åˆ†ç»„èƒŒåŒ…
    for (int j = m; j > 0; j--)  ///èƒŒåŒ…å®¹é‡ï¼Œå€’å™ï¼Œä¿è¯æ²¡æœ‰é‡å¤çš„ç‰©å“
      for (int k = 0; k < j; k++)  ///é€‰æ‹©ç”¨æˆ·
      {
        dp[u][j] = max(dp[u][j], dp[u][j - k] + dp[v][k]);
      }
  }
}
int main() {
  while (~scanf("%d%d", &n, &m)) {
    if (n == 0 && m == 0) break;
    memset(head, -1, sizeof(head));
    memset(dp, 0, sizeof(dp));
    tot = 0;

    for (int i = 1; i <= n; i++) {
      int w, v;
      scanf("%d%d", &v, &w);
      add(v, i);
      val[i] = w;  ///é¢˜ç›®ç›´æ¥ç»™å‡ºç¬¬ièŠ‚è¯¾çš„å€¼
    }

    m++;  ///æˆ‘ä»¬å¯ä»¥0å½“ä½œæ ¹èŠ‚ç‚¹ï¼Œå› ä¸ºæœ‰çš„è¯¾å¯èƒ½æ²¡æœ‰å…ˆä¿®è¯¾
    val[0] = 0;  ///è™šæ‹Ÿæ„é€ äº†ç»“ç‚¹0
    dfs(0, -1);
    printf("%d\n", dp[0][m]);
  }

  return 0;
}
```

## æ•°è®º

### [1216. é¥®æ–™æ¢è´­](https://www.acwing.com/problem/content/1218/)|æ•°å­¦

çº¯æ¨¡æ‹Ÿ

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int, int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

int n;

int main() {
  cin >> n;
  int res = n;  //è¡¨ç¤ºèƒ½å¤Ÿå–åˆ°çš„é¥®æ–™æ•°é‡
  while (n >= 3) {
    res += n / 3;
    n = n % 3 + n / 3;  //å‰©ä½™çš„ç“¶ç›–æ•°é‡
  }
  cout << res << endl;
  return 0;
}
```

åŠ¨è„‘å­ä¼˜åŒ–ä¸€ç‚¹

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int, int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

int main() {
  int n;
  cin >> n;
  int res = n;
  while (n >= 3) {
    n -= 2;  //æ¢ä¸€ç“¶é¥®æ–™ï¼Œå°‘ä¿©ç›–
    res++;
  }
  cout << res;
}
```



### [1211. èš‚èšæ„Ÿå†’](https://www.acwing.com/problem/content/1213/)|æ•°å­¦

> é¦–å…ˆæˆ‘ä»¬å¿…é¡»è¦æ˜ç™½ä¸¤åªèš‚èšç›¸æ’æ‰å¤´å¯ä»¥çœ‹ä½œæ—¶ä¸€åªèš‚èšç©¿è¿‡äº†å¦ä¸€åªèš‚èšï¼Œå› ä¸ºç›¸æ’ä¹‹åä¸¤åªèš‚èšéƒ½æ„Ÿå†’äº†ï¼Œæ‰ä¸æ‰å¤´å…¶å®æ— æ‰€è°“ï¼Œæ¯•ç«Ÿéƒ½æ„Ÿå†’äº†ï¼Œè¿™æ ·çš„è¯è¿™é¢˜å°±ç®€å•å¤šäº†ã€‚
>
> ä¸€èˆ¬æƒ…å†µï¼š
> æ„Ÿå†’èš‚èšå³è¾¹çš„å¾€å·¦è¾¹èµ°ã€å·¦è¾¹çš„å¾€å³è¾¹èµ°  å°±æ˜¯ä¼šæ„ŸæŸ“çš„ `ans = right + left+1` ï¼Œ`right` è¡¨ç¤º`åœ¨å…¶å³è¾¹çš„å¾€å·¦è¾¹èµ°çš„èš‚èšæ•°é‡`ï¼Œ`left`è¡¨ç¤º`åœ¨å…¶å·¦è¾¹çš„å¾€å³è¾¹èµ°çš„èš‚èšæ•°é‡`ï¼Œ`1`å°±æ˜¯å…¶æœ¬èº«
>
> ç‰¹æ®Šæƒ…å†µï¼š
> ç¬¬ä¸€åªèš‚èšå‘å·¦èµ°çš„æ—¶å€™ï¼Œå¦‚æœç¬¬ä¸€åªèš‚èšå·¦è¾¹æ²¡æœ‰å‘å³çˆ¬è¡Œçš„èš‚èšï¼Œç”±äºçˆ¬è¡Œé€Ÿåº¦ç›¸åŒï¼Œæ‰€ä»¥ä¸ç®¡ç¬¬ä¸€åªèš‚èšå³è¾¹æœ‰å¤šå°‘å‘å·¦çˆ¬è¡Œçš„ï¼Œå…¶å³è¾¹çš„èš‚èšæ°¸è¿œä¸å¯èƒ½è¢«æ„ŸæŸ“ã€‚åŒç†ï¼Œå½“ç¬¬ä¸€åªèš‚èšå‘å³èµ°çš„æ—¶å€™ï¼Œå¦‚æœç¬¬ä¸€åªèš‚èšå³è¾¹æ²¡æœ‰å‘å·¦çˆ¬è¡Œçš„èš‚èšï¼Œå…¶å·¦è¾¹ä¹Ÿæ°¸è¿œä¸å¯èƒ½æ„ŸæŸ“ã€‚```

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int, int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

int n;
int l, r;
int main() {
  cin >> n;
  int one, x;
  cin >> one;
  FOR(i, 1, n) {
    cin >> x;
    if (abs(x) < abs(one) && x > 0) l++;
    if (abs(x) > abs(one) && x < 0) r++;
  }
  if ((!l && one < 0) || (!r && one > 0)) {
    cout << 1;
    return 0;
  }
  cout << l + r + 1;
  return 0;
}
```



### [AcWing|1205. ä¹°ä¸åˆ°çš„æ•°ç›®](https://www.acwing.com/problem/content/1207/)|æ•°è®º|ç»“è®ºé¢˜||DP

> å‡è®¾m n ä¸º 4ã€7ï¼Œé‚£ä¹ˆæ— éä¸‰ç§æƒ…å†µï¼š
>
> 1. å•çº¯ç”¨4
> 2. å•çº¯ç”¨7
> 3. x ä¸ª 4 ï¼Œy ä¸ª 7
>
> é‚£ä¹ˆé‡ç‚¹æ€è€ƒå°±æ˜¯ç¬¬ä¸‰ç§æƒ…å†µï¼šå¾ˆæ˜æ˜¾ï¼Œè¿™æ ·çš„è¯å°±æ˜¯ åŸæ¥çš„æ•°å‡å» `4x`åå¯ä»¥æ•´é™¤ 7 ï¼Œæ­¤æ—¶å°±è¯´æ˜å®ƒå¯ä»¥ç”±4å’Œ7ç»„æˆã€‚==>`while((k-4)%7!=0&&k>0)k-=4;`

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int, int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

int main() {
  int n, m;
  scanf("%d%d", &n, &m);
  int k = n * m; //é¢˜ç›®ä¿è¯æœ‰è§£çš„æƒ…å†µä¸‹ï¼Œç”±æ•°è®ºå¾—å‡ºçš„ç»“è®ºï¼Œå¾ˆå¤šé¢˜è§£éƒ½ç”¨åˆ°äº†ï¼Œè¯æ˜å¦‚ä¸‹
  while (k) {
    int t = k;
    while (t % m != 0 && t - n > 0) t -= n;
    if (t % m != 0 && k % n != 0 &&
        k % m != 0)  //è¿™ä¸€æ­¥å°±æ˜¯åˆ¤æ–­äº†1ã€2ã€3 ä¸‰ä¸ªæ¡ä»¶
    {
      printf("%d", k);
      break;
    }
    k--;
  }
  return 0;
}

```

ç²—ç•¥è¯æ˜ï¼š`knm+1 ~ (k+1)nm`å°±å¯ä»¥ç”±`(0 ~ nm )+(0 ~ nm)+...`è·å¾—ï¼Œé‚£ä¹ˆå°±æ„Ÿè§‰ æ€»èƒ½å åŠ åˆ°é‚£ç§æ•ˆæœ

ç”šè‡³è¿˜æœ‰ä¸€ä¸ª`O(1)`çš„æ–¹æ³•ï¼Œç›´æ¥è¿”å›`(a - 1)(b - 1) - 1`é¢ å¾ˆæ˜æ˜¾ è¿™ç§æ•°å­¦æ–¹æ³•ï¼Œæˆ‘ä¹Ÿä¸å¤ªæ‡‚ã€‚

ä½†æ˜¯è¿˜æœ‰ä¸€ä¸ªæ›´ä¸ºé€šç”¨æš´åŠ›çš„æ–¹æ³•ï¼šDPï¼Œä½†å‰æä¹Ÿæ˜¯æœ‰é‚£ä¸ªç»“è®º

> å…ˆå¼€ä¸€ä¸ªboolç±»å‹dpæ•°ç»„ï¼Œdp[i]è¡¨ç¤ºèƒ½å¦ç»„æˆiã€‚
> ä¸¤ä¸ªæ•°æ®åˆ†åˆ«æ˜¯n,mï¼Œå‡å®šæœ€å°å€¼æ˜¯minnï¼Œæœ€å¤§å€¼æ˜¯maxxï¼Œé‚£ä¹ˆå°±ç›¸å½“äºä»minnå¼€å§‹ï¼Œä¸æ–­å¾€å‰èµ°ï¼Œæ¯èµ°åˆ°ä¸€ä¸ªæ•°ï¼Œéƒ½è¦çœ‹çœ‹dp[i - n]æˆ–è€…dp[i - m]æ˜¯å¦ä¸ºtrueï¼Œå¦‚æœæ˜¯ï¼Œåˆ™ç½®trueï¼Œåä¹‹æˆ‘ä»¬éœ€è¦æ›´æ–°ansï¼Œanså°±æ˜¯æŒ‡æœ€å¤§ä¸èƒ½ä¹°çš„æ•°ç›®ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æœ€åçš„è¾“å‡ºï¼Œå¾ªç¯ç»“æŸï¼Œä¾¿å¯ç›´æ¥è¾“å‡ºans

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int, int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

int n, m, minn, maxx, ans;
bool dp[1000000]; // æ•°æ®èŒƒå›´ï¼š1000*1000
int main() {
    cin >> n >> m;
    dp[0] = true;
    minn = min(n, m);
    maxx = max(n, m);
    for (int i = minn; i < n * m; i++) {
        if (i >= minn && dp[i - minn]) {
            dp[i] = true;
        } else if (i >= maxx && dp[i - maxx]) {
            dp[i] = true;
        } else {
            ans = i;
        }
    }
    cout << ans;
    return 0;
}
```

### 1213. æ–æ³¢é‚£å¥‘|å›°éš¾|å¿«é€Ÿå¹‚| æ–æ³¢é‚£å¥‘æ€§è´¨|é¾Ÿé€Ÿä¹˜æ³•

å¤ªéš¾äº†ï¼Œé€‰æ‹©æ€§æ”¾å¼ƒ

https://www.acwing.com/solution/content/43729/



## æ—¥å¸¸è¡¥é¢˜

### [scnu.ojé­”æ³•é˜µ](http://csoj.scnu.edu.cn/problem/S0276)|äºŒç»´å‰ç¼€å’Œ|DP

> åˆå§‹ä½ç½®(1,1)
>
> åœ°å›¾ä¸Šæœ‰éšœç¢ç‰©ï¼Œåªèƒ½å‘å³ä¸‹è§’ç§»åŠ¨ï¼Œè¦æ¸…é™¤æ‰€æœ‰éšœç¢ç‰©åŒæ—¶æœ€ååˆ°è¾¾(n+1, n+1)
>
> æ¸…é™¤éšœç¢çš„æŠ€èƒ½æ˜¯ä¸€ä¸ªæ­£æ–¹å½¢â€”â€”ä»æŸæ®µèµ·ç‚¹åˆ°ç»ˆç‚¹ä½œä¸ºå·¦ä¸Šè§’å’Œå³ä¸Šè§’

- å®é™…ä¸Šå°±æ˜¯éœ€è¦è‹¥å¹²ä¸ªé¦–å°¾ç›¸è¿çš„æ­£æ–¹å½¢æ¥è¦†ç›–æ‰€æœ‰éšœç¢ç‰©ã€‚

- ä»»ä½•æ—¶å€™(x, y) ä¸­x, y ç›¸ç­‰

- ä»»ä½•æ—¶å€™éƒ½ä¸å¯èƒ½èƒ½å›å¤´æ¸…é™¤xæˆ–yæ¯”å½“å‰åæ ‡å°çš„éšœç¢ç‰©

- DPï¼š

  - dp[i] è¡¨ç¤º ä»(i, i)å¼€å§‹ï¼Œèµ°åˆ°(n + 1, n+1)å¹¶æ¸…é™¤æ‰€æœ‰xå€¼å’Œyå€¼éƒ½ä¸å°äºi çš„æ–¹æ¡ˆæ•°

  - ä»åå¾€å‰DPï¼Œèµ·ç‚¹dp[n+1]çš„æ–¹æ¡ˆæ•°è‡ªç„¶åªæœ‰1

  - çœ‹ä¸‹å›¾ï¼š

    ![Screenshot_20220124_094923_com.jideos.jnotes](https://gitee.com/okkjoo/image-bed/raw/master/imgs/Screenshot_20220124_094923_com.jideos.jnotes.png)

äºŒä½å‰ç¼€å’Œé¢„å¤„ç†ä¹‹åï¼š

`int res = s[x2][y2] - s[x1-1][y2] - s[x2][y1-1] + s[x1-1][y1-1];`

è€Œå®é™…ä¸Šåªéœ€è¦ `a+b+c - a = 0`å°±ä»£è¡¨bã€cå—æ²¡æœ‰éšœç¢ã€‚

=>

`(s[j][n]+s[n][j]-s[j][j]-s[i][n]-s[n][i]+s[i][i]) - (s[j][j] - s[i][j]-s[j][i]+s[i][i]) == 0`

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int, int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

const int N = 1005;
int n, a[N][N];
char mp[N][N];
const int mod = 1e9 + 7;
ll dp[N];

int main() {
  scanf("%d", &n);
  for (int i = 1; i <= n; i++) {
    scanf("%s", mp[i] + 1);
  }
  for (int i = 1; i <= n; i++) {
    for (int j = 1; j <= n; j++) {
      a[i][j] = a[i - 1][j] + a[i][j - 1] - a[i - 1][j - 1];
      if (mp[i][j] == '1') a[i][j]++;
    }
  }
  //åè¿‡æ¥æ–¹ä¾¿dpï¼Œè®©(0,0)æ˜¯ç»ˆç‚¹ï¼Œ(n,n)æ˜¯èµ·ç‚¹,å°±æ˜¯æŠŠä¸Šé¢çš„å›¾å¯¹è§’ç¿»è¿‡æ¥ï¼Œ*æ³¨æ„äºŒä½å‰ç¼€å’Œå³bcçš„æ–¹å‘ä¹Ÿåè¿‡æ¥äº†ï¼Œæœ€å¥½è‡ªå·±ç”»ä¸€ä¸‹å°±ç†è§£äº†ã€‚
  dp[0] = 1;
  for (int i = 1; i <= n; i++) {
    for (int j = 0; j < i; j++) {
      int t = a[i][j] + a[j][i] - 2 * a[j][j];  //(a+b)+(a+c)-2a = b+C
      if (t == 0)                               // b+cæ²¡æœ‰éšœç¢
        (dp[i] += dp[j]) %= mod;
    }
  }
  cout << dp[n] << endl;
  return 0;
}
```

### scnu.oj[|cyè€å¸ˆèƒ½å¦å‡è‚¥æˆåŠŸ](http://csoj.scnu.edu.cn/problem/S0280)|çŸ©é˜µå¿«é€Ÿå¹‚

> ä»æŸä¸ªèµ·ç‚¹èµ°åˆ°æŸä¸ªç»ˆç‚¹åˆšåˆšå¥½èµ°äº†x*æ¡è¾¹ï¼ˆä¹Ÿå°±æ˜¯ä¸€æ¡é•¿åº¦ä¸ºx*çš„ä¸ä¸€å®šç®€å•çš„è·¯å¾„ï¼‰ï¼Œç§°ä¸ºä¸€ç§cyè€å¸ˆæ¥å—çš„æ–¹æ¡ˆ
> â€”â€”é•¿åº¦ä¸ºxçš„è·¯çº¿â€”â€”é‚»æ¥çŸ©é˜µçš„xæ¬¡å¹‚

å…ˆå¤„ç†çŸ©é˜µbaseï¼ˆå°±æ˜¯è¯»å…¥çš„åœ°å›¾ï¼‰ï¼Œå¯¹çŸ©é˜µbaseçš„xæ¬¡æ–¹ï¼Œå¯¹è§’çº¿ä¸Šçš„æ•°ä¹˜ä»¥(a+b)ï¼Œå…¶ä»–ä¹˜ä»¥aï¼Œç´¯åŠ ç­”æ¡ˆã€‚

**æ³›å‹å¿«é€Ÿå¹‚**

```cpp
//æ³›å‹çš„éé€’å½’å¿«é€Ÿå¹‚
template <typename T>
T qpow(T a, ll n)
{
    T ans = 1; // èµ‹å€¼ä¸ºä¹˜æ³•å•ä½å…ƒï¼Œå¯èƒ½è¦æ ¹æ®æ„é€ å‡½æ•°ä¿®æ”¹
    while (n)
    {
        if (n & 1)
            ans = ans * a; // è¿™é‡Œå°±æœ€å¥½åˆ«ç”¨è‡ªä¹˜äº†ï¼Œä¸ç„¶é‡è½½å®Œ*è¿˜è¦é‡è½½*=ï¼Œæœ‰ç‚¹éº»çƒ¦ã€‚
        n >>= 1;
        a = a * a;
    }
    return ans;
}
```

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int, int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

int n, m;
int a, b, w, x;
vector<ll> vv(105, 0);
vector<vector<ll>> g(105, vv);    //åˆå§‹çŸ©é˜µ
vector<vector<ll>> ans(105, vv);  // xæ¬¡æ–¹åçš„ç»“æœ

//çŸ©é˜µå¿«é€Ÿå¹‚
void qpow() {
  int xx = x;
  FOR(i, 0, 105) ans[i][i] = 1;  //åˆå§‹åŒ–ä¸ºå•ä½çŸ©é˜µï¼Œè€Œä¸æ˜¯å…¨1
  while (xx) {
    if (xx & 1) {
      vector<vector<ll>> tmp(105, vv);
      FOR(i, 1, n + 1) {
        FOR(j, 1, n + 1) {
          FOR(k, 1, n + 1) { tmp[i][j] += ans[i][k] * g[k][j]; }
        }
      }
      ans = tmp;
    }
    vector<vector<ll>> tmp(105, vv);
    xx >>= 1;
    FOR(i, 1, n + 1) {
      FOR(j, 1, n + 1) {
        FOR(k, 1, n + 1) { tmp[i][j] += g[i][k] * g[k][j]; }
      }
    }
    g = tmp;
  }
}
int main() {
  scanf("%d%d", &n, &m);
  int u, v;
  FOR(i, 0, m) {
    scanf("%d%d", &u, &v);
    g[u][v]++;
  }
  scanf("%d%d%d%d", &a, &b, &w, &x);
  ll res = 0;
  // ll tiao = 0, tt = 0;

  // cout << endl;
  qpow();
  // FOR(i, 1, n + 1) {
  //   FOR(j, 1, n + 1) { cout << ans[i][j] << " "; }
  //   cout << endl;
  // }
  FOR(i, 1, n + 1) {
    FOR(j, 1, n + 1) {
      // tiao += ans[i][j];
      if (i == j) {
        // tt += ans[i][j];
        res += (ans[i][j] * (a + b));
      } else
        res += (ans[i][j] * a);
    }
  }
  // cout << a << b << w << x << endl;
  // cout << tiao << " " << tt << endl;
  // cout << res;

  if (w - res <= 100) {
    cout << "yes";
  } else
    cout << "no";
}
```

### scnu.oj|[å–çŸ³å­](http://csoj.scnu.edu.cn/contest/45/problem/5)|nimæ¸¸æˆ

åªè¦å°†å„å †çŸ³å­æ•°å¼‚æˆ–èµ·æ¥ï¼Œä¸ä¸º0å°±ä»£è¡¨å…ˆæ‰‹å¿…èƒœã€‚

è¯æ˜ç•¥ã€‚

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int, int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

int a[5];
int main() {
  FOR(i, 0, 3) { cin >> a[i]; }
  int flag = 0;
  FOR(i, 0, 3) { flag ^= a[i]; }
  // cout << flag;
  if (flag)
    cout << "yes";
  else
    cout << "no";
}
```

### scnu.oj|[csomeæ ‘](http://csoj.scnu.edu.cn/problem/S0282)|æ ‘å½¢èƒŒåŒ…

`dp[i][j]`è¡¨ç¤ºåœ¨iç»“ç‚¹ï¼Œé€‰ä¸­jä¸ªçš„çŠ¶æ€ã€‚

### scnu.oj|è´´å¯¹è”

çœ‹è§ `x/y`å°±è¦æƒ³åˆ°å…ˆçº¦åˆ†â€”â€”gcd

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int, int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

ll gcd(ll a, ll b) {
  if (b == 0) return a;
  return gcd(b, a % b);
}

ll w, h, dw, dh, x, y;
int main() {
  cin >> w >> h >> dw >> dh >> x >> y;
  ll g = gcd(x, y);
  x = x / g;
  y = y / g;
  cout << min(((w - dw) / 2) / x, h / y);
}
```

### scnu.oj|æ¢¦è¯æ¥é¾™|æ¬§æ‹‰è·¯å¾„+å¹¶æŸ¥é›†

å¯¹æ¯è¡Œçš„å­—ç¬¦ä¸²ï¼Œé¦–å­—ç¬¦ä¸ºaï¼Œå°¾å­—ç¬¦ä¸ºbï¼Œåˆ™è¯¥å­—ç¬¦ä¸²ç›¸å½“äºæœ‰ä¸€æ¡ a->b çš„æœ‰å‘è¾¹ã€‚

åˆ™ï¼Œå‡ºåº¦ç­‰äºå…¥åº¦çš„ç‚¹å½“ç„¶æ²¡é—®é¢˜ï¼Œåˆ™åªéœ€è¦è€ƒè™‘å‡ºåº¦ä¸ç­‰äºå…¥åº¦çš„ç‚¹ã€‚

å¯ä»¥å…ˆå†™ä¸€é“[æ¬§æ‹‰è·¯å¾„æ¨¡æ¿é¢˜](https://www.luogu.com.cn/problem/P7771)

```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
typedef pair<int, int> PII;
#define FOR(i, n, m) for (int i = n; i < m; ++i)

const int N = 100010;
int du[N][2];  //è®°å½•å…¥åº¦ã€å‡ºåº¦
stack<int> st;
vector<int> G[N];
int del[N];  // del[now] è¡¨ç¤º G[now][1,2â€¦â€¦,del[now]-1]
             // éƒ½å·²ç»è¢«æ ‡è®°è®¿é—®è¿‡ï¼Œä¸‹ä¸€æ¬¡è¦ä»G[now][del[now]]å¼€å§‹è®¿é—®
int n, m, u, v;
void dfs(int now) {
  for (int i = del[now]; i < G[now].size(); i = del[now]) {
    del[now] = i + 1;
    dfs(G[now][i]);
  }
  st.push(now);
}
int main() {
  cin >> n >> m;
  FOR(i, 0, m) {
    cin >> u >> v;
    G[u].push_back(v), du[u][1]++, du[v][0]++;
  }
  FOR(i, 1, n + 1) { sort(G[i].begin(), G[i].end()); }
  int S = 1, cnt[2] = {0, 0};  //è®°å½•èµ·ç‚¹å’Œå‡ºå…¥åº¦å·®ä¸º1çš„æ•°ç›®
  bool flag = 1;               // 1è¡¨ç¤ºæ‰€æœ‰ç»“ç‚¹çš„å…¥åº¦éƒ½ç­‰äºå‡ºåº¦
  FOR(i, 1, n + 1) {
    if (du[i][0] != du[i][1]) flag = 0;
    if (du[i][1] - du[i][0] == 1) cnt[1]++, S = i;
    if (du[i][0] - du[i][1] == 1) cnt[0]++;
  }
  if ((!flag) && !(cnt[0] == cnt[1] && cnt[0] == 1)) {
    cout << "No";
    return 0;
  }
  dfs(S);
  while (!st.empty()) printf("%d ", st.top()), st.pop();
  return 0;
}
```



è¿™é¢˜å…¶å®å°±æ˜¯å­˜åœ¨æ¬§æ‹‰è·¯å¾„å°±yes

